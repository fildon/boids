!function(t){var e={};function i(n){if(e[n])return e[n].exports;var s=e[n]={i:n,l:!1,exports:{}};return t[n].call(s.exports,s,s.exports,i),s.l=!0,s.exports}i.m=t,i.c=e,i.d=function(t,e,n){i.o(t,e)||Object.defineProperty(t,e,{enumerable:!0,get:n})},i.r=function(t){"undefined"!=typeof Symbol&&Symbol.toStringTag&&Object.defineProperty(t,Symbol.toStringTag,{value:"Module"}),Object.defineProperty(t,"__esModule",{value:!0})},i.t=function(t,e){if(1&e&&(t=i(t)),8&e)return t;if(4&e&&"object"==typeof t&&t&&t.__esModule)return t;var n=Object.create(null);if(i.r(n),Object.defineProperty(n,"default",{enumerable:!0,value:t}),2&e&&"string"!=typeof t)for(var s in t)i.d(n,s,function(e){return t[e]}.bind(null,s));return n},i.n=function(t){var e=t&&t.__esModule?function(){return t.default}:function(){return t};return i.d(e,"a",e),e},i.o=function(t,e){return Object.prototype.hasOwnProperty.call(t,e)},i.p="",i(i.s=4)}([function(t,e,i){"use strict";Object.defineProperty(e,"__esModule",{value:!0}),e.config=void 0,e.config={boid:{alignmentRadius:40,alignmentRadiusDefault:40,attractionRadius:200,attractionRadiusDefault:200,defaultColour:"LightSteelBlue",fearDuration:30,maxSpeed:6,minSpeed:3,quantity:100,repulsionRadius:30,repulsionRadiusDefault:30,size:4,visionRadius:200},creature:{acceleration:.2,headingFuzz:.05,maxHistory:5,turningMax:.2},hunter:{defaultColour:"pink",eatRadius:20,maxSpeed:5,minSpeed:0,quantity:1,size:8,visionRadius:90},player:{maxSpeed:64,minSpeed:0},screen:{maxX:1e3,maxY:1e3}}},function(t,e,i){"use strict";Object.defineProperty(e,"__esModule",{value:!0}),e.Vector2=void 0;const n=i(0);class s{constructor(t=0,e=0){this.x=t%n.config.screen.maxX,this.y=e%n.config.screen.maxY,this.length=Math.sqrt(Math.pow(this.x,2)+Math.pow(this.y,2))}static average(t){if(0===t.length)return new s;return t.reduce((t,e)=>t.add(e)).scaleByScalar(1/t.length)}static fromHeadingAndSpeed(t,e){return e?new s(e*Math.cos(t),e*Math.sin(t)):new s(0,0)}unitVector(){return this.scaleByScalar(1/this.length)}distance(t){return this.vectorTo(t).length}vectorTo(t){let e=(t.x-this.x)%n.config.screen.maxX;e>n.config.screen.maxX/2&&(e-=n.config.screen.maxX),e<-n.config.screen.maxX/2&&(e+=n.config.screen.maxX);let i=(t.y-this.y)%n.config.screen.maxY;return i>n.config.screen.maxY/2&&(i-=n.config.screen.maxY),i<-n.config.screen.maxY/2&&(i+=n.config.screen.maxY),new s(e,i)}rotate(t){return new s(this.x*Math.cos(t)-this.y*Math.sin(t),this.x*Math.sin(t)+this.y*Math.cos(t))}angleTo(t){return Math.atan2(this.x*t.y-this.y*t.x,this.x*t.x+this.y*t.y)}add(t){return new s(this.x+t.x,this.y+t.y)}subtract(t){return new s(this.x-t.x,this.y-t.y)}equals(t){return this.x===t.x&&this.y===t.y}scaleByScalar(t){return new s(this.x*t,this.y*t)}scaleToLength(t){return this.length?this.scaleByScalar(t/this.length):this}isParallelTo(t){return this.x*t.y==this.y*t.x}normalize(){return 0<=this.x&&0<=this.y?this:new s((this.x%n.config.screen.maxX+n.config.screen.maxX)%n.config.screen.maxX,(this.y%n.config.screen.maxY+n.config.screen.maxY)%n.config.screen.maxY)}toHeading(){return Math.atan2(this.y,this.x)}toString(){return`[${this.x}, ${this.y}]`}}e.Vector2=s},function(t,e,i){"use strict";Object.defineProperty(e,"__esModule",{value:!0}),e.Creature=void 0;const n=i(1);e.Creature=class{distanceToCreature(t){return this.position.distance(t.position)}updateHistory(){this.history.push(this.position),this.history=this.history.slice(1)}velocity(){return n.Vector2.fromHeadingAndSpeed(this.heading,this.speed)}}},function(t,e,i){"use strict";Object.defineProperty(e,"__esModule",{value:!0});const n=i(1);e.default=class{constructor(t=new n.Vector2,e=0){this.vector=t,this.weight=e}static average(t){if(0===t.length)return new n.Vector2;const e=t.reduce((t,e)=>({vector:t.vector.add(e.vector.scaleByScalar(e.weight)),weight:t.weight+e.weight}),{vector:new n.Vector2,weight:0});return e.vector.scaleByScalar(1/e.weight)}}},function(t,e,i){"use strict";Object.defineProperty(e,"__esModule",{value:!0});const n=i(5);document.addEventListener("DOMContentLoaded",()=>{(new n.SimulationManager).runSimulation()},!1)},function(t,e,i){"use strict";Object.defineProperty(e,"__esModule",{value:!0}),e.SimulationManager=void 0;const n=i(6),s=i(0),r=i(8),o=i(9);e.SimulationManager=class{constructor(){this.fpsTarget=60;const t=document.getElementById("canvas");if(!t)throw new Error("couldn't find 'canvas' on document");this.canvas=new n.Canvas(t),this.inputHandler=new r.InputHandler(this.canvas,t=>this.createBoid(t),t=>this.createHunter(t)),this.creatureStorage=new o.CreatureStorage(this.inputHandler);for(let t=0;t<s.config.boid.quantity;t++)this.creatureStorage.addBoid();for(let t=0;t<s.config.hunter.quantity;t++)this.creatureStorage.addHunter()}createBoid(t){this.creatureStorage.addBoid(t)}createHunter(t){this.creatureStorage.addHunter(t)}runSimulation(){this.tick(performance.now(),0)}tick(t,e){const i=performance.now(),n=i-t;for(t=i,e+=n;e>=1e3/this.fpsTarget;)this.updateSimulation(),e-=1e3/this.fpsTarget;this.renderSimulation(),setTimeout(()=>this.tick(t,e),0)}updateSimulation(){this.creatureStorage.update();for(const t of this.creatureStorage.getAllBoids())t.update();for(const t of this.creatureStorage.getAllHunters())t.update()}renderSimulation(){this.canvas.draw(this.creatureStorage.getAllCreatures()),this.updateHunterCountDisplay(this.creatureStorage.getHunterCount()),this.updateBoidCountDisplay(this.creatureStorage.getBoidCount())}updateHunterCountDisplay(t){const e=document.getElementById("number-of-hunters");e&&(e.textContent=""+t)}updateBoidCountDisplay(t){const e=document.getElementById("number-of-boids");e&&(e.textContent=""+t)}}},function(t,e,i){"use strict";Object.defineProperty(e,"__esModule",{value:!0}),e.Canvas=void 0;const n=i(0),s=i(1),r=i(7);e.Canvas=class{constructor(t){this.fpsCounter=r.FpsCounter.getFpsCounter(),this.cameraPosition=new s.Vector2(window.innerWidth,window.innerHeight),this.canvas=t;const e=this.canvas.getContext("2d");if(!e)throw new Error("could not get canvas context");this.ctx=e,this.canvas.height=n.config.screen.maxY,this.canvas.width=n.config.screen.maxX,this.setScreenSize()}onclick(t){this.canvas.onclick=t}setScreenSize(){window&&(n.config.screen.maxX=window.innerWidth,n.config.screen.maxY=window.innerHeight),this.ctx.canvas.width=n.config.screen.maxX,this.ctx.canvas.height=n.config.screen.maxY}draw(t,e=new s.Vector2(window.innerWidth/2,window.innerHeight/2)){this.cameraPosition=e,this.ctx.clearRect(0,0,this.canvas.width,this.canvas.height),this.setScreenSize(),this.drawGhosts(t),t.forEach(t=>{this.drawCreature(t)}),this.fpsCounter.countFrame(),this.fpsCounter.updateFps()}drawGhosts(t){if(n.config.creature.maxHistory)for(let e=0;e<n.config.creature.maxHistory;e++)t.forEach(t=>{this.drawGhost(t,e)})}drawGhost(t,e){this.drawCreatureBody(t,e)}drawCreature(t){this.drawCreatureBody(t),this.drawCreatureBeak(t)}getPositionInCameraSpace(t){return t.add(new s.Vector2(window.innerWidth/2,window.innerHeight/2)).subtract(this.cameraPosition).normalize()}getPositionInWorldSpace(t){return t.subtract(new s.Vector2(window.innerWidth/2,window.innerHeight/2)).add(this.cameraPosition).normalize()}drawCreatureBody(t,e){let i=e?t.history[e]:t.position;i=this.getPositionInCameraSpace(i);const s=e?t.size*((e+1)/(n.config.creature.maxHistory+1)):t.size;this.ctx.beginPath(),this.ctx.arc(i.x,i.y,s,0,2*Math.PI),this.ctx.fillStyle=t.colour,this.ctx.fill()}drawCreatureBeak(t){const e=this.getPositionInCameraSpace(t.position);this.ctx.beginPath(),this.ctx.arc(e.x+(t.size+1)*Math.cos(t.heading),e.y+(t.size+1)*Math.sin(t.heading),t.size/2,0,2*Math.PI),this.ctx.fillStyle="black",this.ctx.fill()}}},function(t,e,i){"use strict";Object.defineProperty(e,"__esModule",{value:!0}),e.FpsCounter=void 0;class n{constructor(){this.SECOND=1e3,this.recentFrames=[],this.fpsLabel=document.getElementById("fps-status"),this.start=performance.now()}static getFpsCounter(){return this.fpsCounter||(this.fpsCounter=new n)}countFrame(){this.recentFrames.push(performance.now())}getFPS(){const t=performance.now(),e=t-this.start<this.SECOND?Math.floor(1e3/(t-this.start)):1;return this.recentFrames.filter(e=>e>=t-this.SECOND).length*e}updateFps(){this.fpsLabel.textContent=this.getFPS().toString()}}e.FpsCounter=n},function(t,e,i){"use strict";Object.defineProperty(e,"__esModule",{value:!0}),e.InputHandler=void 0;const n=i(1),s=i(0);e.InputHandler=class{constructor(t,e,i){this.left=!1,this.right=!1,this.up=!1,this.down=!1,this.canvas=t,this.createBoid=e,this.createHunter=i,this.separationLabel=document.getElementById("separation-status"),this.alignmentLabel=document.getElementById("alignment-status"),this.cohesionLabel=document.getElementById("cohesion-status"),this.canvas.onclick(t=>{this.handleMouseClick(t)}),window.addEventListener("keyup",t=>{this.handleKeyUp(t)}),window.addEventListener("keyup",t=>{this.setArrow(t.key,!1)}),window.addEventListener("keydown",t=>{this.setArrow(t.key,!0)})}handleMouseClick(t){const e=this.canvas.getPositionInWorldSpace(new n.Vector2(t.clientX,t.clientY));t.ctrlKey||t.metaKey?this.createHunter(e):this.createBoid(e)}handleKeyUp(t){switch(t.keyCode){case 49:this.toggleSeparation();break;case 50:this.toggleAlignment();break;case 51:this.toggleCohesion();break;default:return}}toggleSeparation(){s.config.boid.repulsionRadius?(s.config.boid.repulsionRadius=0,this.separationLabel.textContent="OFF",this.separationLabel.style.color="red"):(s.config.boid.repulsionRadius=s.config.boid.repulsionRadiusDefault,this.separationLabel.textContent="ON",this.separationLabel.style.color="green")}toggleAlignment(){s.config.boid.alignmentRadius?(s.config.boid.alignmentRadius=0,this.alignmentLabel.textContent="OFF",this.alignmentLabel.style.color="red"):(s.config.boid.alignmentRadius=s.config.boid.alignmentRadiusDefault,this.alignmentLabel.textContent="ON",this.alignmentLabel.style.color="green")}toggleCohesion(){s.config.boid.attractionRadius?(s.config.boid.attractionRadius=0,this.cohesionLabel.textContent="OFF",this.cohesionLabel.style.color="red"):(s.config.boid.attractionRadius=s.config.boid.attractionRadiusDefault,this.cohesionLabel.textContent="ON",this.cohesionLabel.style.color="green")}getHeadingUpdate(){return.1*(+this.right-+this.left)}getSpeedUpdate(){return.5*(+this.up-+this.down)}setArrow(t,e){switch(t){case"ArrowLeft":this.left=e;break;case"ArrowRight":this.right=e;break;case"ArrowUp":this.up=e;break;case"ArrowDown":this.down=e;break;default:return}}}},function(t,e,i){"use strict";Object.defineProperty(e,"__esModule",{value:!0}),e.CreatureStorage=void 0;const n=i(10),s=i(15),r=i(0),o=i(19);e.CreatureStorage=class{constructor(t){this.inputHandler=t,this.nextId=0,this.creatures=new Map,this.bucketMap=[],this.bucketColumns=1,this.bucketRows=1,this.bucketSize=100,this.update()}update(){this.resetBucketMap(),this.creatures.forEach(t=>{const e=Math.min(Math.floor(t.position.x/this.bucketSize),this.bucketColumns-1),i=Math.min(Math.floor(t.position.y/this.bucketSize),this.bucketRows-1);this.bucketMap[e][i].push(t)})}addHunter(t){const e=new n.Hunter(this.nextId,this,t);return this.creatures.set(this.nextId,e),this.nextId++,e}addBoid(t){const e=new s.Boid(this.nextId,this,t);return this.creatures.set(this.nextId,e),this.nextId++,e}addPlayerFish(){const t=new o.default(this.inputHandler);return this.creatures.set(this.nextId,t),this.nextId++,t}getAllHunters(){return[...this.creatures.values()].filter(t=>t instanceof n.Hunter)}getAllBoids(){return[...this.creatures.values()].filter(t=>t instanceof s.Boid)}getAllCreatures(){return[...this.creatures.values()]}getHuntersInArea(t,e){return this.getCreaturesInArea(t,e).filter(i=>i instanceof n.Hunter&&i.position.distance(t)<e)}getBoidsInArea(t,e){return this.getCreaturesInArea(t,e).filter(i=>i instanceof s.Boid&&i.position.distance(t)<e)}getBoidsOrPlayersInArea(t,e){return this.getCreaturesInArea(t,e).filter(i=>(i instanceof s.Boid||i instanceof o.default)&&i.position.distance(t)<e)}getCreaturesInArea(t,e){const i=Math.floor(t.x/this.bucketSize),n=Math.floor(t.y/this.bucketSize),s=Math.ceil(e/this.bucketSize),r=(i-s+this.bucketColumns)%this.bucketColumns,o=(i+s+1)%this.bucketColumns,a=(n-s+this.bucketRows)%this.bucketRows,c=(n+s+1)%this.bucketRows;let u=[];for(let t=r;t!==o;t++,t%=this.bucketColumns)for(let e=a;e!==c;e++,e%=this.bucketRows)u=u.concat(this.bucketMap[t][e]);return u}getHunterCount(){return this.getAllHunters().length}getBoidCount(){return this.getAllBoids().length}remove(t){this.creatures.delete(t)}resetBucketMap(){this.bucketMap=[],this.bucketColumns=Math.ceil(r.config.screen.maxX/this.bucketSize),this.bucketRows=Math.ceil(r.config.screen.maxY/this.bucketSize);for(let t=0;t<this.bucketColumns;t++){const t=[];for(let e=0;e<this.bucketRows;e++)t.push([]);this.bucketMap.push(t)}}}},function(t,e,i){"use strict";Object.defineProperty(e,"__esModule",{value:!0}),e.Hunter=void 0;const n=i(0),s=i(1),r=i(2),o=i(11);let a=(()=>{class t extends r.Creature{constructor(e=0,i,r){super(),this.id=e,this.creatureStorage=i,this.colour=n.config.hunter.defaultColour,this.maxSpeed=n.config.hunter.maxSpeed,this.minSpeed=n.config.hunter.minSpeed,this.size=n.config.hunter.size,this.heading=0,this.speed=0,this.history=[],this.position=r||new s.Vector2(Math.random()*n.config.screen.maxX,Math.random()*n.config.screen.maxY);for(let t=0;t<n.config.creature.maxHistory;t++)this.history.push(this.position);this.initializeVelocity(),this.net=new o.Net(t.netSizeSchema)}initializeVelocity(){this.heading=2*Math.random()*Math.PI,this.speed=n.config.hunter.minSpeed}update(){this.eat(),this.move(),this.updateHistory()}eat(){this.creatureStorage.getBoidsInArea(this.position,n.config.hunter.eatRadius).forEach(t=>t.die())}move(){this.updateHistory(),this.position=this.position.add(this.velocity()).normalize();const t=this.getNeuralNetInputVector(),e=this.net.processInput(t);this.parseOutputToAction(e)}getNeuralNetInputVector(){const t=this.creatureStorage.getAllBoids().sort((t,e)=>t.distanceToCreature(this)-e.distanceToCreature(this))[0],e=this.position.vectorTo(t.position);return[this.velocity().angleTo(e)/(2*Math.PI)+.5]}parseOutputToAction(t){const e=t[0],i=this.heading-n.config.creature.turningMax,s=2*n.config.creature.turningMax;this.heading=i+e*s;const r=t[1],o=this.speed-n.config.creature.acceleration+2*n.config.creature.acceleration*r;this.speed=Math.min(Math.max(o,0),n.config.hunter.maxSpeed)}}return t.netSizeSchema=[1,3,2],t})();e.Hunter=a},function(t,e,i){"use strict";Object.defineProperty(e,"__esModule",{value:!0}),e.Net=void 0;const n=i(12);e.Net=class{constructor(t){const e=new n.Layer(t[0]);this.layers=[e];let i=e;for(let e=1;e<t.length;e++){const s=new n.Layer(t[e]);s.connectPriorLayer(i),this.layers.push(s),i=s}}processInput(t){this.injectInputVectorToInputLayer(t);for(let t=1;t<this.layers.length;t++)this.layers[t].updateValues();return this.layers[this.layers.length-1].outputVector()}injectInputVectorToInputLayer(t){this.layers[0].injectInputVector(t)}}},function(t,e,i){"use strict";Object.defineProperty(e,"__esModule",{value:!0}),e.Layer=void 0;const n=i(13);e.Layer=class{constructor(t){this.neurons=[];for(let e=0;e<t;e++)this.neurons.push(new n.Neuron)}connectPriorLayer(t){this.neurons.forEach(e=>{t.neurons.forEach(t=>{n.Neuron.connectPair(t,e)})})}injectInputVector(t){for(let e=0;e<t.length;e++)this.neurons[e].value=t[e]}updateValues(){this.neurons.forEach(t=>t.updateValue())}outputVector(){return this.neurons.map(t=>t.value)}}},function(t,e,i){"use strict";Object.defineProperty(e,"__esModule",{value:!0}),e.Neuron=void 0;const n=i(14);e.Neuron=class{constructor(){this.inputs=[],this.outputs=[],this.value=0}connectOutput(t){this.outputs.push(t)}connectInput(t){this.inputs.push(t)}static connectPair(t,e){const i=new n.Connection(t,e);t.connectOutput(i),e.connectInput(i)}updateValue(){const t=this.inputs.reduce((t,e)=>t+e.getWeightedOutput(),0)/this.inputs.length;this.value=t<.5?0:1}}},function(t,e,i){"use strict";Object.defineProperty(e,"__esModule",{value:!0}),e.Connection=void 0;e.Connection=class{constructor(t,e,i=2*Math.random()){this.input=t,this.output=e,this.weight=i}getWeightedOutput(){return this.input.value*this.weight}}},function(t,e,i){"use strict";Object.defineProperty(e,"__esModule",{value:!0}),e.Boid=void 0;const n=i(0),s=i(1),r=i(16),o=i(18),a=i(3);class c extends o.BehaviourControlledCreature{constructor(){super(...arguments),this.defaultColour=n.config.boid.defaultColour,this.maxSpeed=n.config.boid.maxSpeed,this.minSpeed=n.config.boid.minSpeed,this.size=n.config.boid.size,this.fearCountdown=0,this.heading=2*Math.PI*Math.random(),this.speed=n.config.boid.maxSpeed,this.behaviours=[new r.Behaviour(()=>this.hunterEvasion(),()=>"red"),new r.Behaviour(()=>this.repulsion(),()=>this.fearCountdown?"red":"orange"),new r.Behaviour(()=>this.alignment(),()=>this.fearCountdown?"red":"blue"),new r.Behaviour(()=>this.attraction(),()=>this.fearCountdown?"red":"green")]}initializeVelocity(){this.heading=2*Math.random()*Math.PI,this.speed=n.config.boid.maxSpeed}update(){this.fearCountdown&&this.fearCountdown--,this.move()}hunterEvasion(){const t=this.creatureStorage.getHuntersInArea(this.position,n.config.boid.visionRadius);if(0===t.length)return new a.default;this.fearCountdown=n.config.boid.fearDuration;const e=this.nearestCreatureToPosition(t).position.vectorTo(this.position);return new a.default(e.scaleToLength(this.maxSpeed),100)}repulsion(){const t=this.creatureStorage.getBoidsOrPlayersInArea(this.position,n.config.boid.repulsionRadius).filter(t=>t!==this);if(0===t.length)return new a.default;const e=t.map(t=>t.position.vectorTo(this.position)).map(t=>new a.default(t,this.repulsionWeightFrom(t))),i=e.reduce((t,e)=>t+e.weight,0);return new a.default(a.default.average(e),i)}repulsionWeightFrom(t){const e=(n.config.boid.repulsionRadius-t.length)/n.config.boid.repulsionRadius;return Math.pow(e,2)*n.config.boid.repulsionRadius}alignment(){const t=this.creatureStorage.getBoidsOrPlayersInArea(this.position,n.config.boid.alignmentRadius).filter(t=>t!==this);if(0===t.length)return new a.default;const e=s.Vector2.average(t.map(t=>t.velocity()));return new a.default(this.fearCountdown?e.scaleToLength(this.maxSpeed):e,15)}attraction(){const t=this.creatureStorage.getBoidsOrPlayersInArea(this.position,n.config.boid.attractionRadius).filter(t=>t!==this);if(0===t.length)return new a.default;const e=this.nearestCreatureToPosition(t);return new a.default(this.position.vectorTo(e.position).scaleToLength(this.fearCountdown?this.maxSpeed:1.1*e.speed),10)}die(){this.creatureStorage.remove(this.id)}}e.Boid=c},function(t,e,i){"use strict";Object.defineProperty(e,"__esModule",{value:!0}),e.Behaviour=void 0;const n=i(17);e.Behaviour=class{constructor(t,e){this.getIdealWeightedHeading=t,this.getColor=e}getCurrentPriority(){const t=this.getIdealWeightedHeading();return t.weight>0?new n.Priority(t,this.getColor()):null}}},function(t,e,i){"use strict";Object.defineProperty(e,"__esModule",{value:!0}),e.Priority=void 0;e.Priority=class{constructor(t,e){this.weightedVector=t,this.color=e}}},function(t,e,i){"use strict";Object.defineProperty(e,"__esModule",{value:!0}),e.BehaviourControlledCreature=void 0;const n=i(0),s=i(1),r=i(2),o=i(3);class a extends r.Creature{constructor(t=0,e,i){super(),this.id=t,this.creatureStorage=e,this.colour="black",this.history=[],this.position=i||new s.Vector2(Math.random()*n.config.screen.maxX,Math.random()*n.config.screen.maxY);for(let t=0;t<n.config.creature.maxHistory;t++)this.history.push(this.position);this.initializeVelocity()}distanceToCreature(t){return this.position.distance(t.position)}move(){this.updateHistory(),this.position=this.position.add(this.velocity()).normalize(),this.updateHeading()}updateHeading(){const t=this.getCurrentPriorities().sort((t,e)=>e.weightedVector.weight-t.weightedVector.weight);0!==t.length?(this.colour=t[0].color,this.updateHeadingTowards(o.default.average(t.map(t=>t.weightedVector)))):this.defaultBehaviour()}getCurrentPriorities(){return this.behaviours.map(t=>t.getCurrentPriority()).filter(t=>t&&t.weightedVector.vector.length&&t.weightedVector.weight)}defaultBehaviour(){this.colour=this.defaultColour,this.speed=Math.max(this.velocity.length-n.config.creature.acceleration,this.minSpeed);const t=2*n.config.creature.turningMax*Math.random()-n.config.creature.turningMax;this.heading=this.heading+t}updateHeadingTowards(t){if(!t)return;let e=Math.max(Math.min(t.length,this.maxSpeed),this.minSpeed);e=Math.max(Math.min(e,this.speed+n.config.creature.acceleration),this.speed-n.config.creature.acceleration),this.speed=e;const i=this.velocity().angleTo(t),s=Math.max(Math.min(i,n.config.creature.turningMax),-n.config.creature.turningMax);this.heading=this.heading+s+2*n.config.creature.headingFuzz*Math.random()-n.config.creature.headingFuzz}nearestCreatureToPosition(t){if(0===t.length)throw new Error("Nearest creature is undefined for zero creatures");return t.reduce((t,e)=>{const i=this.position.vectorTo(e.position).length;return t.distance>i?{distance:i,nearest:e}:t},{distance:this.position.vectorTo(t[0].position).length,nearest:t[0]}).nearest}}e.BehaviourControlledCreature=a},function(t,e,i){"use strict";Object.defineProperty(e,"__esModule",{value:!0});const n=i(1),s=i(2),r=i(0);class o extends s.Creature{constructor(t){super(),this.inputHandler=t,this.colour="black",this.size=6,this.heading=0,this.speed=0,this.history=[],this.position=new n.Vector2(window.innerWidth/2,window.innerHeight/2);for(let t=0;t<r.config.creature.maxHistory;t++)this.history.push(this.position)}update(){this.updateHistory(),this.heading+=this.inputHandler.getHeadingUpdate(),this.speed+=this.inputHandler.getSpeedUpdate(),this.speed=Math.max(Math.min(this.speed,r.config.player.maxSpeed),r.config.player.minSpeed),this.position=this.position.add(this.velocity()).normalize()}}e.default=o}]);
//# sourceMappingURL=data:application/json;charset=utf-8;base64,eyJ2ZXJzaW9uIjozLCJzb3VyY2VzIjpbIndlYnBhY2s6Ly8vd2VicGFjay9ib290c3RyYXAiLCJ3ZWJwYWNrOi8vLy4vc3JjL2NvbmZpZy50cyIsIndlYnBhY2s6Ly8vLi9zcmMvdmVjdG9yMi50cyIsIndlYnBhY2s6Ly8vLi9zcmMvY3JlYXR1cmVzL2NyZWF0dXJlLnRzIiwid2VicGFjazovLy8uL3NyYy93ZWlnaHRlZFZlY3RvcjIudHMiLCJ3ZWJwYWNrOi8vLy4vc3JjL2FwcC50cyIsIndlYnBhY2s6Ly8vLi9zcmMvc2ltdWxhdGlvbk1hbmFnZXIudHMiLCJ3ZWJwYWNrOi8vLy4vc3JjL2NhbnZhcy50cyIsIndlYnBhY2s6Ly8vLi9zcmMvZnBzQ291bnRlci50cyIsIndlYnBhY2s6Ly8vLi9zcmMvaW5wdXRIYW5kbGVyLnRzIiwid2VicGFjazovLy8uL3NyYy9jcmVhdHVyZVN0b3JhZ2UudHMiLCJ3ZWJwYWNrOi8vLy4vc3JjL2NyZWF0dXJlcy9odW50ZXIudHMiLCJ3ZWJwYWNrOi8vLy4vc3JjL25ldXJhbC9uZXQudHMiLCJ3ZWJwYWNrOi8vLy4vc3JjL25ldXJhbC9sYXllci50cyIsIndlYnBhY2s6Ly8vLi9zcmMvbmV1cmFsL25ldXJvbi50cyIsIndlYnBhY2s6Ly8vLi9zcmMvbmV1cmFsL2Nvbm5lY3Rpb24udHMiLCJ3ZWJwYWNrOi8vLy4vc3JjL2NyZWF0dXJlcy9ib2lkLnRzIiwid2VicGFjazovLy8uL3NyYy9jcmVhdHVyZXMvYmVoYXZpb3VyLnRzIiwid2VicGFjazovLy8uL3NyYy9jcmVhdHVyZXMvcHJpb3JpdHkudHMiLCJ3ZWJwYWNrOi8vLy4vc3JjL2NyZWF0dXJlcy9iZWhhdmlvdXJDb250cm9sbGVkQ3JlYXR1cmUudHMiLCJ3ZWJwYWNrOi8vLy4vc3JjL2NyZWF0dXJlcy9wbGF5ZXJGaXNoLnRzIl0sIm5hbWVzIjpbImluc3RhbGxlZE1vZHVsZXMiLCJfX3dlYnBhY2tfcmVxdWlyZV9fIiwibW9kdWxlSWQiLCJleHBvcnRzIiwibW9kdWxlIiwiaSIsImwiLCJtb2R1bGVzIiwiY2FsbCIsIm0iLCJjIiwiZCIsIm5hbWUiLCJnZXR0ZXIiLCJvIiwiT2JqZWN0IiwiZGVmaW5lUHJvcGVydHkiLCJlbnVtZXJhYmxlIiwiZ2V0IiwiciIsIlN5bWJvbCIsInRvU3RyaW5nVGFnIiwidmFsdWUiLCJ0IiwibW9kZSIsIl9fZXNNb2R1bGUiLCJucyIsImNyZWF0ZSIsImtleSIsImJpbmQiLCJuIiwib2JqZWN0IiwicHJvcGVydHkiLCJwcm90b3R5cGUiLCJoYXNPd25Qcm9wZXJ0eSIsInAiLCJzIiwiY29uZmlnIiwiYm9pZCIsImFsaWdubWVudFJhZGl1cyIsImFsaWdubWVudFJhZGl1c0RlZmF1bHQiLCJhdHRyYWN0aW9uUmFkaXVzIiwiYXR0cmFjdGlvblJhZGl1c0RlZmF1bHQiLCJkZWZhdWx0Q29sb3VyIiwiZmVhckR1cmF0aW9uIiwibWF4U3BlZWQiLCJtaW5TcGVlZCIsInF1YW50aXR5IiwicmVwdWxzaW9uUmFkaXVzIiwicmVwdWxzaW9uUmFkaXVzRGVmYXVsdCIsInNpemUiLCJ2aXNpb25SYWRpdXMiLCJjcmVhdHVyZSIsImFjY2VsZXJhdGlvbiIsImhlYWRpbmdGdXp6IiwibWF4SGlzdG9yeSIsInR1cm5pbmdNYXgiLCJodW50ZXIiLCJlYXRSYWRpdXMiLCJwbGF5ZXIiLCJzY3JlZW4iLCJtYXhYIiwibWF4WSIsIlZlY3RvcjIiLCJ4IiwieSIsInRoaXMiLCJsZW5ndGgiLCJNYXRoIiwic3FydCIsInBvdyIsInZlY3RvcnMiLCJyZWR1Y2UiLCJwYXJ0aWFsU3VtIiwiY3VycmVudCIsImFkZCIsInNjYWxlQnlTY2FsYXIiLCJoZWFkaW5nIiwic3BlZWQiLCJjb3MiLCJzaW4iLCJ2IiwidmVjdG9yVG8iLCJ2ZWN0b3IiLCJuZWFyZXN0WCIsIm5lYXJlc3RZIiwicmFkaWFucyIsImF0YW4yIiwic2NhbGUiLCJwb3NpdGlvbiIsImRpc3RhbmNlIiwiaGlzdG9yeSIsInB1c2giLCJzbGljZSIsImZyb21IZWFkaW5nQW5kU3BlZWQiLCJ3ZWlnaHQiLCJ3ZWlnaHRlZFZlY3RvcnMiLCJ3ZWlnaHRlZEF2ZXJhZ2UiLCJwYXJ0aWFsIiwiZG9jdW1lbnQiLCJhZGRFdmVudExpc3RlbmVyIiwiU2ltdWxhdGlvbk1hbmFnZXIiLCJydW5TaW11bGF0aW9uIiwiZnBzVGFyZ2V0IiwiY2FudmFzRWxlbWVudCIsImdldEVsZW1lbnRCeUlkIiwiRXJyb3IiLCJjYW52YXMiLCJDYW52YXMiLCJpbnB1dEhhbmRsZXIiLCJJbnB1dEhhbmRsZXIiLCJjcmVhdGVCb2lkIiwiY3JlYXRlSHVudGVyIiwiY3JlYXR1cmVTdG9yYWdlIiwiQ3JlYXR1cmVTdG9yYWdlIiwiYWRkQm9pZCIsImFkZEh1bnRlciIsInRpY2siLCJwZXJmb3JtYW5jZSIsIm5vdyIsInByZXZpb3VzVGltZSIsImxhZyIsImN1cnJlbnRUaW1lIiwiZWxhcHNlZCIsInVwZGF0ZVNpbXVsYXRpb24iLCJyZW5kZXJTaW11bGF0aW9uIiwic2V0VGltZW91dCIsInVwZGF0ZSIsImdldEFsbEJvaWRzIiwiZ2V0QWxsSHVudGVycyIsImRyYXciLCJnZXRBbGxDcmVhdHVyZXMiLCJ1cGRhdGVIdW50ZXJDb3VudERpc3BsYXkiLCJnZXRIdW50ZXJDb3VudCIsInVwZGF0ZUJvaWRDb3VudERpc3BsYXkiLCJnZXRCb2lkQ291bnQiLCJjb3VudCIsImNvdW50RGlzcGxheSIsInRleHRDb250ZW50IiwiZnBzQ291bnRlciIsIkZwc0NvdW50ZXIiLCJnZXRGcHNDb3VudGVyIiwiY2FtZXJhUG9zaXRpb24iLCJ3aW5kb3ciLCJpbm5lcldpZHRoIiwiaW5uZXJIZWlnaHQiLCJjb250ZXh0IiwiZ2V0Q29udGV4dCIsImN0eCIsImhlaWdodCIsIndpZHRoIiwic2V0U2NyZWVuU2l6ZSIsImNhbGxiYWNrIiwib25jbGljayIsImNyZWF0dXJlcyIsImNsZWFyUmVjdCIsImRyYXdHaG9zdHMiLCJmb3JFYWNoIiwiZHJhd0NyZWF0dXJlIiwiY291bnRGcmFtZSIsInVwZGF0ZUZwcyIsImRyYXdHaG9zdCIsImhpc3RvcnlJbmRleCIsImRyYXdDcmVhdHVyZUJvZHkiLCJkcmF3Q3JlYXR1cmVCZWFrIiwic3VidHJhY3QiLCJub3JtYWxpemUiLCJnZXRQb3NpdGlvbkluQ2FtZXJhU3BhY2UiLCJyYWRpdXMiLCJiZWdpblBhdGgiLCJhcmMiLCJQSSIsImZpbGxTdHlsZSIsImNvbG91ciIsImZpbGwiLCJTRUNPTkQiLCJyZWNlbnRGcmFtZXMiLCJmcHNMYWJlbCIsInN0YXJ0IiwibXVsdGlwbGllciIsImZsb29yIiwiZmlsdGVyIiwiZHJhd1RpbWUiLCJnZXRGUFMiLCJ0b1N0cmluZyIsImxlZnQiLCJyaWdodCIsInVwIiwiZG93biIsInNlcGFyYXRpb25MYWJlbCIsImFsaWdubWVudExhYmVsIiwiY29oZXNpb25MYWJlbCIsImV2ZW50IiwiaGFuZGxlTW91c2VDbGljayIsImhhbmRsZUtleVVwIiwic2V0QXJyb3ciLCJtb3VzZVBvc2l0aW9uIiwiZ2V0UG9zaXRpb25JbldvcmxkU3BhY2UiLCJjbGllbnRYIiwiY2xpZW50WSIsImN0cmxLZXkiLCJtZXRhS2V5Iiwia2V5Q29kZSIsInRvZ2dsZVNlcGFyYXRpb24iLCJ0b2dnbGVBbGlnbm1lbnQiLCJ0b2dnbGVDb2hlc2lvbiIsInN0eWxlIiwiY29sb3IiLCJuZXdTdGF0ZSIsIm5leHRJZCIsIk1hcCIsImJ1Y2tldE1hcCIsImJ1Y2tldENvbHVtbnMiLCJidWNrZXRSb3dzIiwiYnVja2V0U2l6ZSIsInJlc2V0QnVja2V0TWFwIiwiYnVja2V0WCIsIm1pbiIsImJ1Y2tldFkiLCJuZXdIdW50ZXIiLCJIdW50ZXIiLCJzZXQiLCJuZXdCb2lkIiwiQm9pZCIsIm5ld1BsYXllciIsInZhbHVlcyIsImNlbnRlciIsImdldENyZWF0dXJlc0luQXJlYSIsImJ1Y2tldFJhZGl1cyIsImNlaWwiLCJtaW5YIiwibWluWSIsImoiLCJjb25jYXQiLCJjcmVhdHVyZUlkIiwiZGVsZXRlIiwiYnVja2V0Um93IiwiQ3JlYXR1cmUiLCJpZCIsInN1cGVyIiwicmFuZG9tIiwiaW5pdGlhbGl6ZVZlbG9jaXR5IiwibmV0IiwiTmV0IiwibmV0U2l6ZVNjaGVtYSIsImVhdCIsIm1vdmUiLCJ1cGRhdGVIaXN0b3J5IiwiZ2V0Qm9pZHNJbkFyZWEiLCJwcmV5IiwiZGllIiwidmVsb2NpdHkiLCJpbnB1dFZlY3RvciIsImdldE5ldXJhbE5ldElucHV0VmVjdG9yIiwib3V0cHV0VmVjdG9yIiwicHJvY2Vzc0lucHV0IiwicGFyc2VPdXRwdXRUb0FjdGlvbiIsIm5lYXJlc3RCb2lkIiwic29ydCIsImEiLCJiIiwiZGlzdGFuY2VUb0NyZWF0dXJlIiwic2hvcnRlc3RQYXRoIiwiYW5nbGVUbyIsInJvdGF0aW9uRGVjaXNpb24iLCJtYXhpbXVtTGVmdCIsImZ1bGxUdXJuaW5nUmFuZ2UiLCJhY2NlbGVyYXRpb25EZWNpc2lvbiIsInRhcmdldFNwZWVkIiwibWF4IiwibGF5ZXJTaXplcyIsImlucHV0TGF5ZXIiLCJMYXllciIsImxheWVycyIsInByaW9yTGF5ZXIiLCJuZXh0TGF5ZXIiLCJjb25uZWN0UHJpb3JMYXllciIsImluamVjdElucHV0VmVjdG9yVG9JbnB1dExheWVyIiwidXBkYXRlVmFsdWVzIiwiaW5qZWN0SW5wdXRWZWN0b3IiLCJuZXVyb25zIiwiTmV1cm9uIiwibmV1cm9uIiwicHJpb3JOZXVyb24iLCJjb25uZWN0UGFpciIsInVwZGF0ZVZhbHVlIiwibWFwIiwiaW5wdXRzIiwib3V0cHV0cyIsImNvbm5lY3Rpb24iLCJwcmlvciIsIm5leHQiLCJDb25uZWN0aW9uIiwiY29ubmVjdE91dHB1dCIsImNvbm5lY3RJbnB1dCIsImF2ZXJhZ2VJbnB1dCIsInByZXYiLCJjdXJyIiwiZ2V0V2VpZ2h0ZWRPdXRwdXQiLCJpbnB1dCIsIm91dHB1dCIsIkJlaGF2aW91ckNvbnRyb2xsZWRDcmVhdHVyZSIsImZlYXJDb3VudGRvd24iLCJiZWhhdmlvdXJzIiwiQmVoYXZpb3VyIiwiaHVudGVyRXZhc2lvbiIsInJlcHVsc2lvbiIsImFsaWdubWVudCIsImF0dHJhY3Rpb24iLCJodW50ZXJzSW5TaWdodCIsImdldEh1bnRlcnNJbkFyZWEiLCJ2ZWN0b3JUb01lIiwibmVhcmVzdENyZWF0dXJlVG9Qb3NpdGlvbiIsInNjYWxlVG9MZW5ndGgiLCJuZWlnaGJvdXJzIiwiZ2V0Qm9pZHNPclBsYXllcnNJbkFyZWEiLCJyZXB1bHNpb25WZWN0b3JzIiwicmVwdWxzaW9uV2VpZ2h0RnJvbSIsInRvdGFsV2VpZ2h0IiwicGFydGlhbFdlaWdodCIsImF2ZXJhZ2UiLCJub3JtYWxpemVkSW50cnVzaW9uIiwiYXZlcmFnZUFsaWdubWVudFZlY3RvciIsIm5lYXJlc3ROZWlnaGJvdXIiLCJyZW1vdmUiLCJnZXRJZGVhbFdlaWdodGVkSGVhZGluZyIsImdldENvbG9yIiwid2VpZ2h0ZWRIZWFkaW5nIiwiUHJpb3JpdHkiLCJ3ZWlnaHRlZFZlY3RvciIsInVwZGF0ZUhlYWRpbmciLCJwcmlvcml0aWVzIiwiZ2V0Q3VycmVudFByaW9yaXRpZXMiLCJ1cGRhdGVIZWFkaW5nVG93YXJkcyIsInByaW9yaXR5IiwiZGVmYXVsdEJlaGF2aW91ciIsImJlaGF2aW91ciIsImdldEN1cnJlbnRQcmlvcml0eSIsInJhbmRvbVR1cm4iLCJsaW1pdGVkU3BlZWQiLCJpZGVhbFR1cm4iLCJsaW1pdGVkVHVybiIsInByZXZpb3VzIiwiY3VycmVudERpc3RhbmNlIiwibmVhcmVzdCIsIlBsYXllckZpc2giLCJnZXRIZWFkaW5nVXBkYXRlIiwiZ2V0U3BlZWRVcGRhdGUiXSwibWFwcGluZ3MiOiJhQUNFLElBQUlBLEVBQW1CLEdBR3ZCLFNBQVNDLEVBQW9CQyxHQUc1QixHQUFHRixFQUFpQkUsR0FDbkIsT0FBT0YsRUFBaUJFLEdBQVVDLFFBR25DLElBQUlDLEVBQVNKLEVBQWlCRSxHQUFZLENBQ3pDRyxFQUFHSCxFQUNISSxHQUFHLEVBQ0hILFFBQVMsSUFVVixPQU5BSSxFQUFRTCxHQUFVTSxLQUFLSixFQUFPRCxRQUFTQyxFQUFRQSxFQUFPRCxRQUFTRixHQUcvREcsRUFBT0UsR0FBSSxFQUdKRixFQUFPRCxRQUtmRixFQUFvQlEsRUFBSUYsRUFHeEJOLEVBQW9CUyxFQUFJVixFQUd4QkMsRUFBb0JV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LFlBQVlyRixhQWpDNUIiLCJmaWxlIjoiYnVuZGxlLmpzIiwic291cmNlc0NvbnRlbnQiOlsiIFx0Ly8gVGhlIG1vZHVsZSBjYWNoZVxuIFx0dmFyIGluc3RhbGxlZE1vZHVsZXMgPSB7fTtcblxuIFx0Ly8gVGhlIHJlcXVpcmUgZnVuY3Rpb25cbiBcdGZ1bmN0aW9uIF9fd2VicGFja19yZXF1aXJlX18obW9kdWxlSWQpIHtcblxuIFx0XHQvLyBDaGVjayBpZiBtb2R1bGUgaXMgaW4gY2FjaGVcbiBcdFx0aWYoaW5zdGFsbGVkTW9kdWxlc1ttb2R1bGVJZF0pIHtcbiBcdFx0XHRyZXR1cm4gaW5zdGFsbGVkTW9kdWxlc1ttb2R1bGVJZF0uZXhwb3J0cztcbiBcdFx0fVxuIFx0XHQvLyBDcmVhdGUgYSBuZXcgbW9kdWxlIChhbmQgcHV0IGl0IGludG8gdGhlIGNhY2hlKVxuIFx0XHR2YXIgbW9kdWxlID0gaW5zdGFsbGVkTW9kdWxlc1ttb2R1bGVJZF0gPSB7XG4gXHRcdFx0aTogbW9kdWxlSWQsXG4gXHRcdFx0bDogZmFsc2UsXG4gXHRcdFx0ZXhwb3J0czoge31cbiBcdFx0fTtcblxuIFx0XHQvLyBFeGVjdXRlIHRoZSBtb2R1bGUgZnVuY3Rpb25cbiBcdFx0bW9kdWxlc1ttb2R1bGVJZF0uY2FsbChtb2R1bGUuZXhwb3J0cywgbW9kdWxlLCBtb2R1bGUuZXhwb3J0cywgX193ZWJwYWNrX3JlcXVpcmVfXyk7XG5cbiBcdFx0Ly8gRmxhZyB0aGUgbW9kdWxlIGFzIGxvYWRlZFxuIFx0XHRtb2R1bGUubCA9IHRydWU7XG5cbiBcdFx0Ly8gUmV0dXJuIHRoZSBleHBvcnRzIG9mIHRoZSBtb2R1bGVcbiBcdFx0cmV0dXJuIG1vZHVsZS5leHBvcnRzO1xuIFx0fVxuXG5cbiBcdC8vIGV4cG9zZSB0aGUgbW9kdWxlcyBvYmplY3QgKF9fd2VicGFja19tb2R1bGVzX18pXG4gXHRfX3dlYnBhY2tfcmVxdWlyZV9fLm0gPSBtb2R1bGVzO1xuXG4gXHQvLyBleHBvc2UgdGhlIG1vZHVsZSBjYWNoZVxuIFx0X193ZWJwYWNrX3JlcXVpcmVfXy5jID0gaW5zdGFsbGVkTW9kdWxlcztcblxuIFx0Ly8gZGVmaW5lIGdldHRlciBmdW5jdGlvbiBmb3IgaGFybW9ueSBleHBvcnRzXG4gXHRfX3dlYnBhY2tfcmVxdWlyZV9fLmQgPSBmdW5jdGlvbihleHBvcnRzLCBuYW1lLCBnZXR0ZXIpIHtcbiBcdFx0aWYoIV9fd2VicGFja19yZXF1aXJlX18ubyhleHBvcnRzLCBuYW1lKSkge1xuIFx0XHRcdE9iamVjdC5kZWZpbmVQcm9wZXJ0eShleHBvcnRzLCBuYW1lLCB7IGVudW1lcmFibGU6IHRydWUsIGdldDogZ2V0dGVyIH0pO1xuIFx0XHR9XG4gXHR9O1xuXG4gXHQvLyBkZWZpbmUgX19lc01vZHVsZSBvbiBleHBvcnRzXG4gXHRfX3dlYnBhY2tfcmVxdWlyZV9fLnIgPSBmdW5jdGlvbihleHBvcnRzKSB7XG4gXHRcdGlmKHR5cGVvZiBTeW1ib2wgIT09ICd1bmRlZmluZWQnICYmIFN5bWJvbC50b1N0cmluZ1RhZykge1xuIFx0XHRcdE9iamVjdC5kZWZpbmVQcm9wZXJ0eShleHBvcnRzLCBTeW1ib2wudG9TdHJpbmdUYWcsIHsgdmFsdWU6ICdNb2R1bGUnIH0pO1xuIFx0XHR9XG4gXHRcdE9iamVjdC5kZWZpbmVQcm9wZXJ0eShleHBvcnRzLCAnX19lc01vZHVsZScsIHsgdmFsdWU6IHRydWUgfSk7XG4gXHR9O1xuXG4gXHQvLyBjcmVhdGUgYSBmYWtlIG5hbWVzcGFjZSBvYmplY3RcbiBcdC8vIG1vZGUgJiAxOiB2YWx1ZSBpcyBhIG1vZHVsZSBpZCwgcmVxdWlyZSBpdFxuIFx0Ly8gbW9kZSAmIDI6IG1lcmdlIGFsbCBwcm9wZXJ0aWVzIG9mIHZhbHVlIGludG8gdGhlIG5zXG4gXHQvLyBtb2RlICYgNDogcmV0dXJuIHZhbHVlIHdoZW4gYWxyZWFkeSBucyBvYmplY3RcbiBcdC8vIG1vZGUgJiA4fDE6IGJlaGF2ZSBsaWtlIHJlcXVpcmVcbiBcdF9fd2VicGFja19yZXF1aXJlX18udCA9IGZ1bmN0aW9uKHZhbHVlLCBtb2RlKSB7XG4gXHRcdGlmKG1vZGUgJiAxKSB2YWx1ZSA9IF9fd2VicGFja19yZXF1aXJlX18odmFsdWUpO1xuIFx0XHRpZihtb2RlICYgOCkgcmV0dXJuIHZhbHVlO1xuIFx0XHRpZigobW9kZSAmIDQpICYmIHR5cGVvZiB2YWx1ZSA9PT0gJ29iamVjdCcgJiYgdmFsdWUgJiYgdmFsdWUuX19lc01vZHVsZSkgcmV0dXJuIHZhbHVlO1xuIFx0XHR2YXIgbnMgPSBPYmplY3QuY3JlYXRlKG51bGwpO1xuIFx0XHRfX3dlYnBhY2tfcmVxdWlyZV9fLnIobnMpO1xuIFx0XHRPYmplY3QuZGVmaW5lUHJvcGVydHkobnMsICdkZWZhdWx0JywgeyBlbnVtZXJhYmxlOiB0cnVlLCB2YWx1ZTogdmFsdWUgfSk7XG4gXHRcdGlmKG1vZGUgJiAyICYmIHR5cGVvZiB2YWx1ZSAhPSAnc3RyaW5nJykgZm9yKHZhciBrZXkgaW4gdmFsdWUpIF9fd2VicGFja19yZXF1aXJlX18uZChucywga2V5LCBmdW5jdGlvbihrZXkpIHsgcmV0dXJuIHZhbHVlW2tleV07IH0uYmluZChudWxsLCBrZXkpKTtcbiBcdFx0cmV0dXJuIG5zO1xuIFx0fTtcblxuIFx0Ly8gZ2V0RGVmYXVsdEV4cG9ydCBmdW5jdGlvbiBmb3IgY29tcGF0aWJpbGl0eSB3aXRoIG5vbi1oYXJtb255IG1vZHVsZXNcbiBcdF9fd2VicGFja19yZXF1aXJlX18ubiA9IGZ1bmN0aW9uKG1vZHVsZSkge1xuIFx0XHR2YXIgZ2V0dGVyID0gbW9kdWxlICYmIG1vZHVsZS5fX2VzTW9kdWxlID9cbiBcdFx0XHRmdW5jdGlvbiBnZXREZWZhdWx0KCkgeyByZXR1cm4gbW9kdWxlWydkZWZhdWx0J107IH0gOlxuIFx0XHRcdGZ1bmN0aW9uIGdldE1vZHVsZUV4cG9ydHMoKSB7IHJldHVybiBtb2R1bGU7IH07XG4gXHRcdF9fd2VicGFja19yZXF1aXJlX18uZChnZXR0ZXIsICdhJywgZ2V0dGVyKTtcbiBcdFx0cmV0dXJuIGdldHRlcjtcbiBcdH07XG5cbiBcdC8vIE9iamVjdC5wcm90b3R5cGUuaGFzT3duUHJvcGVydHkuY2FsbFxuIFx0X193ZWJwYWNrX3JlcXVpcmVfXy5vID0gZnVuY3Rpb24ob2JqZWN0LCBwcm9wZXJ0eSkgeyByZXR1cm4gT2JqZWN0LnByb3RvdHlwZS5oYXNPd25Qcm9wZXJ0eS5jYWxsKG9iamVjdCwgcHJvcGVydHkpOyB9O1xuXG4gXHQvLyBfX3dlYnBhY2tfcHVibGljX3BhdGhfX1xuIFx0X193ZWJwYWNrX3JlcXVpcmVfXy5wID0gXCJcIjtcblxuXG4gXHQvLyBMb2FkIGVudHJ5IG1vZHVsZSBhbmQgcmV0dXJuIGV4cG9ydHNcbiBcdHJldHVybiBfX3dlYnBhY2tfcmVxdWlyZV9fKF9fd2VicGFja19yZXF1aXJlX18ucyA9IDQpO1xuIiwiZXhwb3J0IGNvbnN0IGNvbmZpZyA9IHtcclxuICBib2lkOiB7XHJcbiAgICBhbGlnbm1lbnRSYWRpdXM6IDQwLFxyXG4gICAgYWxpZ25tZW50UmFkaXVzRGVmYXVsdDogNDAsXHJcbiAgICBhdHRyYWN0aW9uUmFkaXVzOiAyMDAsXHJcbiAgICBhdHRyYWN0aW9uUmFkaXVzRGVmYXVsdDogMjAwLFxyXG4gICAgZGVmYXVsdENvbG91cjogXCJMaWdodFN0ZWVsQmx1ZVwiLFxyXG4gICAgZmVhckR1cmF0aW9uOiAzMCxcclxuICAgIG1heFNwZWVkOiA2LFxyXG4gICAgbWluU3BlZWQ6IDMsXHJcbiAgICBxdWFudGl0eTogMTAwLFxyXG4gICAgcmVwdWxzaW9uUmFkaXVzOiAzMCxcclxuICAgIHJlcHVsc2lvblJhZGl1c0RlZmF1bHQ6IDMwLFxyXG4gICAgc2l6ZTogNCxcclxuICAgIHZpc2lvblJhZGl1czogMjAwLFxyXG4gIH0sXHJcbiAgY3JlYXR1cmU6IHtcclxuICAgIGFjY2VsZXJhdGlvbjogMC4yLFxyXG4gICAgaGVhZGluZ0Z1eno6IDAuMDUsXHJcbiAgICBtYXhIaXN0b3J5OiA1LFxyXG4gICAgdHVybmluZ01heDogMC4yLCAvLyByYWRpYW5zXHJcbiAgfSxcclxuICBodW50ZXI6IHtcclxuICAgIGRlZmF1bHRDb2xvdXI6IFwicGlua1wiLFxyXG4gICAgZWF0UmFkaXVzOiAyMCxcclxuICAgIG1heFNwZWVkOiA1LFxyXG4gICAgbWluU3BlZWQ6IDAsXHJcbiAgICBxdWFudGl0eTogMSxcclxuICAgIHNpemU6IDgsXHJcbiAgICB2aXNpb25SYWRpdXM6IDkwLFxyXG4gIH0sXHJcbiAgcGxheWVyOiB7XHJcbiAgICBtYXhTcGVlZDogNjQsXHJcbiAgICBtaW5TcGVlZDogMCxcclxuICB9LFxyXG4gIHNjcmVlbjoge1xyXG4gICAgLy8gbWF4WCBhbmQgbWF4WSBhcmUgb3ZlcndyaXR0ZW4gYXQgcnVuIHRpbWVcclxuICAgIC8vIGFjY29yZGluZyB0byBhY3R1YWwgc2NyZWVuIHNpemVcclxuICAgIG1heFg6IDEwMDAsXHJcbiAgICBtYXhZOiAxMDAwLFxyXG4gIH0sXHJcbn07XHJcbiIsImltcG9ydCB7IGNvbmZpZyB9IGZyb20gXCIuL2NvbmZpZ1wiO1xyXG5cclxuZXhwb3J0IGNsYXNzIFZlY3RvcjIge1xyXG4gIHB1YmxpYyBzdGF0aWMgYXZlcmFnZSh2ZWN0b3JzOiBWZWN0b3IyW10pOiBWZWN0b3IyIHtcclxuICAgIGlmICh2ZWN0b3JzLmxlbmd0aCA9PT0gMCkge1xyXG4gICAgICByZXR1cm4gbmV3IFZlY3RvcjIoKTtcclxuICAgIH1cclxuICAgIGNvbnN0IHRvdGFsVmVjdG9yID0gdmVjdG9ycy5yZWR1Y2UoKHBhcnRpYWxTdW0sIGN1cnJlbnQpID0+IHtcclxuICAgICAgcmV0dXJuIHBhcnRpYWxTdW0uYWRkKGN1cnJlbnQpO1xyXG4gICAgfSk7XHJcblxyXG4gICAgcmV0dXJuIHRvdGFsVmVjdG9yLnNjYWxlQnlTY2FsYXIoMSAvIHZlY3RvcnMubGVuZ3RoKTtcclxuICB9XHJcblxyXG4gIHB1YmxpYyBzdGF0aWMgZnJvbUhlYWRpbmdBbmRTcGVlZChoZWFkaW5nOiBudW1iZXIsIHNwZWVkOiBudW1iZXIpOiBWZWN0b3IyIHtcclxuICAgIGlmICghc3BlZWQpIHtcclxuICAgICAgcmV0dXJuIG5ldyBWZWN0b3IyKDAsIDApO1xyXG4gICAgfVxyXG4gICAgcmV0dXJuIG5ldyBWZWN0b3IyKFxyXG4gICAgICBzcGVlZCAqIE1hdGguY29zKGhlYWRpbmcpLFxyXG4gICAgICBzcGVlZCAqIE1hdGguc2luKGhlYWRpbmcpLFxyXG4gICAgKTtcclxuICB9XHJcblxyXG4gIHB1YmxpYyB4OiBudW1iZXI7XHJcbiAgcHVibGljIHk6IG51bWJlcjtcclxuICBwdWJsaWMgbGVuZ3RoOiBudW1iZXI7XHJcbiAgY29uc3RydWN0b3IoeCA9IDAsIHkgPSAwKSB7XHJcbiAgICB0aGlzLnggPSB4ICUgY29uZmlnLnNjcmVlbi5tYXhYO1xyXG4gICAgdGhpcy55ID0geSAlIGNvbmZpZy5zY3JlZW4ubWF4WTtcclxuICAgIHRoaXMubGVuZ3RoID0gTWF0aC5zcXJ0KE1hdGgucG93KHRoaXMueCwgMikgKyBNYXRoLnBvdyh0aGlzLnksIDIpKTtcclxuICB9XHJcblxyXG4gIHB1YmxpYyB1bml0VmVjdG9yKCk6IFZlY3RvcjIge1xyXG4gICAgcmV0dXJuIHRoaXMuc2NhbGVCeVNjYWxhcigxIC8gdGhpcy5sZW5ndGgpO1xyXG4gIH1cclxuXHJcbiAgcHVibGljIGRpc3RhbmNlKHY6IFZlY3RvcjIpOiBudW1iZXIge1xyXG4gICAgcmV0dXJuIHRoaXMudmVjdG9yVG8odikubGVuZ3RoO1xyXG4gIH1cclxuXHJcbiAgcHVibGljIHZlY3RvclRvKHZlY3RvcjogVmVjdG9yMik6IFZlY3RvcjIge1xyXG4gICAgbGV0IG5lYXJlc3RYID0gKHZlY3Rvci54IC0gdGhpcy54KSAlIGNvbmZpZy5zY3JlZW4ubWF4WDtcclxuICAgIGlmIChuZWFyZXN0WCA+IChjb25maWcuc2NyZWVuLm1heFggLyAyKSkge1xyXG4gICAgICBuZWFyZXN0WCAtPSBjb25maWcuc2NyZWVuLm1heFg7XHJcbiAgICB9XHJcbiAgICBpZiAobmVhcmVzdFggPCAtKGNvbmZpZy5zY3JlZW4ubWF4WCAvIDIpKSB7XHJcbiAgICAgIG5lYXJlc3RYICs9IGNvbmZpZy5zY3JlZW4ubWF4WDtcclxuICAgIH1cclxuICAgIGxldCBuZWFyZXN0WSA9ICh2ZWN0b3IueSAtIHRoaXMueSkgJSBjb25maWcuc2NyZWVuLm1heFk7XHJcbiAgICBpZiAobmVhcmVzdFkgPiAoY29uZmlnLnNjcmVlbi5tYXhZIC8gMikpIHtcclxuICAgICAgbmVhcmVzdFkgLT0gY29uZmlnLnNjcmVlbi5tYXhZO1xyXG4gICAgfVxyXG4gICAgaWYgKG5lYXJlc3RZIDwgLShjb25maWcuc2NyZWVuLm1heFkgLyAyKSkge1xyXG4gICAgICBuZWFyZXN0WSArPSBjb25maWcuc2NyZWVuLm1heFk7XHJcbiAgICB9XHJcbiAgICByZXR1cm4gbmV3IFZlY3RvcjIobmVhcmVzdFgsIG5lYXJlc3RZKTtcclxuICB9XHJcblxyXG4gIHB1YmxpYyByb3RhdGUocmFkaWFuczogbnVtYmVyKTogVmVjdG9yMiB7XHJcbiAgICByZXR1cm4gbmV3IFZlY3RvcjIoXHJcbiAgICAgIHRoaXMueCAqIE1hdGguY29zKHJhZGlhbnMpIC0gdGhpcy55ICogTWF0aC5zaW4ocmFkaWFucyksXHJcbiAgICAgIHRoaXMueCAqIE1hdGguc2luKHJhZGlhbnMpICsgdGhpcy55ICogTWF0aC5jb3MocmFkaWFucyksXHJcbiAgICApO1xyXG4gIH1cclxuXHJcbiAgLy8gTWVhc3VyZXMgYW50aSBjbG9ja3dpc2UgZnJvbSAtUEkgdG8gUElcclxuICBwdWJsaWMgYW5nbGVUbyh2OiBWZWN0b3IyKTogbnVtYmVyIHtcclxuICAgIHJldHVybiBNYXRoLmF0YW4yKFxyXG4gICAgICB0aGlzLnggKiB2LnkgLSB0aGlzLnkgKiB2LngsXHJcbiAgICAgIHRoaXMueCAqIHYueCArIHRoaXMueSAqIHYueSxcclxuICAgICk7XHJcbiAgfVxyXG5cclxuICBwdWJsaWMgYWRkKHY6IFZlY3RvcjIpOiBWZWN0b3IyIHtcclxuICAgIHJldHVybiBuZXcgVmVjdG9yMih0aGlzLnggKyB2LngsIHRoaXMueSArIHYueSk7XHJcbiAgfVxyXG5cclxuICBwdWJsaWMgc3VidHJhY3QodjogVmVjdG9yMik6IFZlY3RvcjIge1xyXG4gICAgcmV0dXJuIG5ldyBWZWN0b3IyKHRoaXMueCAtIHYueCwgdGhpcy55IC0gdi55KTtcclxuICB9XHJcblxyXG4gIHB1YmxpYyBlcXVhbHModjogVmVjdG9yMik6IGJvb2xlYW4ge1xyXG4gICAgcmV0dXJuIHRoaXMueCA9PT0gdi54ICYmIHRoaXMueSA9PT0gdi55O1xyXG4gIH1cclxuXHJcbiAgcHVibGljIHNjYWxlQnlTY2FsYXIoc2NhbGU6IG51bWJlcik6IFZlY3RvcjIge1xyXG4gICAgcmV0dXJuIG5ldyBWZWN0b3IyKHRoaXMueCAqIHNjYWxlLCB0aGlzLnkgKiBzY2FsZSk7XHJcbiAgfVxyXG5cclxuICBwdWJsaWMgc2NhbGVUb0xlbmd0aChsZW5ndGg6IG51bWJlcik6IFZlY3RvcjIge1xyXG4gICAgcmV0dXJuIHRoaXMubGVuZ3RoID9cclxuICAgICAgdGhpcy5zY2FsZUJ5U2NhbGFyKGxlbmd0aCAvIHRoaXMubGVuZ3RoKSA6XHJcbiAgICAgIHRoaXM7XHJcbiAgfVxyXG5cclxuICBwdWJsaWMgaXNQYXJhbGxlbFRvKHY6IFZlY3RvcjIpOiBib29sZWFuIHtcclxuICAgIHJldHVybiB0aGlzLnggKiB2LnkgPT09IHRoaXMueSAqIHYueDtcclxuICB9XHJcblxyXG4gIHB1YmxpYyBub3JtYWxpemUoKTogVmVjdG9yMiB7XHJcbiAgICBpZiAoMCA8PSB0aGlzLnggJiZcclxuICAgICAgMCA8PSB0aGlzLnkpIHtcclxuICAgICAgcmV0dXJuIHRoaXM7XHJcbiAgICB9XHJcbiAgICByZXR1cm4gbmV3IFZlY3RvcjIoXHJcbiAgICAgICgodGhpcy54ICUgY29uZmlnLnNjcmVlbi5tYXhYKSArIGNvbmZpZy5zY3JlZW4ubWF4WCkgJSBjb25maWcuc2NyZWVuLm1heFgsXHJcbiAgICAgICgodGhpcy55ICUgY29uZmlnLnNjcmVlbi5tYXhZKSArIGNvbmZpZy5zY3JlZW4ubWF4WSkgJSBjb25maWcuc2NyZWVuLm1heFksXHJcbiAgICApO1xyXG4gIH1cclxuXHJcbiAgcHVibGljIHRvSGVhZGluZygpOiBudW1iZXIge1xyXG4gICAgcmV0dXJuIE1hdGguYXRhbjIodGhpcy55LCB0aGlzLngpO1xyXG4gIH1cclxuXHJcbiAgcHVibGljIHRvU3RyaW5nKCk6IHN0cmluZyB7XHJcbiAgICByZXR1cm4gYFske3RoaXMueH0sICR7dGhpcy55fV1gO1xyXG4gIH1cclxufVxyXG4iLCJpbXBvcnQgeyBWZWN0b3IyIH0gZnJvbSBcIi4uL3ZlY3RvcjJcIjtcclxuXHJcbmV4cG9ydCBhYnN0cmFjdCBjbGFzcyBDcmVhdHVyZSB7XHJcbiAgcHVibGljIGFic3RyYWN0IHBvc2l0aW9uOiBWZWN0b3IyO1xyXG4gIHB1YmxpYyBhYnN0cmFjdCBoZWFkaW5nOiBudW1iZXI7XHJcbiAgcHVibGljIGFic3RyYWN0IHNwZWVkOiBudW1iZXI7XHJcbiAgcHVibGljIGFic3RyYWN0IGhpc3Rvcnk6IFZlY3RvcjJbXTtcclxuICBwdWJsaWMgYWJzdHJhY3QgY29sb3VyOiBzdHJpbmc7XHJcbiAgcHVibGljIGFic3RyYWN0IHNpemU6IG51bWJlcjtcclxuXHJcbiAgcHVibGljIGRpc3RhbmNlVG9DcmVhdHVyZShjcmVhdHVyZTogQ3JlYXR1cmUpOiBudW1iZXIge1xyXG4gICAgcmV0dXJuIHRoaXMucG9zaXRpb24uZGlzdGFuY2UoY3JlYXR1cmUucG9zaXRpb24pO1xyXG4gIH1cclxuXHJcbiAgcHVibGljIGFic3RyYWN0IHVwZGF0ZSgpOiB2b2lkO1xyXG5cclxuICBwdWJsaWMgdXBkYXRlSGlzdG9yeSgpOiB2b2lkIHtcclxuICAgIHRoaXMuaGlzdG9yeS5wdXNoKHRoaXMucG9zaXRpb24pO1xyXG4gICAgdGhpcy5oaXN0b3J5ID0gdGhpcy5oaXN0b3J5LnNsaWNlKDEpO1xyXG4gIH1cclxuXHJcbiAgcHVibGljIHZlbG9jaXR5KCk6IFZlY3RvcjIge1xyXG4gICAgcmV0dXJuIFZlY3RvcjIuZnJvbUhlYWRpbmdBbmRTcGVlZCh0aGlzLmhlYWRpbmcsIHRoaXMuc3BlZWQpO1xyXG4gIH1cclxufVxyXG4iLCJpbXBvcnQgeyBWZWN0b3IyIH0gZnJvbSBcIi4vdmVjdG9yMlwiO1xyXG5cclxuZXhwb3J0IGRlZmF1bHQgY2xhc3MgV2VpZ2h0ZWRWZWN0b3IyIHtcclxuICBwdWJsaWMgc3RhdGljIGF2ZXJhZ2Uod2VpZ2h0ZWRWZWN0b3JzOiBXZWlnaHRlZFZlY3RvcjJbXSk6IFZlY3RvcjIge1xyXG4gICAgaWYgKHdlaWdodGVkVmVjdG9ycy5sZW5ndGggPT09IDApIHtcclxuICAgICAgcmV0dXJuIG5ldyBWZWN0b3IyKCk7XHJcbiAgICB9XHJcbiAgICBjb25zdCB3ZWlnaHRlZEF2ZXJhZ2UgPSB3ZWlnaHRlZFZlY3RvcnMucmVkdWNlKChwYXJ0aWFsLCBjdXJyZW50KSA9PiB7XHJcbiAgICAgIHJldHVybiB7XHJcbiAgICAgICAgdmVjdG9yOiBwYXJ0aWFsLnZlY3Rvci5hZGQoY3VycmVudC52ZWN0b3Iuc2NhbGVCeVNjYWxhcihjdXJyZW50LndlaWdodCkpLFxyXG4gICAgICAgIHdlaWdodDogcGFydGlhbC53ZWlnaHQgKyBjdXJyZW50LndlaWdodCxcclxuICAgICAgfTtcclxuICAgIH0sIHtcclxuICAgICAgdmVjdG9yOiBuZXcgVmVjdG9yMigpLFxyXG4gICAgICB3ZWlnaHQ6IDAsXHJcbiAgICB9KTtcclxuXHJcbiAgICByZXR1cm4gd2VpZ2h0ZWRBdmVyYWdlLnZlY3Rvci5zY2FsZUJ5U2NhbGFyKDEgLyB3ZWlnaHRlZEF2ZXJhZ2Uud2VpZ2h0KTtcclxuICB9XHJcblxyXG4gIGNvbnN0cnVjdG9yKFxyXG4gICAgcHVibGljIHZlY3RvcjogVmVjdG9yMiA9IG5ldyBWZWN0b3IyKCksXHJcbiAgICBwdWJsaWMgd2VpZ2h0OiBudW1iZXIgPSAwLFxyXG4gICkge31cclxufVxyXG4iLCJpbXBvcnQgeyBTaW11bGF0aW9uTWFuYWdlciB9IGZyb20gXCIuL3NpbXVsYXRpb25NYW5hZ2VyXCI7XHJcblxyXG5kb2N1bWVudC5hZGRFdmVudExpc3RlbmVyKFwiRE9NQ29udGVudExvYWRlZFwiLCAoKSA9PiB7XHJcbiAgbmV3IFNpbXVsYXRpb25NYW5hZ2VyKCkucnVuU2ltdWxhdGlvbigpO1xyXG59LCBmYWxzZSk7XHJcbiIsImltcG9ydCB7IENhbnZhcyB9IGZyb20gXCIuL2NhbnZhc1wiO1xyXG5pbXBvcnQgeyBjb25maWcgfSBmcm9tIFwiLi9jb25maWdcIjtcclxuaW1wb3J0IHsgSW5wdXRIYW5kbGVyIH0gZnJvbSBcIi4vaW5wdXRIYW5kbGVyXCI7XHJcbmltcG9ydCB7IENyZWF0dXJlU3RvcmFnZSB9IGZyb20gXCIuL2NyZWF0dXJlU3RvcmFnZVwiO1xyXG5pbXBvcnQgeyBWZWN0b3IyIH0gZnJvbSBcIi4vdmVjdG9yMlwiO1xyXG5cclxuZXhwb3J0IGNsYXNzIFNpbXVsYXRpb25NYW5hZ2VyIHtcclxuICBwcml2YXRlIGNhbnZhczogQ2FudmFzO1xyXG4gIHByaXZhdGUgaW5wdXRIYW5kbGVyOiBJbnB1dEhhbmRsZXI7XHJcbiAgcHJpdmF0ZSBjcmVhdHVyZVN0b3JhZ2U6IENyZWF0dXJlU3RvcmFnZTtcclxuICBwcml2YXRlIHJlYWRvbmx5IGZwc1RhcmdldCA9IDYwO1xyXG4gIGNvbnN0cnVjdG9yKCkge1xyXG4gICAgY29uc3QgY2FudmFzRWxlbWVudCA9IGRvY3VtZW50LmdldEVsZW1lbnRCeUlkKFwiY2FudmFzXCIpIGFzIEhUTUxDYW52YXNFbGVtZW50O1xyXG4gICAgaWYgKCFjYW52YXNFbGVtZW50KSB7XHJcbiAgICAgIHRocm93IG5ldyBFcnJvcihcImNvdWxkbid0IGZpbmQgJ2NhbnZhcycgb24gZG9jdW1lbnRcIik7XHJcbiAgICB9XHJcbiAgICB0aGlzLmNhbnZhcyA9IG5ldyBDYW52YXMoY2FudmFzRWxlbWVudCk7XHJcbiAgICB0aGlzLmlucHV0SGFuZGxlciA9IG5ldyBJbnB1dEhhbmRsZXIoXHJcbiAgICAgIHRoaXMuY2FudmFzLFxyXG4gICAgICAocG9zaXRpb246IFZlY3RvcjIpID0+IHRoaXMuY3JlYXRlQm9pZChwb3NpdGlvbiksXHJcbiAgICAgIChwb3NpdGlvbjogVmVjdG9yMikgPT4gdGhpcy5jcmVhdGVIdW50ZXIocG9zaXRpb24pLFxyXG4gICAgKTtcclxuXHJcbiAgICB0aGlzLmNyZWF0dXJlU3RvcmFnZSA9IG5ldyBDcmVhdHVyZVN0b3JhZ2UodGhpcy5pbnB1dEhhbmRsZXIpO1xyXG4gICAgZm9yIChsZXQgaSA9IDA7IGkgPCBjb25maWcuYm9pZC5xdWFudGl0eTsgaSsrKSB7XHJcbiAgICAgIHRoaXMuY3JlYXR1cmVTdG9yYWdlLmFkZEJvaWQoKTtcclxuICAgIH1cclxuICAgIGZvciAobGV0IGkgPSAwOyBpIDwgY29uZmlnLmh1bnRlci5xdWFudGl0eTsgaSsrKSB7XHJcbiAgICAgIHRoaXMuY3JlYXR1cmVTdG9yYWdlLmFkZEh1bnRlcigpO1xyXG4gICAgfVxyXG4gIH1cclxuXHJcbiAgcHVibGljIGNyZWF0ZUJvaWQocG9zaXRpb24/OiBWZWN0b3IyKTogdm9pZCB7XHJcbiAgICB0aGlzLmNyZWF0dXJlU3RvcmFnZS5hZGRCb2lkKHBvc2l0aW9uKTtcclxuICB9XHJcblxyXG4gIHB1YmxpYyBjcmVhdGVIdW50ZXIocG9zaXRpb24/OiBWZWN0b3IyKTogdm9pZCB7XHJcbiAgICB0aGlzLmNyZWF0dXJlU3RvcmFnZS5hZGRIdW50ZXIocG9zaXRpb24pO1xyXG4gIH1cclxuXHJcbiAgcHVibGljIHJ1blNpbXVsYXRpb24oKTogdm9pZCB7XHJcbiAgICB0aGlzLnRpY2socGVyZm9ybWFuY2Uubm93KCksIDApO1xyXG4gIH1cclxuXHJcbiAgcHVibGljIHRpY2socHJldmlvdXNUaW1lOiBudW1iZXIsIGxhZzogbnVtYmVyKTogdm9pZCB7XHJcbiAgICBjb25zdCBjdXJyZW50VGltZSA9IHBlcmZvcm1hbmNlLm5vdygpO1xyXG4gICAgY29uc3QgZWxhcHNlZCA9IGN1cnJlbnRUaW1lIC0gcHJldmlvdXNUaW1lO1xyXG4gICAgcHJldmlvdXNUaW1lID0gY3VycmVudFRpbWU7XHJcbiAgICBsYWcgKz0gZWxhcHNlZDtcclxuXHJcbiAgICB3aGlsZSAobGFnID49IDEwMDAgLyB0aGlzLmZwc1RhcmdldCkge1xyXG4gICAgICB0aGlzLnVwZGF0ZVNpbXVsYXRpb24oKTtcclxuICAgICAgbGFnIC09IDEwMDAgLyB0aGlzLmZwc1RhcmdldDtcclxuICAgIH1cclxuXHJcbiAgICB0aGlzLnJlbmRlclNpbXVsYXRpb24oKTtcclxuICAgIHNldFRpbWVvdXQoKCkgPT4gdGhpcy50aWNrKHByZXZpb3VzVGltZSwgbGFnKSwgMCk7XHJcbiAgfVxyXG5cclxuICBwdWJsaWMgdXBkYXRlU2ltdWxhdGlvbigpOiB2b2lkIHtcclxuICAgIHRoaXMuY3JlYXR1cmVTdG9yYWdlLnVwZGF0ZSgpO1xyXG4gICAgZm9yIChjb25zdCBib2lkIG9mIHRoaXMuY3JlYXR1cmVTdG9yYWdlLmdldEFsbEJvaWRzKCkpIHtcclxuICAgICAgYm9pZC51cGRhdGUoKTtcclxuICAgIH1cclxuICAgIGZvciAoY29uc3QgaHVudGVyIG9mIHRoaXMuY3JlYXR1cmVTdG9yYWdlLmdldEFsbEh1bnRlcnMoKSkge1xyXG4gICAgICBodW50ZXIudXBkYXRlKCk7XHJcbiAgICB9XHJcbiAgfVxyXG5cclxuICBwdWJsaWMgcmVuZGVyU2ltdWxhdGlvbigpOiB2b2lkIHtcclxuICAgIHRoaXMuY2FudmFzLmRyYXcoXHJcbiAgICAgIHRoaXMuY3JlYXR1cmVTdG9yYWdlLmdldEFsbENyZWF0dXJlcygpLFxyXG4gICAgKTtcclxuICAgIHRoaXMudXBkYXRlSHVudGVyQ291bnREaXNwbGF5KFxyXG4gICAgICB0aGlzLmNyZWF0dXJlU3RvcmFnZS5nZXRIdW50ZXJDb3VudCgpLFxyXG4gICAgKTtcclxuICAgIHRoaXMudXBkYXRlQm9pZENvdW50RGlzcGxheShcclxuICAgICAgdGhpcy5jcmVhdHVyZVN0b3JhZ2UuZ2V0Qm9pZENvdW50KCksXHJcbiAgICApO1xyXG4gIH1cclxuXHJcbiAgcHJpdmF0ZSB1cGRhdGVIdW50ZXJDb3VudERpc3BsYXkoY291bnQ6IG51bWJlcikge1xyXG4gICAgY29uc3QgY291bnREaXNwbGF5ID0gZG9jdW1lbnQuZ2V0RWxlbWVudEJ5SWQoXCJudW1iZXItb2YtaHVudGVyc1wiKTtcclxuICAgIGlmIChjb3VudERpc3BsYXkpIHtcclxuICAgICAgY291bnREaXNwbGF5LnRleHRDb250ZW50ID0gYCR7Y291bnR9YDtcclxuICAgIH1cclxuICB9XHJcblxyXG4gIHByaXZhdGUgdXBkYXRlQm9pZENvdW50RGlzcGxheShjb3VudDogbnVtYmVyKSB7XHJcbiAgICBjb25zdCBjb3VudERpc3BsYXkgPSBkb2N1bWVudC5nZXRFbGVtZW50QnlJZChcIm51bWJlci1vZi1ib2lkc1wiKTtcclxuICAgIGlmIChjb3VudERpc3BsYXkpIHtcclxuICAgICAgY291bnREaXNwbGF5LnRleHRDb250ZW50ID0gYCR7Y291bnR9YDtcclxuICAgIH1cclxuICB9XHJcbn1cclxuIiwiaW1wb3J0IHsgY29uZmlnIH0gZnJvbSBcIi4vY29uZmlnXCI7XHJcbmltcG9ydCB7IENyZWF0dXJlIH0gZnJvbSBcIi4vY3JlYXR1cmVzL2NyZWF0dXJlXCI7XHJcbmltcG9ydCB7IFZlY3RvcjIgfSBmcm9tIFwiLi92ZWN0b3IyXCI7XHJcbmltcG9ydCB7IEZwc0NvdW50ZXIgfSBmcm9tIFwiLi9mcHNDb3VudGVyXCI7XHJcblxyXG5leHBvcnQgY2xhc3MgQ2FudmFzIHtcclxuICBwcml2YXRlIHJlYWRvbmx5IGZwc0NvdW50ZXI6IEZwc0NvdW50ZXI7XHJcbiAgcHJpdmF0ZSBjYW1lcmFQb3NpdGlvbjogVmVjdG9yMjtcclxuICBwcml2YXRlIGNhbnZhczogSFRNTENhbnZhc0VsZW1lbnQ7XHJcbiAgcHJpdmF0ZSBjdHg6IENhbnZhc1JlbmRlcmluZ0NvbnRleHQyRDtcclxuXHJcbiAgY29uc3RydWN0b3IoY2FudmFzRWxlbWVudDogSFRNTENhbnZhc0VsZW1lbnQpIHtcclxuICAgIHRoaXMuZnBzQ291bnRlciA9IEZwc0NvdW50ZXIuZ2V0RnBzQ291bnRlcigpO1xyXG4gICAgdGhpcy5jYW1lcmFQb3NpdGlvbiA9IG5ldyBWZWN0b3IyKHdpbmRvdy5pbm5lcldpZHRoLCB3aW5kb3cuaW5uZXJIZWlnaHQpO1xyXG4gICAgdGhpcy5jYW52YXMgPSBjYW52YXNFbGVtZW50O1xyXG4gICAgY29uc3QgY29udGV4dCA9IHRoaXMuY2FudmFzLmdldENvbnRleHQoXCIyZFwiKTtcclxuICAgIGlmICghY29udGV4dCkge1xyXG4gICAgICB0aHJvdyBuZXcgRXJyb3IoXCJjb3VsZCBub3QgZ2V0IGNhbnZhcyBjb250ZXh0XCIpO1xyXG4gICAgfSBlbHNlIHtcclxuICAgICAgdGhpcy5jdHggPSBjb250ZXh0O1xyXG4gICAgfVxyXG4gICAgdGhpcy5jYW52YXMuaGVpZ2h0ID0gY29uZmlnLnNjcmVlbi5tYXhZO1xyXG4gICAgdGhpcy5jYW52YXMud2lkdGggPSBjb25maWcuc2NyZWVuLm1heFg7XHJcblxyXG4gICAgdGhpcy5zZXRTY3JlZW5TaXplKCk7XHJcbiAgfVxyXG5cclxuICBwdWJsaWMgb25jbGljayhjYWxsYmFjazogKChldjogTW91c2VFdmVudCkgPT4gdm9pZCkpOiB2b2lkIHtcclxuICAgIHRoaXMuY2FudmFzLm9uY2xpY2sgPSBjYWxsYmFjaztcclxuICB9XHJcblxyXG4gIHB1YmxpYyBzZXRTY3JlZW5TaXplKCk6IHZvaWQge1xyXG4gICAgaWYgKHdpbmRvdykge1xyXG4gICAgICBjb25maWcuc2NyZWVuLm1heFggPSB3aW5kb3cuaW5uZXJXaWR0aDtcclxuICAgICAgY29uZmlnLnNjcmVlbi5tYXhZID0gd2luZG93LmlubmVySGVpZ2h0O1xyXG4gICAgfVxyXG4gICAgdGhpcy5jdHguY2FudmFzLndpZHRoID0gY29uZmlnLnNjcmVlbi5tYXhYO1xyXG4gICAgdGhpcy5jdHguY2FudmFzLmhlaWdodCA9IGNvbmZpZy5zY3JlZW4ubWF4WTtcclxuICB9XHJcblxyXG4gIHB1YmxpYyBkcmF3KFxyXG4gICAgY3JlYXR1cmVzOiBDcmVhdHVyZVtdLFxyXG4gICAgY2FtZXJhUG9zaXRpb246IFZlY3RvcjIgPSBuZXcgVmVjdG9yMih3aW5kb3cuaW5uZXJXaWR0aCAvIDIsIHdpbmRvdy5pbm5lckhlaWdodCAvIDIpLFxyXG4gICk6IHZvaWQge1xyXG4gICAgdGhpcy5jYW1lcmFQb3NpdGlvbiA9IGNhbWVyYVBvc2l0aW9uO1xyXG4gICAgdGhpcy5jdHguY2xlYXJSZWN0KDAsIDAsIHRoaXMuY2FudmFzLndpZHRoLCB0aGlzLmNhbnZhcy5oZWlnaHQpO1xyXG4gICAgdGhpcy5zZXRTY3JlZW5TaXplKCk7XHJcbiAgICB0aGlzLmRyYXdHaG9zdHMoY3JlYXR1cmVzKTtcclxuICAgIGNyZWF0dXJlcy5mb3JFYWNoKChjcmVhdHVyZSkgPT4ge1xyXG4gICAgICB0aGlzLmRyYXdDcmVhdHVyZShjcmVhdHVyZSk7XHJcbiAgICB9KTtcclxuXHJcbiAgICB0aGlzLmZwc0NvdW50ZXIuY291bnRGcmFtZSgpO1xyXG4gICAgdGhpcy5mcHNDb3VudGVyLnVwZGF0ZUZwcygpO1xyXG4gIH1cclxuXHJcbiAgcHVibGljIGRyYXdHaG9zdHMoY3JlYXR1cmVzOiBDcmVhdHVyZVtdKTogdm9pZCB7XHJcbiAgICBpZiAoIWNvbmZpZy5jcmVhdHVyZS5tYXhIaXN0b3J5KSB7XHJcbiAgICAgIHJldHVybjtcclxuICAgIH1cclxuICAgIGZvciAobGV0IGkgPSAwOyBpIDwgY29uZmlnLmNyZWF0dXJlLm1heEhpc3Rvcnk7IGkrKykge1xyXG4gICAgICBjcmVhdHVyZXMuZm9yRWFjaCgoY3JlYXR1cmUpID0+IHtcclxuICAgICAgICB0aGlzLmRyYXdHaG9zdChjcmVhdHVyZSwgaSk7XHJcbiAgICAgIH0pO1xyXG4gICAgfVxyXG4gIH1cclxuXHJcbiAgcHVibGljIGRyYXdHaG9zdChjcmVhdHVyZTogQ3JlYXR1cmUsIGhpc3RvcnlJbmRleDogbnVtYmVyKTogdm9pZCB7XHJcbiAgICB0aGlzLmRyYXdDcmVhdHVyZUJvZHkoY3JlYXR1cmUsIGhpc3RvcnlJbmRleCk7XHJcbiAgfVxyXG5cclxuICBwdWJsaWMgZHJhd0NyZWF0dXJlKGNyZWF0dXJlOiBDcmVhdHVyZSk6IHZvaWQge1xyXG4gICAgdGhpcy5kcmF3Q3JlYXR1cmVCb2R5KGNyZWF0dXJlKTtcclxuICAgIHRoaXMuZHJhd0NyZWF0dXJlQmVhayhjcmVhdHVyZSk7XHJcbiAgfVxyXG5cclxuICBwdWJsaWMgZ2V0UG9zaXRpb25JbkNhbWVyYVNwYWNlKHBvc2l0aW9uOiBWZWN0b3IyKTogVmVjdG9yMiB7XHJcbiAgICByZXR1cm4gcG9zaXRpb25cclxuICAgICAgLmFkZChuZXcgVmVjdG9yMih3aW5kb3cuaW5uZXJXaWR0aCAvIDIsIHdpbmRvdy5pbm5lckhlaWdodCAvIDIpKVxyXG4gICAgICAuc3VidHJhY3QodGhpcy5jYW1lcmFQb3NpdGlvbilcclxuICAgICAgLm5vcm1hbGl6ZSgpO1xyXG4gIH1cclxuXHJcbiAgcHVibGljIGdldFBvc2l0aW9uSW5Xb3JsZFNwYWNlKHBvc2l0aW9uOiBWZWN0b3IyKTogVmVjdG9yMiB7XHJcbiAgICByZXR1cm4gcG9zaXRpb25cclxuICAgICAgLnN1YnRyYWN0KG5ldyBWZWN0b3IyKHdpbmRvdy5pbm5lcldpZHRoIC8gMiwgd2luZG93LmlubmVySGVpZ2h0IC8gMikpXHJcbiAgICAgIC5hZGQodGhpcy5jYW1lcmFQb3NpdGlvbilcclxuICAgICAgLm5vcm1hbGl6ZSgpO1xyXG4gIH1cclxuXHJcbiAgcHVibGljIGRyYXdDcmVhdHVyZUJvZHkoY3JlYXR1cmU6IENyZWF0dXJlLCBoaXN0b3J5SW5kZXg/OiBudW1iZXIpOiB2b2lkIHtcclxuICAgIGxldCBwb3NpdGlvbiA9IGhpc3RvcnlJbmRleCA/IGNyZWF0dXJlLmhpc3RvcnlbaGlzdG9yeUluZGV4XSA6IGNyZWF0dXJlLnBvc2l0aW9uO1xyXG4gICAgcG9zaXRpb24gPSB0aGlzLmdldFBvc2l0aW9uSW5DYW1lcmFTcGFjZShwb3NpdGlvbik7XHJcbiAgICBjb25zdCByYWRpdXMgPSBoaXN0b3J5SW5kZXggP1xyXG4gICAgICBjcmVhdHVyZS5zaXplICogKChoaXN0b3J5SW5kZXggKyAxKSAvIChjb25maWcuY3JlYXR1cmUubWF4SGlzdG9yeSArIDEpKSA6XHJcbiAgICAgIGNyZWF0dXJlLnNpemU7XHJcbiAgICB0aGlzLmN0eC5iZWdpblBhdGgoKTtcclxuICAgIHRoaXMuY3R4LmFyYyhcclxuICAgICAgcG9zaXRpb24ueCxcclxuICAgICAgcG9zaXRpb24ueSxcclxuICAgICAgcmFkaXVzLFxyXG4gICAgICAwLCAyICogTWF0aC5QSSk7XHJcbiAgICB0aGlzLmN0eC5maWxsU3R5bGUgPSBjcmVhdHVyZS5jb2xvdXI7XHJcbiAgICB0aGlzLmN0eC5maWxsKCk7XHJcbiAgfVxyXG5cclxuICBwdWJsaWMgZHJhd0NyZWF0dXJlQmVhayhjcmVhdHVyZTogQ3JlYXR1cmUpOiB2b2lkIHtcclxuICAgIGNvbnN0IHBvc2l0aW9uID0gdGhpcy5nZXRQb3NpdGlvbkluQ2FtZXJhU3BhY2UoY3JlYXR1cmUucG9zaXRpb24pO1xyXG4gICAgdGhpcy5jdHguYmVnaW5QYXRoKCk7XHJcbiAgICB0aGlzLmN0eC5hcmMoXHJcbiAgICAgIHBvc2l0aW9uLnggKyAoY3JlYXR1cmUuc2l6ZSArIDEpICogTWF0aC5jb3MoY3JlYXR1cmUuaGVhZGluZyksXHJcbiAgICAgIHBvc2l0aW9uLnkgKyAoY3JlYXR1cmUuc2l6ZSArIDEpICogTWF0aC5zaW4oY3JlYXR1cmUuaGVhZGluZyksXHJcbiAgICAgIGNyZWF0dXJlLnNpemUgLyAyLCAwLCAyICogTWF0aC5QSSk7XHJcbiAgICB0aGlzLmN0eC5maWxsU3R5bGUgPSBcImJsYWNrXCI7XHJcbiAgICB0aGlzLmN0eC5maWxsKCk7XHJcbiAgfVxyXG59XHJcbiIsImV4cG9ydCBjbGFzcyBGcHNDb3VudGVyIHtcbiAgcHVibGljIHN0YXRpYyBnZXRGcHNDb3VudGVyKCk6IEZwc0NvdW50ZXIge1xuICAgIHJldHVybiB0aGlzLmZwc0NvdW50ZXIgfHwgKHRoaXMuZnBzQ291bnRlciA9IG5ldyBGcHNDb3VudGVyKCkpO1xuICB9XG5cbiAgcHJpdmF0ZSBzdGF0aWMgZnBzQ291bnRlcjogRnBzQ291bnRlcjtcbiAgcHJpdmF0ZSByZWFkb25seSBTRUNPTkQgPSAxMDAwO1xuXG4gIHByaXZhdGUgZnBzTGFiZWw6IEhUTUxFbGVtZW50O1xuICBwcml2YXRlIHJlY2VudEZyYW1lczogbnVtYmVyW10gPSBbXTtcbiAgcHJpdmF0ZSBzdGFydDogbnVtYmVyO1xuXG4gIHByaXZhdGUgY29uc3RydWN0b3IoKSB7XG4gICAgdGhpcy5mcHNMYWJlbCA9IGRvY3VtZW50LmdldEVsZW1lbnRCeUlkKFwiZnBzLXN0YXR1c1wiKSE7XG4gICAgdGhpcy5zdGFydCA9IHBlcmZvcm1hbmNlLm5vdygpO1xuICB9XG5cbiAgcHVibGljIGNvdW50RnJhbWUoKTogdm9pZCB7XG4gICAgdGhpcy5yZWNlbnRGcmFtZXMucHVzaChwZXJmb3JtYW5jZS5ub3coKSk7XG4gIH1cblxuICBwdWJsaWMgZ2V0RlBTKCk6IG51bWJlciB7XG4gICAgY29uc3QgY3VycmVudFRpbWUgPSBwZXJmb3JtYW5jZS5ub3coKTtcbiAgICBjb25zdCBtdWx0aXBsaWVyID0gY3VycmVudFRpbWUgLSB0aGlzLnN0YXJ0IDwgdGhpcy5TRUNPTkQgP1xuICAgICAgTWF0aC5mbG9vcigxMDAwIC8gKGN1cnJlbnRUaW1lIC0gdGhpcy5zdGFydCkpIDpcbiAgICAgIDE7XG4gICAgcmV0dXJuIHRoaXMucmVjZW50RnJhbWVzLmZpbHRlcihcbiAgICAgIChkcmF3VGltZTogbnVtYmVyKSA9PiBkcmF3VGltZSA+PSBjdXJyZW50VGltZSAtIHRoaXMuU0VDT05ELFxuICAgICkubGVuZ3RoICogbXVsdGlwbGllcjtcbiAgfVxuXG4gIHB1YmxpYyB1cGRhdGVGcHMoKTogdm9pZCB7XG4gICAgdGhpcy5mcHNMYWJlbC50ZXh0Q29udGVudCA9IHRoaXMuZ2V0RlBTKCkudG9TdHJpbmcoKTtcbiAgfVxufVxuIiwiaW1wb3J0IHsgVmVjdG9yMiB9IGZyb20gXCIuL3ZlY3RvcjJcIjtcclxuaW1wb3J0IHsgY29uZmlnIH0gZnJvbSBcIi4vY29uZmlnXCI7XHJcbmltcG9ydCB7IENhbnZhcyB9IGZyb20gXCIuL2NhbnZhc1wiO1xyXG5cclxuZXhwb3J0IGNsYXNzIElucHV0SGFuZGxlciB7XHJcbiAgcHJpdmF0ZSBjYW52YXM6IENhbnZhcztcclxuICBwcml2YXRlIGNyZWF0ZUJvaWQ6IChwb3NpdGlvbjogVmVjdG9yMikgPT4gdm9pZDtcclxuICBwcml2YXRlIGNyZWF0ZUh1bnRlcjogKHBvc2l0aW9uOiBWZWN0b3IyKSA9PiB2b2lkO1xyXG4gIHByaXZhdGUgc2VwYXJhdGlvbkxhYmVsOiBIVE1MRWxlbWVudDtcclxuICBwcml2YXRlIGFsaWdubWVudExhYmVsOiBIVE1MRWxlbWVudDtcclxuICBwcml2YXRlIGNvaGVzaW9uTGFiZWw6IEhUTUxFbGVtZW50O1xyXG5cclxuICBwcml2YXRlIGxlZnQgPSBmYWxzZTtcclxuICBwcml2YXRlIHJpZ2h0ID0gZmFsc2U7XHJcbiAgcHJpdmF0ZSB1cCA9IGZhbHNlO1xyXG4gIHByaXZhdGUgZG93biA9IGZhbHNlO1xyXG5cclxuICBjb25zdHJ1Y3RvcihcclxuICAgIGNhbnZhczogQ2FudmFzLFxyXG4gICAgY3JlYXRlQm9pZDogKHBvc2l0aW9uOiBWZWN0b3IyKSA9PiB2b2lkLFxyXG4gICAgY3JlYXRlSHVudGVyOiAocG9zaXRpb246IFZlY3RvcjIpID0+IHZvaWQsXHJcbiAgKSB7XHJcbiAgICB0aGlzLmNhbnZhcyA9IGNhbnZhcztcclxuICAgIHRoaXMuY3JlYXRlQm9pZCA9IGNyZWF0ZUJvaWQ7XHJcbiAgICB0aGlzLmNyZWF0ZUh1bnRlciA9IGNyZWF0ZUh1bnRlcjtcclxuICAgIHRoaXMuc2VwYXJhdGlvbkxhYmVsID0gZG9jdW1lbnQuZ2V0RWxlbWVudEJ5SWQoXCJzZXBhcmF0aW9uLXN0YXR1c1wiKSE7XHJcbiAgICB0aGlzLmFsaWdubWVudExhYmVsID0gZG9jdW1lbnQuZ2V0RWxlbWVudEJ5SWQoXCJhbGlnbm1lbnQtc3RhdHVzXCIpITtcclxuICAgIHRoaXMuY29oZXNpb25MYWJlbCA9IGRvY3VtZW50LmdldEVsZW1lbnRCeUlkKFwiY29oZXNpb24tc3RhdHVzXCIpITtcclxuICAgIHRoaXMuY2FudmFzLm9uY2xpY2soKGV2ZW50OiBNb3VzZUV2ZW50KSA9PiB7XHJcbiAgICAgIHRoaXMuaGFuZGxlTW91c2VDbGljayhldmVudCk7XHJcbiAgICB9KTtcclxuICAgIHdpbmRvdy5hZGRFdmVudExpc3RlbmVyKFwia2V5dXBcIiwgKGV2ZW50OiBLZXlib2FyZEV2ZW50KSA9PiB7XHJcbiAgICAgIHRoaXMuaGFuZGxlS2V5VXAoZXZlbnQpO1xyXG4gICAgfSk7XHJcbiAgICB3aW5kb3cuYWRkRXZlbnRMaXN0ZW5lcihcImtleXVwXCIsIChldmVudCkgPT4ge1xyXG4gICAgICB0aGlzLnNldEFycm93KGV2ZW50LmtleSwgZmFsc2UpO1xyXG4gICAgfSk7XHJcbiAgICB3aW5kb3cuYWRkRXZlbnRMaXN0ZW5lcihcImtleWRvd25cIiwgKGV2ZW50KSA9PiB7XHJcbiAgICAgIHRoaXMuc2V0QXJyb3coZXZlbnQua2V5LCB0cnVlKTtcclxuICAgIH0pO1xyXG4gIH1cclxuXHJcbiAgcHVibGljIGhhbmRsZU1vdXNlQ2xpY2soZXZlbnQ6IE1vdXNlRXZlbnQpOiB2b2lkIHtcclxuICAgIGNvbnN0IG1vdXNlUG9zaXRpb24gPSB0aGlzLmNhbnZhcy5nZXRQb3NpdGlvbkluV29ybGRTcGFjZShcclxuICAgICAgbmV3IFZlY3RvcjIoXHJcbiAgICAgICAgZXZlbnQuY2xpZW50WCxcclxuICAgICAgICBldmVudC5jbGllbnRZLFxyXG4gICAgICApLFxyXG4gICAgKTtcclxuICAgIGlmIChldmVudC5jdHJsS2V5IHx8IGV2ZW50Lm1ldGFLZXkpIHtcclxuICAgICAgdGhpcy5jcmVhdGVIdW50ZXIobW91c2VQb3NpdGlvbik7XHJcbiAgICB9IGVsc2Uge1xyXG4gICAgICB0aGlzLmNyZWF0ZUJvaWQobW91c2VQb3NpdGlvbik7XHJcbiAgICB9XHJcbiAgfVxyXG5cclxuICBwdWJsaWMgaGFuZGxlS2V5VXAoZXZlbnQ6IEtleWJvYXJkRXZlbnQpOiB2b2lkIHtcclxuICAgIGNvbnN0IG9uZUtleUNvZGUgPSA0OTtcclxuICAgIGNvbnN0IHR3b0tleUNvZGUgPSA1MDtcclxuICAgIGNvbnN0IHRocmVlS2V5Q29kZSA9IDUxO1xyXG4gICAgc3dpdGNoIChldmVudC5rZXlDb2RlKSB7XHJcbiAgICAgIGNhc2Ugb25lS2V5Q29kZTogdGhpcy50b2dnbGVTZXBhcmF0aW9uKCk7IGJyZWFrO1xyXG4gICAgICBjYXNlIHR3b0tleUNvZGU6IHRoaXMudG9nZ2xlQWxpZ25tZW50KCk7IGJyZWFrO1xyXG4gICAgICBjYXNlIHRocmVlS2V5Q29kZTogdGhpcy50b2dnbGVDb2hlc2lvbigpOyBicmVhaztcclxuICAgICAgZGVmYXVsdDogcmV0dXJuO1xyXG4gICAgfVxyXG4gIH1cclxuXHJcbiAgcHVibGljIHRvZ2dsZVNlcGFyYXRpb24oKTogdm9pZCB7XHJcbiAgICBpZiAoY29uZmlnLmJvaWQucmVwdWxzaW9uUmFkaXVzKSB7XHJcbiAgICAgIGNvbmZpZy5ib2lkLnJlcHVsc2lvblJhZGl1cyA9IDA7XHJcbiAgICAgIHRoaXMuc2VwYXJhdGlvbkxhYmVsLnRleHRDb250ZW50ID0gXCJPRkZcIjtcclxuICAgICAgdGhpcy5zZXBhcmF0aW9uTGFiZWwuc3R5bGUuY29sb3IgPSBcInJlZFwiO1xyXG4gICAgfSBlbHNlIHtcclxuICAgICAgY29uZmlnLmJvaWQucmVwdWxzaW9uUmFkaXVzID0gY29uZmlnLmJvaWQucmVwdWxzaW9uUmFkaXVzRGVmYXVsdDtcclxuICAgICAgdGhpcy5zZXBhcmF0aW9uTGFiZWwudGV4dENvbnRlbnQgPSBcIk9OXCI7XHJcbiAgICAgIHRoaXMuc2VwYXJhdGlvbkxhYmVsLnN0eWxlLmNvbG9yID0gXCJncmVlblwiO1xyXG4gICAgfVxyXG4gIH1cclxuXHJcbiAgcHVibGljIHRvZ2dsZUFsaWdubWVudCgpOiB2b2lkIHtcclxuICAgIGlmIChjb25maWcuYm9pZC5hbGlnbm1lbnRSYWRpdXMpIHtcclxuICAgICAgY29uZmlnLmJvaWQuYWxpZ25tZW50UmFkaXVzID0gMDtcclxuICAgICAgdGhpcy5hbGlnbm1lbnRMYWJlbC50ZXh0Q29udGVudCA9IFwiT0ZGXCI7XHJcbiAgICAgIHRoaXMuYWxpZ25tZW50TGFiZWwuc3R5bGUuY29sb3IgPSBcInJlZFwiO1xyXG4gICAgfSBlbHNlIHtcclxuICAgICAgY29uZmlnLmJvaWQuYWxpZ25tZW50UmFkaXVzID0gY29uZmlnLmJvaWQuYWxpZ25tZW50UmFkaXVzRGVmYXVsdDtcclxuICAgICAgdGhpcy5hbGlnbm1lbnRMYWJlbC50ZXh0Q29udGVudCA9IFwiT05cIjtcclxuICAgICAgdGhpcy5hbGlnbm1lbnRMYWJlbC5zdHlsZS5jb2xvciA9IFwiZ3JlZW5cIjtcclxuICAgIH1cclxuICB9XHJcblxyXG4gIHB1YmxpYyB0b2dnbGVDb2hlc2lvbigpOiB2b2lkIHtcclxuICAgIGlmIChjb25maWcuYm9pZC5hdHRyYWN0aW9uUmFkaXVzKSB7XHJcbiAgICAgIGNvbmZpZy5ib2lkLmF0dHJhY3Rpb25SYWRpdXMgPSAwO1xyXG4gICAgICB0aGlzLmNvaGVzaW9uTGFiZWwudGV4dENvbnRlbnQgPSBcIk9GRlwiO1xyXG4gICAgICB0aGlzLmNvaGVzaW9uTGFiZWwuc3R5bGUuY29sb3IgPSBcInJlZFwiO1xyXG4gICAgfSBlbHNlIHtcclxuICAgICAgY29uZmlnLmJvaWQuYXR0cmFjdGlvblJhZGl1cyA9IGNvbmZpZy5ib2lkLmF0dHJhY3Rpb25SYWRpdXNEZWZhdWx0O1xyXG4gICAgICB0aGlzLmNvaGVzaW9uTGFiZWwudGV4dENvbnRlbnQgPSBcIk9OXCI7XHJcbiAgICAgIHRoaXMuY29oZXNpb25MYWJlbC5zdHlsZS5jb2xvciA9IFwiZ3JlZW5cIjtcclxuICAgIH1cclxuICB9XHJcblxyXG4gIHB1YmxpYyBnZXRIZWFkaW5nVXBkYXRlKCk6IG51bWJlciB7XHJcbiAgICByZXR1cm4gMC4xICogKCt0aGlzLnJpZ2h0IC0gK3RoaXMubGVmdCk7XHJcbiAgfVxyXG5cclxuICBwdWJsaWMgZ2V0U3BlZWRVcGRhdGUoKTogbnVtYmVyIHtcclxuICAgIHJldHVybiAwLjUgKiAoK3RoaXMudXAgLSArdGhpcy5kb3duKTtcclxuICB9XHJcblxyXG4gIHByaXZhdGUgc2V0QXJyb3coa2V5OiBzdHJpbmcsIG5ld1N0YXRlOiBib29sZWFuKTogdm9pZCB7XHJcbiAgICBzd2l0Y2ggKGtleSkge1xyXG4gICAgICBjYXNlIFwiQXJyb3dMZWZ0XCI6XHJcbiAgICAgICAgdGhpcy5sZWZ0ID0gbmV3U3RhdGU7XHJcbiAgICAgICAgYnJlYWs7XHJcbiAgICAgIGNhc2UgXCJBcnJvd1JpZ2h0XCI6XHJcbiAgICAgICAgdGhpcy5yaWdodCA9IG5ld1N0YXRlO1xyXG4gICAgICAgIGJyZWFrO1xyXG4gICAgICBjYXNlIFwiQXJyb3dVcFwiOlxyXG4gICAgICAgIHRoaXMudXAgPSBuZXdTdGF0ZTtcclxuICAgICAgICBicmVhaztcclxuICAgICAgY2FzZSBcIkFycm93RG93blwiOlxyXG4gICAgICAgIHRoaXMuZG93biA9IG5ld1N0YXRlO1xyXG4gICAgICAgIGJyZWFrO1xyXG4gICAgICBkZWZhdWx0OlxyXG4gICAgICAgIHJldHVybjtcclxuICAgICB9XHJcbiAgfVxyXG59XHJcbiIsImltcG9ydCB7IENyZWF0dXJlIH0gZnJvbSBcIi4vY3JlYXR1cmVzL2NyZWF0dXJlXCI7XHJcbmltcG9ydCB7IEh1bnRlciB9IGZyb20gXCIuL2NyZWF0dXJlcy9odW50ZXJcIjtcclxuaW1wb3J0IHsgQm9pZCB9IGZyb20gXCIuL2NyZWF0dXJlcy9ib2lkXCI7XHJcbmltcG9ydCB7IFZlY3RvcjIgfSBmcm9tIFwiLi92ZWN0b3IyXCI7XHJcbmltcG9ydCB7IGNvbmZpZyB9IGZyb20gXCIuL2NvbmZpZ1wiO1xyXG5pbXBvcnQgUGxheWVyRmlzaCBmcm9tIFwiLi9jcmVhdHVyZXMvcGxheWVyRmlzaFwiO1xyXG5pbXBvcnQgeyBJbnB1dEhhbmRsZXIgfSBmcm9tIFwiLi9pbnB1dEhhbmRsZXJcIjtcclxuXHJcbmV4cG9ydCBjbGFzcyBDcmVhdHVyZVN0b3JhZ2Uge1xyXG4gIHByaXZhdGUgbmV4dElkID0gMDtcclxuICBwcml2YXRlIGNyZWF0dXJlcyA9IG5ldyBNYXA8bnVtYmVyLCBDcmVhdHVyZT4oKTtcclxuICBwcml2YXRlIGJ1Y2tldE1hcDogQ3JlYXR1cmVbXVtdW10gPSBbXTtcclxuICBwcml2YXRlIGJ1Y2tldENvbHVtbnMgPSAxO1xyXG4gIHByaXZhdGUgYnVja2V0Um93cyA9IDE7XHJcbiAgcHJpdmF0ZSByZWFkb25seSBidWNrZXRTaXplID0gMTAwO1xyXG5cclxuICBjb25zdHJ1Y3RvcihwdWJsaWMgaW5wdXRIYW5kbGVyOiBJbnB1dEhhbmRsZXIpIHtcclxuICAgIHRoaXMudXBkYXRlKCk7XHJcbiAgfVxyXG5cclxuICBwdWJsaWMgdXBkYXRlKCk6IHZvaWQge1xyXG4gICAgdGhpcy5yZXNldEJ1Y2tldE1hcCgpO1xyXG4gICAgdGhpcy5jcmVhdHVyZXMuZm9yRWFjaCgoY3JlYXR1cmUpID0+IHtcclxuICAgICAgY29uc3QgYnVja2V0WCA9IE1hdGgubWluKFxyXG4gICAgICAgIE1hdGguZmxvb3IoY3JlYXR1cmUucG9zaXRpb24ueCAvIHRoaXMuYnVja2V0U2l6ZSksXHJcbiAgICAgICAgdGhpcy5idWNrZXRDb2x1bW5zIC0gMSxcclxuICAgICAgKTtcclxuICAgICAgY29uc3QgYnVja2V0WSA9IE1hdGgubWluKFxyXG4gICAgICAgIE1hdGguZmxvb3IoY3JlYXR1cmUucG9zaXRpb24ueSAvIHRoaXMuYnVja2V0U2l6ZSksXHJcbiAgICAgICAgdGhpcy5idWNrZXRSb3dzIC0gMSxcclxuICAgICAgKTtcclxuICAgICAgdGhpcy5idWNrZXRNYXBbYnVja2V0WF1bYnVja2V0WV0ucHVzaChjcmVhdHVyZSk7XHJcbiAgICB9KTtcclxuICB9XHJcblxyXG4gIHB1YmxpYyBhZGRIdW50ZXIocG9zaXRpb24/OiBWZWN0b3IyKTogSHVudGVyIHtcclxuICAgIGNvbnN0IG5ld0h1bnRlciA9IG5ldyBIdW50ZXIoXHJcbiAgICAgIHRoaXMubmV4dElkLFxyXG4gICAgICB0aGlzLFxyXG4gICAgICBwb3NpdGlvbixcclxuICAgICk7XHJcbiAgICB0aGlzLmNyZWF0dXJlcy5zZXQodGhpcy5uZXh0SWQsIG5ld0h1bnRlcik7XHJcbiAgICB0aGlzLm5leHRJZCsrO1xyXG4gICAgcmV0dXJuIG5ld0h1bnRlcjtcclxuICB9XHJcblxyXG4gIHB1YmxpYyBhZGRCb2lkKHBvc2l0aW9uPzogVmVjdG9yMik6IEJvaWQge1xyXG4gICAgY29uc3QgbmV3Qm9pZCA9IG5ldyBCb2lkKFxyXG4gICAgICB0aGlzLm5leHRJZCxcclxuICAgICAgdGhpcyxcclxuICAgICAgcG9zaXRpb24sXHJcbiAgICApO1xyXG4gICAgdGhpcy5jcmVhdHVyZXMuc2V0KHRoaXMubmV4dElkLCBuZXdCb2lkKTtcclxuICAgIHRoaXMubmV4dElkKys7XHJcbiAgICByZXR1cm4gbmV3Qm9pZDtcclxuICB9XHJcblxyXG4gIHB1YmxpYyBhZGRQbGF5ZXJGaXNoKCk6IFBsYXllckZpc2gge1xyXG4gICAgY29uc3QgbmV3UGxheWVyID0gbmV3IFBsYXllckZpc2goXHJcbiAgICAgIHRoaXMuaW5wdXRIYW5kbGVyLFxyXG4gICAgKTtcclxuICAgIHRoaXMuY3JlYXR1cmVzLnNldCh0aGlzLm5leHRJZCwgbmV3UGxheWVyKTtcclxuICAgIHRoaXMubmV4dElkKys7XHJcbiAgICByZXR1cm4gbmV3UGxheWVyO1xyXG4gIH1cclxuXHJcbiAgcHVibGljIGdldEFsbEh1bnRlcnMoKTogSHVudGVyW10ge1xyXG4gICAgcmV0dXJuIFsuLi50aGlzLmNyZWF0dXJlcy52YWx1ZXMoKV0uZmlsdGVyKChjcmVhdHVyZSkgPT4ge1xyXG4gICAgICByZXR1cm4gY3JlYXR1cmUgaW5zdGFuY2VvZiBIdW50ZXI7XHJcbiAgICB9KSBhcyBIdW50ZXJbXTtcclxuICB9XHJcblxyXG4gIHB1YmxpYyBnZXRBbGxCb2lkcygpOiBCb2lkW10ge1xyXG4gICAgcmV0dXJuIFsuLi50aGlzLmNyZWF0dXJlcy52YWx1ZXMoKV0uZmlsdGVyKChjcmVhdHVyZSkgPT4ge1xyXG4gICAgICByZXR1cm4gY3JlYXR1cmUgaW5zdGFuY2VvZiBCb2lkO1xyXG4gICAgfSkgYXMgQm9pZFtdO1xyXG4gIH1cclxuXHJcbiAgcHVibGljIGdldEFsbENyZWF0dXJlcygpOiBDcmVhdHVyZVtdIHtcclxuICAgIHJldHVybiBbLi4udGhpcy5jcmVhdHVyZXMudmFsdWVzKCldO1xyXG4gIH1cclxuXHJcbiAgcHVibGljIGdldEh1bnRlcnNJbkFyZWEoY2VudGVyOiBWZWN0b3IyLCByYWRpdXM6IG51bWJlcik6IEh1bnRlcltdIHtcclxuICAgIHJldHVybiB0aGlzLmdldENyZWF0dXJlc0luQXJlYShjZW50ZXIsIHJhZGl1cylcclxuICAgICAgLmZpbHRlcigoY3JlYXR1cmUpID0+IHtcclxuICAgICAgICByZXR1cm4gY3JlYXR1cmUgaW5zdGFuY2VvZiBIdW50ZXIgJiZcclxuICAgICAgICBjcmVhdHVyZS5wb3NpdGlvbi5kaXN0YW5jZShjZW50ZXIpIDwgcmFkaXVzO1xyXG4gICAgICB9KSBhcyBIdW50ZXJbXTtcclxuICB9XHJcblxyXG4gIHB1YmxpYyBnZXRCb2lkc0luQXJlYShjZW50ZXI6IFZlY3RvcjIsIHJhZGl1czogbnVtYmVyKTogQm9pZFtdIHtcclxuICAgIHJldHVybiB0aGlzLmdldENyZWF0dXJlc0luQXJlYShjZW50ZXIsIHJhZGl1cylcclxuICAgICAgLmZpbHRlcigoY3JlYXR1cmUpID0+IHtcclxuICAgICAgICByZXR1cm4gY3JlYXR1cmUgaW5zdGFuY2VvZiBCb2lkICYmXHJcbiAgICAgICAgY3JlYXR1cmUucG9zaXRpb24uZGlzdGFuY2UoY2VudGVyKSA8IHJhZGl1cztcclxuICAgICAgfSkgYXMgQm9pZFtdO1xyXG4gIH1cclxuXHJcbiAgcHVibGljIGdldEJvaWRzT3JQbGF5ZXJzSW5BcmVhKGNlbnRlcjogVmVjdG9yMiwgcmFkaXVzOiBudW1iZXIpOiBDcmVhdHVyZVtdIHtcclxuICAgIHJldHVybiB0aGlzLmdldENyZWF0dXJlc0luQXJlYShjZW50ZXIsIHJhZGl1cylcclxuICAgICAgLmZpbHRlcigoY3JlYXR1cmUpID0+IHtcclxuICAgICAgICByZXR1cm4gKFxyXG4gICAgICAgICAgKGNyZWF0dXJlIGluc3RhbmNlb2YgQm9pZCB8fCBjcmVhdHVyZSBpbnN0YW5jZW9mIFBsYXllckZpc2gpICYmXHJcbiAgICAgICAgICBjcmVhdHVyZS5wb3NpdGlvbi5kaXN0YW5jZShjZW50ZXIpIDwgcmFkaXVzXHJcbiAgICAgICAgKTtcclxuICAgICAgfSk7XHJcbiAgfVxyXG5cclxuICBwdWJsaWMgZ2V0Q3JlYXR1cmVzSW5BcmVhKGNlbnRlcjogVmVjdG9yMiwgcmFkaXVzOiBudW1iZXIpOiBDcmVhdHVyZVtdIHtcclxuICAgIGNvbnN0IGJ1Y2tldFggPSBNYXRoLmZsb29yKGNlbnRlci54IC8gdGhpcy5idWNrZXRTaXplKTtcclxuICAgIGNvbnN0IGJ1Y2tldFkgPSBNYXRoLmZsb29yKGNlbnRlci55IC8gdGhpcy5idWNrZXRTaXplKTtcclxuICAgIGNvbnN0IGJ1Y2tldFJhZGl1cyA9IE1hdGguY2VpbChyYWRpdXMgLyB0aGlzLmJ1Y2tldFNpemUpO1xyXG4gICAgY29uc3QgbWluWCA9IChidWNrZXRYIC0gYnVja2V0UmFkaXVzICsgdGhpcy5idWNrZXRDb2x1bW5zKSAlIHRoaXMuYnVja2V0Q29sdW1ucztcclxuICAgIGNvbnN0IG1heFggPSAoYnVja2V0WCArIGJ1Y2tldFJhZGl1cyArIDEpICUgdGhpcy5idWNrZXRDb2x1bW5zO1xyXG4gICAgY29uc3QgbWluWSA9IChidWNrZXRZIC0gYnVja2V0UmFkaXVzICsgdGhpcy5idWNrZXRSb3dzKSAlIHRoaXMuYnVja2V0Um93cztcclxuICAgIGNvbnN0IG1heFkgPSAoYnVja2V0WSArIGJ1Y2tldFJhZGl1cyArIDEpICUgdGhpcy5idWNrZXRSb3dzO1xyXG4gICAgbGV0IGNyZWF0dXJlczogQ3JlYXR1cmVbXSA9IFtdO1xyXG4gICAgZm9yIChsZXQgaSA9IG1pblg7IGkgIT09IG1heFg7IGkrKywgaSA9IGkgJSB0aGlzLmJ1Y2tldENvbHVtbnMpIHtcclxuICAgICAgZm9yIChsZXQgaiA9IG1pblk7IGogIT09IG1heFk7IGorKywgaiA9IGogJSB0aGlzLmJ1Y2tldFJvd3MpIHtcclxuICAgICAgICBjcmVhdHVyZXMgPSBjcmVhdHVyZXMuY29uY2F0KHRoaXMuYnVja2V0TWFwW2ldW2pdKTtcclxuICAgICAgfVxyXG4gICAgfVxyXG4gICAgcmV0dXJuIGNyZWF0dXJlcztcclxuICB9XHJcblxyXG4gIHB1YmxpYyBnZXRIdW50ZXJDb3VudCgpOiBudW1iZXIge1xyXG4gICAgcmV0dXJuIHRoaXMuZ2V0QWxsSHVudGVycygpLmxlbmd0aDtcclxuICB9XHJcblxyXG4gIHB1YmxpYyBnZXRCb2lkQ291bnQoKTogbnVtYmVyIHtcclxuICAgIHJldHVybiB0aGlzLmdldEFsbEJvaWRzKCkubGVuZ3RoO1xyXG4gIH1cclxuXHJcbiAgcHVibGljIHJlbW92ZShjcmVhdHVyZUlkOiBudW1iZXIpOiB2b2lkIHtcclxuICAgIHRoaXMuY3JlYXR1cmVzLmRlbGV0ZShjcmVhdHVyZUlkKTtcclxuICB9XHJcblxyXG4gIHByaXZhdGUgcmVzZXRCdWNrZXRNYXAoKTogdm9pZCB7XHJcbiAgICB0aGlzLmJ1Y2tldE1hcCA9IFtdO1xyXG4gICAgdGhpcy5idWNrZXRDb2x1bW5zID0gTWF0aC5jZWlsKGNvbmZpZy5zY3JlZW4ubWF4WCAvIHRoaXMuYnVja2V0U2l6ZSk7XHJcbiAgICB0aGlzLmJ1Y2tldFJvd3MgPSBNYXRoLmNlaWwoY29uZmlnLnNjcmVlbi5tYXhZIC8gdGhpcy5idWNrZXRTaXplKTtcclxuICAgIGZvciAobGV0IGkgPSAwOyBpIDwgdGhpcy5idWNrZXRDb2x1bW5zOyBpKyspIHtcclxuICAgICAgY29uc3QgYnVja2V0Um93OiBDcmVhdHVyZVtdW10gPSBbXTtcclxuICAgICAgZm9yIChsZXQgaiA9IDA7IGogPCB0aGlzLmJ1Y2tldFJvd3M7IGorKykge1xyXG4gICAgICAgIGJ1Y2tldFJvdy5wdXNoKFtdKTtcclxuICAgICAgfVxyXG4gICAgICB0aGlzLmJ1Y2tldE1hcC5wdXNoKGJ1Y2tldFJvdyk7XHJcbiAgICB9XHJcbiAgfVxyXG59XHJcbiIsImltcG9ydCB7IGNvbmZpZyB9IGZyb20gXCIuLi9jb25maWdcIjtcclxuaW1wb3J0IHsgVmVjdG9yMiB9IGZyb20gXCIuLi92ZWN0b3IyXCI7XHJcbmltcG9ydCB7IENyZWF0dXJlIH0gZnJvbSBcIi4vY3JlYXR1cmVcIjtcclxuaW1wb3J0IHsgQ3JlYXR1cmVTdG9yYWdlIH0gZnJvbSBcIi4uL2NyZWF0dXJlU3RvcmFnZVwiO1xyXG5pbXBvcnQgeyBOZXQgfSBmcm9tIFwiLi4vbmV1cmFsL25ldFwiO1xyXG5cclxuZXhwb3J0IGNsYXNzIEh1bnRlciBleHRlbmRzIENyZWF0dXJlIHtcclxuICBwdWJsaWMgY29sb3VyID0gY29uZmlnLmh1bnRlci5kZWZhdWx0Q29sb3VyO1xyXG4gIHB1YmxpYyBtYXhTcGVlZCA9IGNvbmZpZy5odW50ZXIubWF4U3BlZWQ7XHJcbiAgcHVibGljIG1pblNwZWVkID0gY29uZmlnLmh1bnRlci5taW5TcGVlZDtcclxuICBwdWJsaWMgc2l6ZSA9IGNvbmZpZy5odW50ZXIuc2l6ZTtcclxuICBwdWJsaWMgaGVhZGluZyA9IDA7XHJcbiAgcHVibGljIHNwZWVkID0gMDtcclxuICBwdWJsaWMgaGlzdG9yeTogVmVjdG9yMltdID0gW107XHJcbiAgcHVibGljIHBvc2l0aW9uOiBWZWN0b3IyO1xyXG4gIHByaXZhdGUgc3RhdGljIHJlYWRvbmx5IG5ldFNpemVTY2hlbWEgPSBbMSwgMywgMl1cclxuICBwcml2YXRlIG5ldDogTmV0O1xyXG5cclxuICBjb25zdHJ1Y3RvcihcclxuICAgIHB1YmxpYyByZWFkb25seSBpZDogbnVtYmVyID0gMCxcclxuICAgIHB1YmxpYyBjcmVhdHVyZVN0b3JhZ2U6IENyZWF0dXJlU3RvcmFnZSxcclxuICAgIHBvc2l0aW9uPzogVmVjdG9yMixcclxuICApIHtcclxuICAgIHN1cGVyKCk7XHJcbiAgICB0aGlzLnBvc2l0aW9uID0gcG9zaXRpb24gfHwgbmV3IFZlY3RvcjIoXHJcbiAgICAgIE1hdGgucmFuZG9tKCkgKiBjb25maWcuc2NyZWVuLm1heFgsXHJcbiAgICAgIE1hdGgucmFuZG9tKCkgKiBjb25maWcuc2NyZWVuLm1heFksXHJcbiAgICApO1xyXG4gICAgZm9yIChsZXQgaSA9IDA7IGkgPCBjb25maWcuY3JlYXR1cmUubWF4SGlzdG9yeTsgaSsrKSB7XHJcbiAgICAgIHRoaXMuaGlzdG9yeS5wdXNoKHRoaXMucG9zaXRpb24pO1xyXG4gICAgfVxyXG4gICAgdGhpcy5pbml0aWFsaXplVmVsb2NpdHkoKTtcclxuICAgIHRoaXMubmV0ID0gbmV3IE5ldChIdW50ZXIubmV0U2l6ZVNjaGVtYSlcclxuICB9XHJcblxyXG4gIHB1YmxpYyBpbml0aWFsaXplVmVsb2NpdHkoKTogdm9pZCB7XHJcbiAgICB0aGlzLmhlYWRpbmcgPSBNYXRoLnJhbmRvbSgpICogMiAqIE1hdGguUEk7XHJcbiAgICB0aGlzLnNwZWVkID0gY29uZmlnLmh1bnRlci5taW5TcGVlZDtcclxuICB9XHJcblxyXG4gIHB1YmxpYyB1cGRhdGUoKTogdm9pZCB7XHJcbiAgICB0aGlzLmVhdCgpO1xyXG4gICAgdGhpcy5tb3ZlKCk7XHJcbiAgICB0aGlzLnVwZGF0ZUhpc3RvcnkoKTtcclxuICB9XHJcblxyXG4gIHB1YmxpYyBlYXQoKTogdm9pZCB7XHJcbiAgICB0aGlzLmNyZWF0dXJlU3RvcmFnZS5nZXRCb2lkc0luQXJlYShcclxuICAgICAgdGhpcy5wb3NpdGlvbixcclxuICAgICAgY29uZmlnLmh1bnRlci5lYXRSYWRpdXMsXHJcbiAgICApLmZvckVhY2goKHByZXkpID0+IHByZXkuZGllKCkpO1xyXG4gIH1cclxuXHJcbiAgcHVibGljIG1vdmUoKTogdm9pZCB7XHJcbiAgICB0aGlzLnVwZGF0ZUhpc3RvcnkoKTtcclxuICAgIHRoaXMucG9zaXRpb24gPSB0aGlzLnBvc2l0aW9uLmFkZCh0aGlzLnZlbG9jaXR5KCkpLm5vcm1hbGl6ZSgpO1xyXG4gICAgY29uc3QgaW5wdXRWZWN0b3IgPSB0aGlzLmdldE5ldXJhbE5ldElucHV0VmVjdG9yKCk7XHJcbiAgICBjb25zdCBvdXRwdXRWZWN0b3IgPSB0aGlzLm5ldC5wcm9jZXNzSW5wdXQoaW5wdXRWZWN0b3IpO1xyXG4gICAgdGhpcy5wYXJzZU91dHB1dFRvQWN0aW9uKG91dHB1dFZlY3Rvcik7XHJcblxyXG4gICAgLy8gVE9ETyAuLi4gdXBkYXRlIG5ldCB0byBsZWFybj9cclxuICB9XHJcblxyXG4gIHByaXZhdGUgZ2V0TmV1cmFsTmV0SW5wdXRWZWN0b3IoKTogbnVtYmVyW10ge1xyXG4gICAgLy8gVE9ETyB0aGlzIHdpbGwgZXJyb3IgaWYgdGhlcmUgYXJlIG5vIGJvaWRzXHJcbiAgICBjb25zdCBuZWFyZXN0Qm9pZCA9IHRoaXMuY3JlYXR1cmVTdG9yYWdlLmdldEFsbEJvaWRzKCkuc29ydCgoYSwgYikgPT4ge1xyXG4gICAgICByZXR1cm4gYS5kaXN0YW5jZVRvQ3JlYXR1cmUodGhpcykgLSBiLmRpc3RhbmNlVG9DcmVhdHVyZSh0aGlzKVxyXG4gICAgfSlbMF1cclxuXHJcbiAgICBjb25zdCBzaG9ydGVzdFBhdGggPSB0aGlzLnBvc2l0aW9uLnZlY3RvclRvKG5lYXJlc3RCb2lkLnBvc2l0aW9uKVxyXG5cclxuICAgIGNvbnN0IHRhcmdldEhlYWRpbmdSYWRpYW5zID0gdGhpcy52ZWxvY2l0eSgpLmFuZ2xlVG8oc2hvcnRlc3RQYXRoKVxyXG4gICAgY29uc3Qgbm9ybWFsaXNlZFRhcmdldCA9ICh0YXJnZXRIZWFkaW5nUmFkaWFucyAvICgyICogTWF0aC5QSSkpICsgMC41XHJcbiAgICByZXR1cm4gW25vcm1hbGlzZWRUYXJnZXRdXHJcbiAgfVxyXG5cclxuICBwcml2YXRlIHBhcnNlT3V0cHV0VG9BY3Rpb24ob3V0cHV0VmVjdG9yOiBudW1iZXJbXSk6IHZvaWQge1xyXG4gICAgY29uc3Qgcm90YXRpb25EZWNpc2lvbiA9IG91dHB1dFZlY3RvclswXVxyXG4gICAgY29uc3QgbWF4aW11bUxlZnQgPSB0aGlzLmhlYWRpbmcgLSBjb25maWcuY3JlYXR1cmUudHVybmluZ01heFxyXG4gICAgY29uc3QgZnVsbFR1cm5pbmdSYW5nZSA9IGNvbmZpZy5jcmVhdHVyZS50dXJuaW5nTWF4ICogMlxyXG4gICAgdGhpcy5oZWFkaW5nID0gbWF4aW11bUxlZnQgKyByb3RhdGlvbkRlY2lzaW9uICogZnVsbFR1cm5pbmdSYW5nZVxyXG5cclxuICAgIGNvbnN0IGFjY2VsZXJhdGlvbkRlY2lzaW9uID0gb3V0cHV0VmVjdG9yWzFdXHJcbiAgICBjb25zdCBtaW5pbXVtU3BlZWQgPSB0aGlzLnNwZWVkIC0gY29uZmlnLmNyZWF0dXJlLmFjY2VsZXJhdGlvblxyXG4gICAgY29uc3QgZnVsbFNwZWVkUmFuZ2UgPSBjb25maWcuY3JlYXR1cmUuYWNjZWxlcmF0aW9uICogMlxyXG4gICAgY29uc3QgdGFyZ2V0U3BlZWQgPSBtaW5pbXVtU3BlZWQgKyBmdWxsU3BlZWRSYW5nZSAqIGFjY2VsZXJhdGlvbkRlY2lzaW9uXHJcbiAgICB0aGlzLnNwZWVkID0gTWF0aC5taW4oTWF0aC5tYXgodGFyZ2V0U3BlZWQsIDApLCBjb25maWcuaHVudGVyLm1heFNwZWVkKVxyXG4gIH1cclxufVxyXG4iLCJpbXBvcnQgeyBMYXllciB9IGZyb20gJy4vbGF5ZXInO1xyXG5cclxuZXhwb3J0IGNsYXNzIE5ldCB7XHJcbiAgcHVibGljIGxheWVyczogTGF5ZXJbXVxyXG5cclxuICBjb25zdHJ1Y3RvcihcclxuICAgIGxheWVyU2l6ZXM6IG51bWJlcltdLFxyXG4gICkge1xyXG4gICAgY29uc3QgaW5wdXRMYXllciA9IG5ldyBMYXllcihsYXllclNpemVzWzBdKVxyXG4gICAgdGhpcy5sYXllcnMgPSBbaW5wdXRMYXllcl1cclxuXHJcbiAgICBsZXQgcHJpb3JMYXllciA9IGlucHV0TGF5ZXJcclxuICAgIGZvciAobGV0IGkgPSAxOyBpIDwgbGF5ZXJTaXplcy5sZW5ndGg7IGkrKykge1xyXG4gICAgICBjb25zdCBuZXh0TGF5ZXIgPSBuZXcgTGF5ZXIobGF5ZXJTaXplc1tpXSlcclxuICAgICAgbmV4dExheWVyLmNvbm5lY3RQcmlvckxheWVyKHByaW9yTGF5ZXIpXHJcbiAgICAgIHRoaXMubGF5ZXJzLnB1c2gobmV4dExheWVyKVxyXG4gICAgICBwcmlvckxheWVyID0gbmV4dExheWVyXHJcbiAgICB9XHJcbiAgfVxyXG5cclxuICBwdWJsaWMgcHJvY2Vzc0lucHV0KGlucHV0VmVjdG9yOiBudW1iZXJbXSk6IG51bWJlcltdIHtcclxuICAgIHRoaXMuaW5qZWN0SW5wdXRWZWN0b3JUb0lucHV0TGF5ZXIoaW5wdXRWZWN0b3IpXHJcbiAgICBmb3IgKGxldCBpID0gMTsgaSA8IHRoaXMubGF5ZXJzLmxlbmd0aDsgaSsrKSB7XHJcbiAgICAgIHRoaXMubGF5ZXJzW2ldLnVwZGF0ZVZhbHVlcygpXHJcbiAgICB9XHJcbiAgICByZXR1cm4gdGhpcy5sYXllcnNbdGhpcy5sYXllcnMubGVuZ3RoIC0gMV0ub3V0cHV0VmVjdG9yKClcclxuICB9XHJcblxyXG4gIHByaXZhdGUgaW5qZWN0SW5wdXRWZWN0b3JUb0lucHV0TGF5ZXIoaW5wdXRWZWN0b3I6IG51bWJlcltdKTogdm9pZCB7XHJcbiAgICB0aGlzLmxheWVyc1swXS5pbmplY3RJbnB1dFZlY3RvcihpbnB1dFZlY3RvcilcclxuICB9XHJcbn1cclxuIiwiaW1wb3J0IHsgTmV1cm9uIH0gZnJvbSBcIi4vbmV1cm9uXCJcclxuXHJcbmV4cG9ydCBjbGFzcyBMYXllciB7XHJcbiAgcHVibGljIG5ldXJvbnM6IE5ldXJvbltdXHJcblxyXG4gIGNvbnN0cnVjdG9yKHNpemU6IG51bWJlcikge1xyXG4gICAgdGhpcy5uZXVyb25zID0gW11cclxuICAgIGZvciAobGV0IGkgPSAwOyBpIDwgc2l6ZTsgaSsrKSB7XHJcbiAgICAgIHRoaXMubmV1cm9ucy5wdXNoKG5ldyBOZXVyb24oKSlcclxuICAgIH1cclxuICB9XHJcblxyXG4gIHB1YmxpYyBjb25uZWN0UHJpb3JMYXllcihwcmlvckxheWVyOiBMYXllcik6IHZvaWQge1xyXG4gICAgdGhpcy5uZXVyb25zLmZvckVhY2gobmV1cm9uID0+IHtcclxuICAgICAgcHJpb3JMYXllci5uZXVyb25zLmZvckVhY2gocHJpb3JOZXVyb24gPT4ge1xyXG4gICAgICAgIE5ldXJvbi5jb25uZWN0UGFpcihwcmlvck5ldXJvbiwgbmV1cm9uKVxyXG4gICAgICB9KVxyXG4gICAgfSlcclxuICB9XHJcblxyXG4gIHB1YmxpYyBpbmplY3RJbnB1dFZlY3RvcihpbnB1dFZlY3RvcjogbnVtYmVyW10pOiB2b2lkIHtcclxuICAgIGZvciAobGV0IGkgPSAwOyBpIDwgaW5wdXRWZWN0b3IubGVuZ3RoOyBpKyspIHtcclxuICAgICAgdGhpcy5uZXVyb25zW2ldLnZhbHVlID0gaW5wdXRWZWN0b3JbaV1cclxuICAgIH1cclxuICB9XHJcblxyXG4gIHB1YmxpYyB1cGRhdGVWYWx1ZXMoKTogdm9pZCB7XHJcbiAgICB0aGlzLm5ldXJvbnMuZm9yRWFjaChuZXVyb24gPT4gbmV1cm9uLnVwZGF0ZVZhbHVlKCkpXHJcbiAgfVxyXG5cclxuICBwdWJsaWMgb3V0cHV0VmVjdG9yKCk6IG51bWJlcltdIHtcclxuICAgIHJldHVybiB0aGlzLm5ldXJvbnMubWFwKG5ldXJvbiA9PiBuZXVyb24udmFsdWUpXHJcbiAgfVxyXG59XHJcbiIsImltcG9ydCB7IENvbm5lY3Rpb24gfSBmcm9tIFwiLi9jb25uZWN0aW9uXCI7XHJcblxyXG5leHBvcnQgY2xhc3MgTmV1cm9uIHtcclxuICBwcml2YXRlIGlucHV0czogQ29ubmVjdGlvbltdO1xyXG4gIHByaXZhdGUgb3V0cHV0czogQ29ubmVjdGlvbltdO1xyXG4gIHB1YmxpYyB2YWx1ZTogbnVtYmVyO1xyXG5cclxuICBjb25zdHJ1Y3RvcigpIHtcclxuICAgIHRoaXMuaW5wdXRzID0gW107XHJcbiAgICB0aGlzLm91dHB1dHMgPSBbXTtcclxuICAgIHRoaXMudmFsdWUgPSAwO1xyXG4gIH1cclxuXHJcbiAgcHJpdmF0ZSBjb25uZWN0T3V0cHV0KGNvbm5lY3Rpb246IENvbm5lY3Rpb24pOiB2b2lkIHtcclxuICAgIHRoaXMub3V0cHV0cy5wdXNoKGNvbm5lY3Rpb24pXHJcbiAgfVxyXG5cclxuICBwcml2YXRlIGNvbm5lY3RJbnB1dChjb25uZWN0aW9uOiBDb25uZWN0aW9uKTogdm9pZCB7XHJcbiAgICB0aGlzLmlucHV0cy5wdXNoKGNvbm5lY3Rpb24pXHJcbiAgfVxyXG5cclxuICBzdGF0aWMgY29ubmVjdFBhaXIocHJpb3I6IE5ldXJvbiwgbmV4dDogTmV1cm9uKTogdm9pZCB7XHJcbiAgICBjb25zdCBjb25uZWN0aW9uID0gbmV3IENvbm5lY3Rpb24ocHJpb3IsIG5leHQpXHJcbiAgICBwcmlvci5jb25uZWN0T3V0cHV0KGNvbm5lY3Rpb24pXHJcbiAgICBuZXh0LmNvbm5lY3RJbnB1dChjb25uZWN0aW9uKVxyXG4gIH1cclxuXHJcbiAgLy8gQWN0aXZhdGlvbiBmdW5jdGlvblxyXG4gIHB1YmxpYyB1cGRhdGVWYWx1ZSgpOiB2b2lkIHtcclxuICAgIC8vIFRoaXMgaW1wbGVtZW50YXRpb24gaXMgdGhlIGNsYXNzaWMgc3RlcCBmdW5jdGlvblxyXG4gICAgY29uc3QgaW5wdXRTdW0gPSB0aGlzLmlucHV0cy5yZWR1Y2UoXHJcbiAgICAgIChwcmV2LCBjdXJyKSA9PiBwcmV2ICsgY3Vyci5nZXRXZWlnaHRlZE91dHB1dCgpLFxyXG4gICAgICAwXHJcbiAgICApXHJcbiAgICBjb25zdCBhdmVyYWdlSW5wdXQgPSBpbnB1dFN1bSAvIHRoaXMuaW5wdXRzLmxlbmd0aDtcclxuICAgIHRoaXMudmFsdWUgPSBhdmVyYWdlSW5wdXQgPCAwLjUgPyAwIDogMTtcclxuICB9XHJcbn1cclxuIiwiaW1wb3J0IHsgTmV1cm9uIH0gZnJvbSBcIi4vbmV1cm9uXCI7XHJcblxyXG5leHBvcnQgY2xhc3MgQ29ubmVjdGlvbiB7XHJcbiAgcHJpdmF0ZSBpbnB1dDogTmV1cm9uO1xyXG4gIHByaXZhdGUgb3V0cHV0OiBOZXVyb247XHJcbiAgcHJpdmF0ZSB3ZWlnaHQ6IG51bWJlcjtcclxuXHJcbiAgY29uc3RydWN0b3IoaW5wdXQ6IE5ldXJvbiwgb3V0cHV0OiBOZXVyb24sIHdlaWdodDogbnVtYmVyID0gTWF0aC5yYW5kb20oKSAqIDIpIHtcclxuICAgIHRoaXMuaW5wdXQgPSBpbnB1dDtcclxuICAgIHRoaXMub3V0cHV0ID0gb3V0cHV0O1xyXG4gICAgdGhpcy53ZWlnaHQgPSB3ZWlnaHQ7XHJcbiAgfVxyXG5cclxuICBwdWJsaWMgZ2V0V2VpZ2h0ZWRPdXRwdXQoKTogbnVtYmVyIHtcclxuICAgIHJldHVybiB0aGlzLmlucHV0LnZhbHVlICogdGhpcy53ZWlnaHRcclxuICB9XHJcbn1cclxuIiwiaW1wb3J0IHsgY29uZmlnIH0gZnJvbSBcIi4uL2NvbmZpZ1wiO1xyXG5pbXBvcnQgeyBWZWN0b3IyIH0gZnJvbSBcIi4uL3ZlY3RvcjJcIjtcclxuaW1wb3J0IHsgQmVoYXZpb3VyIH0gZnJvbSBcIi4vYmVoYXZpb3VyXCI7XHJcbmltcG9ydCB7IEJlaGF2aW91ckNvbnRyb2xsZWRDcmVhdHVyZSB9IGZyb20gXCIuL2JlaGF2aW91ckNvbnRyb2xsZWRDcmVhdHVyZVwiO1xyXG5pbXBvcnQgV2VpZ2h0ZWRWZWN0b3IyIGZyb20gXCIuLi93ZWlnaHRlZFZlY3RvcjJcIjtcclxuXHJcbmV4cG9ydCBjbGFzcyBCb2lkIGV4dGVuZHMgQmVoYXZpb3VyQ29udHJvbGxlZENyZWF0dXJlIHtcclxuICBwdWJsaWMgZGVmYXVsdENvbG91ciA9IGNvbmZpZy5ib2lkLmRlZmF1bHRDb2xvdXI7XHJcbiAgcHVibGljIG1heFNwZWVkID0gY29uZmlnLmJvaWQubWF4U3BlZWQ7XHJcbiAgcHVibGljIG1pblNwZWVkID0gY29uZmlnLmJvaWQubWluU3BlZWQ7XHJcbiAgcHVibGljIHNpemUgPSBjb25maWcuYm9pZC5zaXplO1xyXG4gIHB1YmxpYyBmZWFyQ291bnRkb3duID0gMDtcclxuICBwdWJsaWMgaGVhZGluZyA9IDIgKiBNYXRoLlBJICogTWF0aC5yYW5kb20oKTtcclxuICBwdWJsaWMgc3BlZWQgPSBjb25maWcuYm9pZC5tYXhTcGVlZDtcclxuICBwdWJsaWMgYmVoYXZpb3VycyA9IFtcclxuICAgIG5ldyBCZWhhdmlvdXIoKCkgPT4gdGhpcy5odW50ZXJFdmFzaW9uKCksICgpID0+IFwicmVkXCIpLFxyXG4gICAgbmV3IEJlaGF2aW91cigoKSA9PiB0aGlzLnJlcHVsc2lvbigpLCAoKSA9PiB0aGlzLmZlYXJDb3VudGRvd24gPyBcInJlZFwiIDogXCJvcmFuZ2VcIiksXHJcbiAgICBuZXcgQmVoYXZpb3VyKCgpID0+IHRoaXMuYWxpZ25tZW50KCksICgpID0+IHRoaXMuZmVhckNvdW50ZG93biA/IFwicmVkXCIgOiBcImJsdWVcIiksXHJcbiAgICBuZXcgQmVoYXZpb3VyKCgpID0+IHRoaXMuYXR0cmFjdGlvbigpLCAoKSA9PiB0aGlzLmZlYXJDb3VudGRvd24gPyBcInJlZFwiIDogXCJncmVlblwiKSxcclxuICBdO1xyXG5cclxuICBwdWJsaWMgaW5pdGlhbGl6ZVZlbG9jaXR5KCk6IHZvaWQge1xyXG4gICAgdGhpcy5oZWFkaW5nID0gTWF0aC5yYW5kb20oKSAqIDIgKiBNYXRoLlBJO1xyXG4gICAgdGhpcy5zcGVlZCA9IGNvbmZpZy5ib2lkLm1heFNwZWVkO1xyXG4gIH1cclxuXHJcbiAgcHVibGljIHVwZGF0ZSgpOiB2b2lkIHtcclxuICAgIGlmICh0aGlzLmZlYXJDb3VudGRvd24pIHtcclxuICAgICAgdGhpcy5mZWFyQ291bnRkb3duLS07XHJcbiAgICB9XHJcbiAgICB0aGlzLm1vdmUoKTtcclxuICB9XHJcblxyXG4gIHB1YmxpYyBodW50ZXJFdmFzaW9uKCk6IFdlaWdodGVkVmVjdG9yMiB7XHJcbiAgICBjb25zdCBodW50ZXJzSW5TaWdodCA9IHRoaXMuY3JlYXR1cmVTdG9yYWdlLmdldEh1bnRlcnNJbkFyZWEoXHJcbiAgICAgIHRoaXMucG9zaXRpb24sXHJcbiAgICAgIGNvbmZpZy5ib2lkLnZpc2lvblJhZGl1cyxcclxuICAgICk7XHJcbiAgICBpZiAoaHVudGVyc0luU2lnaHQubGVuZ3RoID09PSAwKSB7XHJcbiAgICAgIHJldHVybiBuZXcgV2VpZ2h0ZWRWZWN0b3IyKCk7XHJcbiAgICB9XHJcblxyXG4gICAgdGhpcy5mZWFyQ291bnRkb3duID0gY29uZmlnLmJvaWQuZmVhckR1cmF0aW9uO1xyXG5cclxuICAgIGNvbnN0IG5lYXJlc3RIdW50ZXIgPSB0aGlzLm5lYXJlc3RDcmVhdHVyZVRvUG9zaXRpb24oXHJcbiAgICAgIGh1bnRlcnNJblNpZ2h0LFxyXG4gICAgKTtcclxuXHJcbiAgICBjb25zdCB2ZWN0b3JUb01lID0gbmVhcmVzdEh1bnRlci5wb3NpdGlvbi52ZWN0b3JUbyh0aGlzLnBvc2l0aW9uKTtcclxuXHJcbiAgICByZXR1cm4gbmV3IFdlaWdodGVkVmVjdG9yMihcclxuICAgICAgdmVjdG9yVG9NZVxyXG4gICAgICAgIC5zY2FsZVRvTGVuZ3RoKHRoaXMubWF4U3BlZWQpLFxyXG4gICAgICAxMDAsXHJcbiAgICApO1xyXG4gIH1cclxuXHJcbiAgcHVibGljIHJlcHVsc2lvbigpOiBXZWlnaHRlZFZlY3RvcjIge1xyXG4gICAgY29uc3QgbmVpZ2hib3VycyA9IHRoaXMuY3JlYXR1cmVTdG9yYWdlLmdldEJvaWRzT3JQbGF5ZXJzSW5BcmVhKFxyXG4gICAgICB0aGlzLnBvc2l0aW9uLFxyXG4gICAgICBjb25maWcuYm9pZC5yZXB1bHNpb25SYWRpdXMsXHJcbiAgICApLmZpbHRlcigoYm9pZCkgPT4gYm9pZCAhPT0gdGhpcyk7XHJcbiAgICBpZiAobmVpZ2hib3Vycy5sZW5ndGggPT09IDApIHtcclxuICAgICAgcmV0dXJuIG5ldyBXZWlnaHRlZFZlY3RvcjIoKTtcclxuICAgIH1cclxuXHJcbiAgICBjb25zdCByZXB1bHNpb25WZWN0b3JzID0gbmVpZ2hib3Vyc1xyXG4gICAgLm1hcCgoY3JlYXR1cmUpID0+XHJcbiAgICAgIGNyZWF0dXJlLnBvc2l0aW9uLnZlY3RvclRvKHRoaXMucG9zaXRpb24pLFxyXG4gICAgKS5tYXAoKHZlY3RvcikgPT4gbmV3IFdlaWdodGVkVmVjdG9yMihcclxuICAgICAgdmVjdG9yLFxyXG4gICAgICB0aGlzLnJlcHVsc2lvbldlaWdodEZyb20odmVjdG9yKSxcclxuICAgICkpO1xyXG4gICAgY29uc3QgdG90YWxXZWlnaHQgPSByZXB1bHNpb25WZWN0b3JzLnJlZHVjZSgocGFydGlhbFdlaWdodCwgY3VycmVudCkgPT4ge1xyXG4gICAgICByZXR1cm4gcGFydGlhbFdlaWdodCArIGN1cnJlbnQud2VpZ2h0O1xyXG4gICAgfSwgMCk7XHJcblxyXG4gICAgcmV0dXJuIG5ldyBXZWlnaHRlZFZlY3RvcjIoXHJcbiAgICAgIFdlaWdodGVkVmVjdG9yMi5hdmVyYWdlKHJlcHVsc2lvblZlY3RvcnMpLFxyXG4gICAgICB0b3RhbFdlaWdodCxcclxuICAgICk7XHJcbiAgfVxyXG5cclxuICBwdWJsaWMgcmVwdWxzaW9uV2VpZ2h0RnJvbSh2ZWN0b3I6IFZlY3RvcjIpOiBudW1iZXIge1xyXG4gICAgY29uc3QgaW50cnVzaW9uID0gY29uZmlnLmJvaWQucmVwdWxzaW9uUmFkaXVzIC0gdmVjdG9yLmxlbmd0aDtcclxuICAgIGNvbnN0IG5vcm1hbGl6ZWRJbnRydXNpb24gPSBpbnRydXNpb24gLyBjb25maWcuYm9pZC5yZXB1bHNpb25SYWRpdXM7XHJcbiAgICBjb25zdCBzbW9vdGhlZEludHJ1c2lvbiA9IE1hdGgucG93KG5vcm1hbGl6ZWRJbnRydXNpb24sIDIpO1xyXG4gICAgcmV0dXJuIHNtb290aGVkSW50cnVzaW9uICogY29uZmlnLmJvaWQucmVwdWxzaW9uUmFkaXVzO1xyXG4gIH1cclxuXHJcbiAgcHVibGljIGFsaWdubWVudCgpOiBXZWlnaHRlZFZlY3RvcjIge1xyXG4gICAgY29uc3QgbmVpZ2hib3VycyA9IHRoaXMuY3JlYXR1cmVTdG9yYWdlLmdldEJvaWRzT3JQbGF5ZXJzSW5BcmVhKFxyXG4gICAgICB0aGlzLnBvc2l0aW9uLFxyXG4gICAgICBjb25maWcuYm9pZC5hbGlnbm1lbnRSYWRpdXMsXHJcbiAgICApLmZpbHRlcigoYm9pZCkgPT4gYm9pZCAhPT0gdGhpcyk7XHJcbiAgICBpZiAobmVpZ2hib3Vycy5sZW5ndGggPT09IDApIHtcclxuICAgICAgcmV0dXJuIG5ldyBXZWlnaHRlZFZlY3RvcjIoKTtcclxuICAgIH1cclxuICAgIGNvbnN0IGF2ZXJhZ2VBbGlnbm1lbnRWZWN0b3IgPSBWZWN0b3IyLmF2ZXJhZ2UoXHJcbiAgICAgIG5laWdoYm91cnMubWFwKChjcmVhdHVyZSkgPT4ge1xyXG4gICAgICAgIHJldHVybiBjcmVhdHVyZS52ZWxvY2l0eSgpO1xyXG4gICAgICB9KSxcclxuICAgICk7XHJcbiAgICByZXR1cm4gbmV3IFdlaWdodGVkVmVjdG9yMihcclxuICAgICAgdGhpcy5mZWFyQ291bnRkb3duID9cclxuICAgICAgICBhdmVyYWdlQWxpZ25tZW50VmVjdG9yLnNjYWxlVG9MZW5ndGgodGhpcy5tYXhTcGVlZCkgOlxyXG4gICAgICAgIGF2ZXJhZ2VBbGlnbm1lbnRWZWN0b3IsXHJcbiAgICAgIDE1LFxyXG4gICAgKTtcclxuICB9XHJcblxyXG4gIHB1YmxpYyBhdHRyYWN0aW9uKCk6IFdlaWdodGVkVmVjdG9yMiB7XHJcbiAgICBjb25zdCBuZWlnaGJvdXJzID0gdGhpcy5jcmVhdHVyZVN0b3JhZ2UuZ2V0Qm9pZHNPclBsYXllcnNJbkFyZWEoXHJcbiAgICAgIHRoaXMucG9zaXRpb24sXHJcbiAgICAgIGNvbmZpZy5ib2lkLmF0dHJhY3Rpb25SYWRpdXMsXHJcbiAgICApLmZpbHRlcigoYm9pZCkgPT4gYm9pZCAhPT0gdGhpcyk7XHJcbiAgICBpZiAobmVpZ2hib3Vycy5sZW5ndGggPT09IDApIHtcclxuICAgICAgcmV0dXJuIG5ldyBXZWlnaHRlZFZlY3RvcjIoKTtcclxuICAgIH1cclxuXHJcbiAgICBjb25zdCBuZWFyZXN0TmVpZ2hib3VyID0gdGhpcy5uZWFyZXN0Q3JlYXR1cmVUb1Bvc2l0aW9uKFxyXG4gICAgICBuZWlnaGJvdXJzLFxyXG4gICAgKTtcclxuXHJcbiAgICByZXR1cm4gbmV3IFdlaWdodGVkVmVjdG9yMihcclxuICAgICAgdGhpcy5wb3NpdGlvblxyXG4gICAgICAgIC52ZWN0b3JUbyhuZWFyZXN0TmVpZ2hib3VyLnBvc2l0aW9uKVxyXG4gICAgICAgIC5zY2FsZVRvTGVuZ3RoKFxyXG4gICAgICAgICAgdGhpcy5mZWFyQ291bnRkb3duXHJcbiAgICAgICAgICA/IHRoaXMubWF4U3BlZWRcclxuICAgICAgICAgIDogbmVhcmVzdE5laWdoYm91ci5zcGVlZCAqIDEuMSksXHJcbiAgICAgIDEwLFxyXG4gICAgKTtcclxuICB9XHJcblxyXG4gIHB1YmxpYyBkaWUoKTogdm9pZCB7XHJcbiAgICB0aGlzLmNyZWF0dXJlU3RvcmFnZS5yZW1vdmUodGhpcy5pZCk7XHJcbiAgfVxyXG59XHJcbiIsImltcG9ydCBXZWlnaHRlZFZlY3RvcjIgZnJvbSBcIi4uL3dlaWdodGVkVmVjdG9yMlwiO1xyXG5pbXBvcnQgeyBQcmlvcml0eSB9IGZyb20gXCIuL3ByaW9yaXR5XCI7XHJcblxyXG5leHBvcnQgY2xhc3MgQmVoYXZpb3VyIHtcclxuICBjb25zdHJ1Y3RvcihcclxuICAgIHB1YmxpYyBnZXRJZGVhbFdlaWdodGVkSGVhZGluZzogKCgpID0+IFdlaWdodGVkVmVjdG9yMiksXHJcbiAgICBwdWJsaWMgZ2V0Q29sb3I6ICgpID0+IHN0cmluZyxcclxuICApIHtcclxuICB9XHJcbiAgcHVibGljIGdldEN1cnJlbnRQcmlvcml0eSgpOiBQcmlvcml0eSB8IG51bGwge1xyXG4gICAgY29uc3Qgd2VpZ2h0ZWRIZWFkaW5nID0gdGhpcy5nZXRJZGVhbFdlaWdodGVkSGVhZGluZygpO1xyXG4gICAgaWYgKHdlaWdodGVkSGVhZGluZy53ZWlnaHQgPiAwKSB7XHJcbiAgICAgIHJldHVybiBuZXcgUHJpb3JpdHkoXHJcbiAgICAgICAgd2VpZ2h0ZWRIZWFkaW5nLFxyXG4gICAgICAgIHRoaXMuZ2V0Q29sb3IoKSxcclxuICAgICAgKTtcclxuICAgIH1cclxuICAgIHJldHVybiBudWxsO1xyXG4gIH1cclxufVxyXG4iLCJpbXBvcnQgV2VpZ2h0ZWRWZWN0b3IyIGZyb20gXCIuLi93ZWlnaHRlZFZlY3RvcjJcIjtcclxuXHJcbmV4cG9ydCBjbGFzcyBQcmlvcml0eSB7XHJcbiAgY29uc3RydWN0b3IoXHJcbiAgICBwdWJsaWMgd2VpZ2h0ZWRWZWN0b3I6IFdlaWdodGVkVmVjdG9yMixcclxuICAgIHB1YmxpYyBjb2xvcjogc3RyaW5nLFxyXG4gICkge31cclxufVxyXG4iLCJpbXBvcnQgeyBjb25maWcgfSBmcm9tIFwiLi4vY29uZmlnXCI7XHJcbmltcG9ydCB7IFZlY3RvcjIgfSBmcm9tIFwiLi4vdmVjdG9yMlwiO1xyXG5pbXBvcnQgeyBCZWhhdmlvdXIgfSBmcm9tIFwiLi9iZWhhdmlvdXJcIjtcclxuaW1wb3J0IHsgUHJpb3JpdHkgfSBmcm9tIFwiLi9wcmlvcml0eVwiO1xyXG5pbXBvcnQgeyBDcmVhdHVyZVN0b3JhZ2UgfSBmcm9tIFwiLi4vY3JlYXR1cmVTdG9yYWdlXCI7XHJcbmltcG9ydCB7IENyZWF0dXJlIH0gZnJvbSBcIi4vY3JlYXR1cmVcIjtcclxuaW1wb3J0IFdlaWdodGVkVmVjdG9yMiBmcm9tIFwiLi4vd2VpZ2h0ZWRWZWN0b3IyXCI7XHJcblxyXG5leHBvcnQgYWJzdHJhY3QgY2xhc3MgQmVoYXZpb3VyQ29udHJvbGxlZENyZWF0dXJlIGV4dGVuZHMgQ3JlYXR1cmUge1xyXG4gIHB1YmxpYyBhYnN0cmFjdCBkZWZhdWx0Q29sb3VyOiBzdHJpbmc7XHJcbiAgcHVibGljIGNvbG91ciA9IFwiYmxhY2tcIjtcclxuICBwdWJsaWMgYWJzdHJhY3QgYmVoYXZpb3VyczogQmVoYXZpb3VyW107XHJcbiAgcHVibGljIGFic3RyYWN0IG1heFNwZWVkOiBudW1iZXI7XHJcbiAgcHVibGljIGFic3RyYWN0IG1pblNwZWVkOiBudW1iZXI7XHJcbiAgcHVibGljIHBvc2l0aW9uOiBWZWN0b3IyO1xyXG4gIHB1YmxpYyBoaXN0b3J5OiBWZWN0b3IyW10gPSBbXTtcclxuXHJcbiAgY29uc3RydWN0b3IoXHJcbiAgICBwdWJsaWMgcmVhZG9ubHkgaWQ6IG51bWJlciA9IDAsXHJcbiAgICBwdWJsaWMgY3JlYXR1cmVTdG9yYWdlOiBDcmVhdHVyZVN0b3JhZ2UsXHJcbiAgICBwb3NpdGlvbj86IFZlY3RvcjIsXHJcbiAgKSB7XHJcbiAgICBzdXBlcigpO1xyXG4gICAgdGhpcy5wb3NpdGlvbiA9IHBvc2l0aW9uIHx8IG5ldyBWZWN0b3IyKFxyXG4gICAgICBNYXRoLnJhbmRvbSgpICogY29uZmlnLnNjcmVlbi5tYXhYLFxyXG4gICAgICBNYXRoLnJhbmRvbSgpICogY29uZmlnLnNjcmVlbi5tYXhZLFxyXG4gICAgKTtcclxuICAgIGZvciAobGV0IGkgPSAwOyBpIDwgY29uZmlnLmNyZWF0dXJlLm1heEhpc3Rvcnk7IGkrKykge1xyXG4gICAgICB0aGlzLmhpc3RvcnkucHVzaCh0aGlzLnBvc2l0aW9uKTtcclxuICAgIH1cclxuICAgIHRoaXMuaW5pdGlhbGl6ZVZlbG9jaXR5KCk7XHJcbiAgfVxyXG5cclxuICBwdWJsaWMgYWJzdHJhY3QgaW5pdGlhbGl6ZVZlbG9jaXR5KCk6IHZvaWQ7XHJcblxyXG4gIHB1YmxpYyBkaXN0YW5jZVRvQ3JlYXR1cmUoY3JlYXR1cmU6IENyZWF0dXJlKTogbnVtYmVyIHtcclxuICAgIHJldHVybiB0aGlzLnBvc2l0aW9uLmRpc3RhbmNlKGNyZWF0dXJlLnBvc2l0aW9uKTtcclxuICB9XHJcblxyXG4gIHB1YmxpYyBhYnN0cmFjdCB1cGRhdGUoKTogdm9pZDtcclxuXHJcbiAgcHVibGljIG1vdmUoKTogdm9pZCB7XHJcbiAgICB0aGlzLnVwZGF0ZUhpc3RvcnkoKTtcclxuICAgIHRoaXMucG9zaXRpb24gPSB0aGlzLnBvc2l0aW9uLmFkZCh0aGlzLnZlbG9jaXR5KCkpLm5vcm1hbGl6ZSgpO1xyXG4gICAgdGhpcy51cGRhdGVIZWFkaW5nKCk7XHJcbiAgfVxyXG5cclxuICBwdWJsaWMgdXBkYXRlSGVhZGluZygpOiB2b2lkIHtcclxuICAgIGNvbnN0IHByaW9yaXRpZXMgPSB0aGlzLmdldEN1cnJlbnRQcmlvcml0aWVzKCkuc29ydCgoYSwgYikgPT4gYi53ZWlnaHRlZFZlY3Rvci53ZWlnaHQgLSBhLndlaWdodGVkVmVjdG9yLndlaWdodCk7XHJcbiAgICBpZiAocHJpb3JpdGllcy5sZW5ndGggPT09IDApIHtcclxuICAgICAgdGhpcy5kZWZhdWx0QmVoYXZpb3VyKCk7XHJcbiAgICAgIHJldHVybjtcclxuICAgIH1cclxuICAgIHRoaXMuY29sb3VyID0gcHJpb3JpdGllc1swXS5jb2xvcjtcclxuICAgIHRoaXMudXBkYXRlSGVhZGluZ1Rvd2FyZHMoV2VpZ2h0ZWRWZWN0b3IyLmF2ZXJhZ2UocHJpb3JpdGllcy5tYXAoKHByaW9yaXR5KSA9PiBwcmlvcml0eS53ZWlnaHRlZFZlY3RvcikpKTtcclxuICB9XHJcblxyXG4gIHB1YmxpYyBnZXRDdXJyZW50UHJpb3JpdGllcygpOiBQcmlvcml0eVtdIHtcclxuICAgIHJldHVybiB0aGlzLmJlaGF2aW91cnNcclxuICAgICAgLm1hcCgoYmVoYXZpb3VyKSA9PiBiZWhhdmlvdXIuZ2V0Q3VycmVudFByaW9yaXR5KCkpXHJcbiAgICAgIC5maWx0ZXIoKHByaW9yaXR5KSA9PlxyXG4gICAgICAgIHByaW9yaXR5ICYmXHJcbiAgICAgICAgcHJpb3JpdHkud2VpZ2h0ZWRWZWN0b3IudmVjdG9yLmxlbmd0aCAmJiBwcmlvcml0eS53ZWlnaHRlZFZlY3Rvci53ZWlnaHQsXHJcbiAgICApIGFzIFByaW9yaXR5W107XHJcbiAgfVxyXG5cclxuICBwdWJsaWMgZGVmYXVsdEJlaGF2aW91cigpOiB2b2lkIHtcclxuICAgIHRoaXMuY29sb3VyID0gdGhpcy5kZWZhdWx0Q29sb3VyO1xyXG4gICAgdGhpcy5zcGVlZCA9IE1hdGgubWF4KHRoaXMudmVsb2NpdHkubGVuZ3RoIC0gY29uZmlnLmNyZWF0dXJlLmFjY2VsZXJhdGlvbiwgdGhpcy5taW5TcGVlZCk7XHJcbiAgICBjb25zdCByYW5kb21UdXJuID0gMiAqIGNvbmZpZy5jcmVhdHVyZS50dXJuaW5nTWF4ICogTWF0aC5yYW5kb20oKSAtIGNvbmZpZy5jcmVhdHVyZS50dXJuaW5nTWF4O1xyXG4gICAgdGhpcy5oZWFkaW5nID0gdGhpcy5oZWFkaW5nICsgcmFuZG9tVHVybjtcclxuICB9XHJcblxyXG4gIHB1YmxpYyB1cGRhdGVIZWFkaW5nVG93YXJkcyh2ZWN0b3I6IFZlY3RvcjIgfCBudWxsKTogdm9pZCB7XHJcbiAgICBpZiAoIXZlY3Rvcikge1xyXG4gICAgICByZXR1cm47XHJcbiAgICB9XHJcbiAgICBsZXQgbGltaXRlZFNwZWVkID0gTWF0aC5tYXgoTWF0aC5taW4odmVjdG9yLmxlbmd0aCwgdGhpcy5tYXhTcGVlZCksIHRoaXMubWluU3BlZWQpO1xyXG4gICAgbGltaXRlZFNwZWVkID0gTWF0aC5tYXgoXHJcbiAgICAgIE1hdGgubWluKFxyXG4gICAgICAgIGxpbWl0ZWRTcGVlZCxcclxuICAgICAgICB0aGlzLnNwZWVkICsgY29uZmlnLmNyZWF0dXJlLmFjY2VsZXJhdGlvbiksXHJcbiAgICAgIHRoaXMuc3BlZWQgLSBjb25maWcuY3JlYXR1cmUuYWNjZWxlcmF0aW9uKTtcclxuICAgIHRoaXMuc3BlZWQgPSBsaW1pdGVkU3BlZWQ7XHJcblxyXG4gICAgY29uc3QgaWRlYWxUdXJuID0gdGhpcy52ZWxvY2l0eSgpLmFuZ2xlVG8odmVjdG9yKTtcclxuICAgIGNvbnN0IGxpbWl0ZWRUdXJuID0gTWF0aC5tYXgoXHJcbiAgICAgIE1hdGgubWluKGlkZWFsVHVybiwgY29uZmlnLmNyZWF0dXJlLnR1cm5pbmdNYXgpLFxyXG4gICAgICAtY29uZmlnLmNyZWF0dXJlLnR1cm5pbmdNYXgsXHJcbiAgICApO1xyXG5cclxuICAgIHRoaXMuaGVhZGluZyA9IHRoaXMuaGVhZGluZ1xyXG4gICAgICArIGxpbWl0ZWRUdXJuXHJcbiAgICAgICsgMiAqIGNvbmZpZy5jcmVhdHVyZS5oZWFkaW5nRnV6eiAqIE1hdGgucmFuZG9tKCkgLSBjb25maWcuY3JlYXR1cmUuaGVhZGluZ0Z1eno7XHJcbiAgfVxyXG5cclxuICBwdWJsaWMgbmVhcmVzdENyZWF0dXJlVG9Qb3NpdGlvbihjcmVhdHVyZXM6IENyZWF0dXJlW10pOiBDcmVhdHVyZSB7XHJcbiAgICBpZiAoY3JlYXR1cmVzLmxlbmd0aCA9PT0gMCkge1xyXG4gICAgICB0aHJvdyBuZXcgRXJyb3IoXCJOZWFyZXN0IGNyZWF0dXJlIGlzIHVuZGVmaW5lZCBmb3IgemVybyBjcmVhdHVyZXNcIik7XHJcbiAgICB9XHJcbiAgICByZXR1cm4gY3JlYXR1cmVzLnJlZHVjZSgocHJldmlvdXMsIGN1cnJlbnQpID0+IHtcclxuICAgICAgY29uc3QgY3VycmVudERpc3RhbmNlID0gdGhpcy5wb3NpdGlvbi52ZWN0b3JUbyhjdXJyZW50LnBvc2l0aW9uKS5sZW5ndGg7XHJcbiAgICAgIGlmIChwcmV2aW91cy5kaXN0YW5jZSA+IGN1cnJlbnREaXN0YW5jZSkge1xyXG4gICAgICAgIHJldHVybiB7XHJcbiAgICAgICAgICBkaXN0YW5jZTogY3VycmVudERpc3RhbmNlLFxyXG4gICAgICAgICAgbmVhcmVzdDogY3VycmVudCxcclxuICAgICAgICB9O1xyXG4gICAgICB9XHJcbiAgICAgIHJldHVybiBwcmV2aW91cztcclxuICAgIH0sIHtcclxuICAgICAgZGlzdGFuY2U6IHRoaXMucG9zaXRpb24udmVjdG9yVG8oY3JlYXR1cmVzWzBdLnBvc2l0aW9uKS5sZW5ndGgsXHJcbiAgICAgIG5lYXJlc3Q6IGNyZWF0dXJlc1swXSxcclxuICAgIH0pLm5lYXJlc3Q7XHJcbiAgfVxyXG5cclxuICBwdWJsaWMgYWJzdHJhY3QgZGllKCk6IHZvaWQ7XHJcbn1cclxuIiwiaW1wb3J0IHsgVmVjdG9yMiB9IGZyb20gXCIuLi92ZWN0b3IyXCI7XHJcbmltcG9ydCB7IElucHV0SGFuZGxlciB9IGZyb20gXCIuLi9pbnB1dEhhbmRsZXJcIjtcclxuaW1wb3J0IHsgQ3JlYXR1cmUgfSBmcm9tIFwiLi9jcmVhdHVyZVwiO1xyXG5pbXBvcnQgeyBjb25maWcgfSBmcm9tIFwiLi4vY29uZmlnXCI7XHJcblxyXG5leHBvcnQgZGVmYXVsdCBjbGFzcyBQbGF5ZXJGaXNoIGV4dGVuZHMgQ3JlYXR1cmUge1xyXG4gIHB1YmxpYyBjb2xvdXIgPSBcImJsYWNrXCI7XHJcbiAgcHVibGljIHNpemUgPSA2O1xyXG4gIHB1YmxpYyBwb3NpdGlvbjogVmVjdG9yMjtcclxuICBwdWJsaWMgaGVhZGluZyA9IDA7XHJcbiAgcHVibGljIHNwZWVkID0gMDtcclxuICBwdWJsaWMgaGlzdG9yeTogVmVjdG9yMltdID0gW107XHJcblxyXG4gIGNvbnN0cnVjdG9yKFxyXG4gICAgcHVibGljIGlucHV0SGFuZGxlcjogSW5wdXRIYW5kbGVyLFxyXG4gICkge1xyXG4gICAgc3VwZXIoKTtcclxuICAgIHRoaXMucG9zaXRpb24gPSBuZXcgVmVjdG9yMihcclxuICAgICAgd2luZG93LmlubmVyV2lkdGggLyAyLFxyXG4gICAgICB3aW5kb3cuaW5uZXJIZWlnaHQgLyAyLFxyXG4gICAgKTtcclxuICAgIGZvciAobGV0IGkgPSAwOyBpIDwgY29uZmlnLmNyZWF0dXJlLm1heEhpc3Rvcnk7IGkrKykge1xyXG4gICAgICB0aGlzLmhpc3RvcnkucHVzaCh0aGlzLnBvc2l0aW9uKTtcclxuICAgIH1cclxuICB9XHJcblxyXG4gIHB1YmxpYyB1cGRhdGUoKTogdm9pZCB7XHJcbiAgICB0aGlzLnVwZGF0ZUhpc3RvcnkoKTtcclxuICAgIHRoaXMuaGVhZGluZyArPSB0aGlzLmlucHV0SGFuZGxlci5nZXRIZWFkaW5nVXBkYXRlKCk7XHJcbiAgICB0aGlzLnNwZWVkICs9IHRoaXMuaW5wdXRIYW5kbGVyLmdldFNwZWVkVXBkYXRlKCk7XHJcbiAgICB0aGlzLnNwZWVkID0gTWF0aC5tYXgoXHJcbiAgICAgIE1hdGgubWluKFxyXG4gICAgICAgIHRoaXMuc3BlZWQsXHJcbiAgICAgICAgY29uZmlnLnBsYXllci5tYXhTcGVlZCxcclxuICAgICAgKSxcclxuICAgICAgY29uZmlnLnBsYXllci5taW5TcGVlZCxcclxuICAgICk7XHJcbiAgICB0aGlzLnBvc2l0aW9uID0gdGhpcy5wb3NpdGlvblxyXG4gICAgICAuYWRkKHRoaXMudmVsb2NpdHkoKSkubm9ybWFsaXplKCk7XHJcbiAgfVxyXG59XHJcbiJdLCJzb3VyY2VSb290IjoiIn0=