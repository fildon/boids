(()=>{"use strict";var t={315:(t,e,n)=>{Object.defineProperty(e,"__esModule",{value:!0}),e.Behaviour=void 0;var o=n(183),i=function(){function t(t,e){this.getIdealWeightedHeading=t,this.getColor=e}return t.prototype.getCurrentPriority=function(){var t=this.getIdealWeightedHeading();return t.weight>0?new o.Priority(t,this.getColor()):null},t}();e.Behaviour=i},343:function(t,e,n){var o,i=this&&this.__extends||(o=function(t,e){return(o=Object.setPrototypeOf||{__proto__:[]}instanceof Array&&function(t,e){t.__proto__=e}||function(t,e){for(var n in e)Object.prototype.hasOwnProperty.call(e,n)&&(t[n]=e[n])})(t,e)},function(t,e){function n(){this.constructor=t}o(t,e),t.prototype=null===e?Object.create(e):(n.prototype=e.prototype,new n)});Object.defineProperty(e,"__esModule",{value:!0}),e.BehaviourControlledCreature=void 0;var r=n(527),a=n(350),u=n(969),s=n(540),c=function(t){function e(e,n,o){void 0===e&&(e=0);var i=t.call(this)||this;i.id=e,i.creatureStorage=n,i.colour="black",i.position=o||new a.Vector(Math.random()*r.config.screen.maxX,Math.random()*r.config.screen.maxY),i.history=[];for(var u=0;u<r.config.creature.maxHistory;u++)i.history.push(i.position);return i.initializeVelocity(),i}return i(e,t),e.prototype.distanceToCreature=function(t){return this.position.distance(t.position)},e.prototype.move=function(){this.updateHistory(),this.position=this.position.add(this.velocity()).normalize(),this.updateHeading()},e.prototype.updateHeading=function(){var t=this.getCurrentPriorities().sort((function(t,e){return e.weightedVector.weight-t.weightedVector.weight}));0!==t.length?(this.colour=t[0].color,this.updateHeadingTowards(s.default.average(t.map((function(t){return t.weightedVector}))))):this.defaultBehaviour()},e.prototype.getCurrentPriorities=function(){return this.behaviours.map((function(t){return t.getCurrentPriority()})).filter((function(t){return t&&t.weightedVector.vector.length&&t.weightedVector.weight}))},e.prototype.defaultBehaviour=function(){this.colour=this.defaultColour,this.speed=Math.max(this.velocity.length-r.config.creature.acceleration,this.minSpeed);var t=2*r.config.creature.turningMax*Math.random()-r.config.creature.turningMax;this.heading=this.heading+t},e.prototype.updateHeadingTowards=function(t){if(t){var e=Math.max(Math.min(t.length,this.maxSpeed),this.minSpeed);e=Math.max(Math.min(e,this.speed+r.config.creature.acceleration),this.speed-r.config.creature.acceleration),this.speed=e;var n=this.velocity().angleTo(t),o=Math.max(Math.min(n,r.config.creature.turningMax),-r.config.creature.turningMax);this.heading=this.heading+o+2*r.config.creature.headingFuzz*Math.random()-r.config.creature.headingFuzz}},e.prototype.nearestCreatureToPosition=function(t){var e=this;if(0===t.length)throw new Error("Nearest creature is undefined for zero creatures");return t.reduce((function(t,n){var o=e.position.vectorTo(n.position).length;return t.distance>o?{distance:o,nearest:n}:t}),{distance:this.position.vectorTo(t[0].position).length,nearest:t[0]}).nearest},e}(u.Creature);e.BehaviourControlledCreature=c},936:function(t,e,n){var o,i=this&&this.__extends||(o=function(t,e){return(o=Object.setPrototypeOf||{__proto__:[]}instanceof Array&&function(t,e){t.__proto__=e}||function(t,e){for(var n in e)Object.prototype.hasOwnProperty.call(e,n)&&(t[n]=e[n])})(t,e)},function(t,e){function n(){this.constructor=t}o(t,e),t.prototype=null===e?Object.create(e):(n.prototype=e.prototype,new n)});Object.defineProperty(e,"__esModule",{value:!0}),e.Boid=void 0;var r=n(527),a=n(350),u=n(315),s=n(343),c=n(540),h=function(t){function e(e,n,o){var i=t.call(this,e,n,o)||this;return i.defaultColour=r.config.boid.defaultColour,i.maxSpeed=r.config.boid.maxSpeed,i.minSpeed=r.config.boid.minSpeed,i.size=r.config.boid.size,i.fearCountdown=0,i.heading=2*Math.PI*Math.random(),i.speed=r.config.boid.maxSpeed,i.behaviours=[new u.Behaviour((function(){return i.hunterEvasion()}),(function(){return"red"})),new u.Behaviour((function(){return i.repulsion()}),(function(){return i.fearCountdown?"red":"orange"})),new u.Behaviour((function(){return i.alignment()}),(function(){return i.fearCountdown?"red":"blue"})),new u.Behaviour((function(){return i.attraction()}),(function(){return i.fearCountdown?"red":"green"}))],i}return i(e,t),e.prototype.initializeVelocity=function(){this.heading=2*Math.random()*Math.PI,this.speed=r.config.boid.maxSpeed},e.prototype.update=function(){this.fearCountdown&&this.fearCountdown--,this.move()},e.prototype.hunterEvasion=function(){var t=this.creatureStorage.getHuntersInArea(this.position,r.config.boid.visionRadius);if(0===t.length)return new c.default;this.fearCountdown=r.config.boid.fearDuration;var e=this.nearestCreatureToPosition(t).position.vectorTo(this.position);return new c.default(e.scaleToLength(this.maxSpeed),100)},e.prototype.repulsion=function(){var t=this,e=this.creatureStorage.getBoidsInArea(this.position,r.config.boid.repulsionRadius).filter((function(e){return e!==t}));if(0===e.length)return new c.default;var n=e.map((function(e){return e.position.vectorTo(t.position)})).map((function(e){return new c.default(e,t.repulsionWeightFrom(e))})),o=n.reduce((function(t,e){return t+e.weight}),0);return new c.default(c.default.average(n),o)},e.prototype.repulsionWeightFrom=function(t){var e=(r.config.boid.repulsionRadius-t.length)/r.config.boid.repulsionRadius;return Math.pow(e,2)*r.config.boid.repulsionRadius},e.prototype.alignment=function(){var t=this,e=this.creatureStorage.getBoidsInArea(this.position,r.config.boid.alignmentRadius).filter((function(e){return e!==t}));if(0===e.length)return new c.default;var n=a.Vector.average(e.map((function(t){return t.velocity()})));return new c.default(this.fearCountdown?n.scaleToLength(this.maxSpeed):n,15)},e.prototype.attraction=function(){var t=this,e=this.creatureStorage.getBoidsInArea(this.position,r.config.boid.attractionRadius).filter((function(e){return e!==t}));if(0===e.length)return new c.default;var n=this.nearestCreatureToPosition(e);return new c.default(this.position.vectorTo(n.position).scaleToLength(this.fearCountdown?this.maxSpeed:1.1*n.speed),10)},e.prototype.die=function(){this.creatureStorage.remove(this.id)},e}(s.BehaviourControlledCreature);e.Boid=h},969:(t,e,n)=>{Object.defineProperty(e,"__esModule",{value:!0}),e.Creature=void 0;var o=n(350),i=function(){function t(){}return t.prototype.distanceToCreature=function(t){return this.position.distance(t.position)},t.prototype.updateHistory=function(){this.history.push(this.position),this.history=this.history.slice(1)},t.prototype.velocity=function(){return o.Vector.fromHeadingAndSpeed(this.heading,this.speed)},t}();e.Creature=i},417:function(t,e,n){var o,i=this&&this.__extends||(o=function(t,e){return(o=Object.setPrototypeOf||{__proto__:[]}instanceof Array&&function(t,e){t.__proto__=e}||function(t,e){for(var n in e)Object.prototype.hasOwnProperty.call(e,n)&&(t[n]=e[n])})(t,e)},function(t,e){function n(){this.constructor=t}o(t,e),t.prototype=null===e?Object.create(e):(n.prototype=e.prototype,new n)});Object.defineProperty(e,"__esModule",{value:!0}),e.Hunter=void 0;var r=n(527),a=n(350),u=n(969),s=n(426),c=[1,3,2],h=function(t){function e(e,n,o){void 0===e&&(e=0);var i=t.call(this)||this;i.id=e,i.creatureStorage=n,i.colour=r.config.hunter.defaultColour,i.maxSpeed=r.config.hunter.maxSpeed,i.minSpeed=r.config.hunter.minSpeed,i.size=r.config.hunter.size,i.heading=0,i.speed=0,i.history=[],i.position=o||new a.Vector(Math.random()*r.config.screen.maxX,Math.random()*r.config.screen.maxY);for(var u=0;u<r.config.creature.maxHistory;u++)i.history.push(i.position);return i.initializeVelocity(),i.net=new s.Net(c),i}return i(e,t),e.prototype.initializeVelocity=function(){this.heading=2*Math.random()*Math.PI,this.speed=r.config.hunter.minSpeed},e.prototype.update=function(){this.eat(),this.move(),this.updateHistory()},e.prototype.eat=function(){this.creatureStorage.getBoidsInArea(this.position,r.config.hunter.eatRadius).forEach((function(t){return t.die()}))},e.prototype.move=function(){this.updateHistory(),this.position=this.position.add(this.velocity()).normalize();var t=this.getNeuralNetInputVector(),e=this.net.processInput(t);this.parseOutputToAction(e)},e.prototype.getNeuralNetInputVector=function(){var t=this,e=this.creatureStorage.getAllBoids().sort((function(e,n){return e.distanceToCreature(t)-n.distanceToCreature(t)}))[0],n=this.position.vectorTo(e.position);return[this.velocity().angleTo(n)/(2*Math.PI)+.5]},e.prototype.parseOutputToAction=function(t){var e=t[0],n=this.heading-r.config.creature.turningMax,o=2*r.config.creature.turningMax;this.heading=n+e*o;var i=t[1],a=this.speed-r.config.creature.acceleration+2*r.config.creature.acceleration*i;this.speed=Math.min(Math.max(a,0),r.config.hunter.maxSpeed)},e}(u.Creature);e.Hunter=h},183:(t,e)=>{Object.defineProperty(e,"__esModule",{value:!0}),e.Priority=void 0;e.Priority=function(t,e){this.weightedVector=t,this.color=e}},419:(t,e,n)=>{var o=n(101);document.addEventListener("DOMContentLoaded",(function(){(new o.SimulationManager).runSimulation()}),!1)},350:(t,e,n)=>{Object.defineProperty(e,"__esModule",{value:!0}),e.Vector=void 0;var o=n(527),i=function(){function t(t,e){void 0===t&&(t=0),void 0===e&&(e=0),this.x=t%o.config.screen.maxX,this.y=e%o.config.screen.maxY,this.length=Math.sqrt(Math.pow(this.x,2)+Math.pow(this.y,2))}return t.average=function(e){return 0===e.length?new t:e.reduce((function(t,e){return t.add(e)})).scaleByScalar(1/e.length)},t.fromHeadingAndSpeed=function(e,n){return n?new t(n*Math.cos(e),n*Math.sin(e)):new t(0,0)},t.prototype.unitVector=function(){return this.scaleByScalar(1/this.length)},t.prototype.distance=function(t){return this.vectorTo(t).length},t.prototype.vectorTo=function(e){var n=(e.x-this.x)%o.config.screen.maxX;n>o.config.screen.maxX/2&&(n-=o.config.screen.maxX),n<-o.config.screen.maxX/2&&(n+=o.config.screen.maxX);var i=(e.y-this.y)%o.config.screen.maxY;return i>o.config.screen.maxY/2&&(i-=o.config.screen.maxY),i<-o.config.screen.maxY/2&&(i+=o.config.screen.maxY),new t(n,i)},t.prototype.rotate=function(e){return new t(this.x*Math.cos(e)-this.y*Math.sin(e),this.x*Math.sin(e)+this.y*Math.cos(e))},t.prototype.angleTo=function(t){return Math.atan2(this.x*t.y-this.y*t.x,this.x*t.x+this.y*t.y)},t.prototype.add=function(e){return new t(this.x+e.x,this.y+e.y)},t.prototype.subtract=function(e){return new t(this.x-e.x,this.y-e.y)},t.prototype.equals=function(t){return this.x===t.x&&this.y===t.y},t.prototype.scaleByScalar=function(e){return new t(this.x*e,this.y*e)},t.prototype.scaleToLength=function(t){return this.length?this.scaleByScalar(t/this.length):this},t.prototype.isParallelTo=function(t){return this.x*t.y==this.y*t.x},t.prototype.normalize=function(){return 0<=this.x&&0<=this.y?this:new t((this.x%o.config.screen.maxX+o.config.screen.maxX)%o.config.screen.maxX,(this.y%o.config.screen.maxY+o.config.screen.maxY)%o.config.screen.maxY)},t.prototype.toHeading=function(){return Math.atan2(this.y,this.x)},t.prototype.toString=function(){return"["+this.x+", "+this.y+"]"},t}();e.Vector=i},540:(t,e,n)=>{Object.defineProperty(e,"__esModule",{value:!0});var o=n(350),i=function(){function t(t,e){void 0===t&&(t=new o.Vector),void 0===e&&(e=0),this.vector=t,this.weight=e}return t.average=function(t){if(0===t.length)return new o.Vector;var e=t.reduce((function(t,e){return{vector:t.vector.add(e.vector.scaleByScalar(e.weight)),weight:t.weight+e.weight}}),{vector:new o.Vector,weight:0});return e.vector.scaleByScalar(1/e.weight)},t}();e.default=i},507:(t,e)=>{Object.defineProperty(e,"__esModule",{value:!0}),e.Connection=void 0;var n=function(){function t(t,e,n){void 0===n&&(n=Math.random()),this.input=t,this.output=e,this.weight=n}return t.prototype.getNormalizedOutput=function(){return 2*this.input.value*this.weight},t}();e.Connection=n},986:(t,e,n)=>{Object.defineProperty(e,"__esModule",{value:!0}),e.Layer=void 0;var o=n(578),i=function(){function t(t){this.neurons=[];for(var e=0;e<t;e++)this.neurons.push(new o.Neuron)}return t.prototype.connectPriorLayer=function(t){this.neurons.forEach((function(e){t.neurons.forEach((function(t){o.Neuron.connectPair(t,e)}))}))},t.prototype.injectInputVector=function(t){for(var e=0;e<t.length;e++)this.neurons[e].value=t[e]},t.prototype.updateValues=function(){this.neurons.forEach((function(t){return t.updateValue()}))},t.prototype.outputVector=function(){return this.neurons.map((function(t){return t.value}))},t}();e.Layer=i},426:(t,e,n)=>{Object.defineProperty(e,"__esModule",{value:!0}),e.Net=void 0;var o=n(986),i=function(){function t(t){var e=new o.Layer(t[0]);this.layers=[e];for(var n=e,i=1;i<t.length;i++){var r=new o.Layer(t[i]);r.connectPriorLayer(n),this.layers.push(r),n=r}}return t.prototype.processInput=function(t){this.injectInputVectorToInputLayer(t);for(var e=1;e<this.layers.length;e++)this.layers[e].updateValues();return this.layers[this.layers.length-1].outputVector()},t.prototype.injectInputVectorToInputLayer=function(t){this.layers[0].injectInputVector(t)},t}();e.Net=i},578:(t,e,n)=>{Object.defineProperty(e,"__esModule",{value:!0}),e.Neuron=void 0;var o=n(507),i=function(){function t(){this.inputs=[],this.outputs=[],this.value=0}return t.prototype.connectOutput=function(t){this.outputs.push(t)},t.prototype.connectInput=function(t){this.inputs.push(t)},t.connectPair=function(t,e){var n=new o.Connection(t,e);t.connectOutput(n),e.connectInput(n)},t.prototype.updateValue=function(){this.step3Function()},t.prototype.step2Function=function(){var t=this.inputs.reduce((function(t,e){return t+e.getNormalizedOutput()}),0)/this.inputs.length;this.value=t<.5?0:1},t.prototype.step3Function=function(){var t=this.inputs.reduce((function(t,e){return t+e.getNormalizedOutput()}),0)/this.inputs.length;this.value=t<1/3?0:t<2/3?.5:1},t}();e.Neuron=i},527:(t,e)=>{Object.defineProperty(e,"__esModule",{value:!0}),e.config=void 0,e.config={boid:{alignmentRadius:40,alignmentRadiusDefault:40,attractionRadius:200,attractionRadiusDefault:200,defaultColour:"LightSteelBlue",fearDuration:30,maxSpeed:6,minSpeed:3,quantity:100,repulsionRadius:30,repulsionRadiusDefault:30,size:4,visionRadius:200},creature:{acceleration:.2,headingFuzz:.05,maxHistory:5,turningMax:.2},hunter:{defaultColour:"pink",eatRadius:20,maxSpeed:5,minSpeed:0,quantity:0,size:8,visionRadius:90},player:{maxSpeed:64,minSpeed:0},screen:{maxX:1e3,maxY:1e3}}},887:function(t,e,n){var o=this&&this.__read||function(t,e){var n="function"==typeof Symbol&&t[Symbol.iterator];if(!n)return t;var o,i,r=n.call(t),a=[];try{for(;(void 0===e||e-- >0)&&!(o=r.next()).done;)a.push(o.value)}catch(t){i={error:t}}finally{try{o&&!o.done&&(n=r.return)&&n.call(r)}finally{if(i)throw i.error}}return a},i=this&&this.__spread||function(){for(var t=[],e=0;e<arguments.length;e++)t=t.concat(o(arguments[e]));return t};Object.defineProperty(e,"__esModule",{value:!0}),e.CreatureStorage=void 0;var r=n(417),a=n(936),u=n(527),s=100,c=function(){function t(){this.nextId=0,this.creatures=new Map,this.bucketMap=[],this.bucketColumns=1,this.bucketRows=1,this.update()}return t.prototype.update=function(){var t=this;this.resetBucketMap(),this.creatures.forEach((function(e){var n=Math.min(Math.floor(e.position.x/s),t.bucketColumns-1),o=Math.min(Math.floor(e.position.y/s),t.bucketRows-1);t.bucketMap[n][o].push(e)}))},t.prototype.addHunter=function(t){var e=new r.Hunter(this.nextId,this,t);return this.creatures.set(this.nextId,e),this.nextId++,e},t.prototype.addBoid=function(t){var e=new a.Boid(this.nextId,this,t);return this.creatures.set(this.nextId,e),this.nextId++,e},t.prototype.getAllHunters=function(){return i(this.creatures.values()).filter((function(t){return t instanceof r.Hunter}))},t.prototype.getAllBoids=function(){return i(this.creatures.values()).filter((function(t){return t instanceof a.Boid}))},t.prototype.getAllCreatures=function(){return i(this.creatures.values())},t.prototype.getHuntersInArea=function(t,e){return this.getCreaturesInArea(t,e).filter((function(n){return n instanceof r.Hunter&&n.position.distance(t)<e}))},t.prototype.getBoidsInArea=function(t,e){return this.getCreaturesInArea(t,e).filter((function(n){return n instanceof a.Boid&&n.position.distance(t)<e}))},t.prototype.getCreaturesInArea=function(t,e){for(var n=Math.floor(t.x/s),o=Math.floor(t.y/s),i=Math.ceil(e/s),r=(n-i+this.bucketColumns)%this.bucketColumns,a=(n+i+1)%this.bucketColumns,u=(o-i+this.bucketRows)%this.bucketRows,c=(o+i+1)%this.bucketRows,h=[],p=r;p!==a;p++,p%=this.bucketColumns)for(var d=u;d!==c;d++,d%=this.bucketRows)h=h.concat(this.bucketMap[p][d]);return h},t.prototype.getHunterCount=function(){return this.getAllHunters().length},t.prototype.getBoidCount=function(){return this.getAllBoids().length},t.prototype.remove=function(t){this.creatures.delete(t)},t.prototype.resetBucketMap=function(){this.bucketMap=[],this.bucketColumns=Math.ceil(u.config.screen.maxX/s),this.bucketRows=Math.ceil(u.config.screen.maxY/s);for(var t=0;t<this.bucketColumns;t++){for(var e=[],n=0;n<this.bucketRows;n++)e.push([]);this.bucketMap.push(e)}},t}();e.CreatureStorage=c},101:function(t,e,n){var o=this&&this.__values||function(t){var e="function"==typeof Symbol&&Symbol.iterator,n=e&&t[e],o=0;if(n)return n.call(t);if(t&&"number"==typeof t.length)return{next:function(){return t&&o>=t.length&&(t=void 0),{value:t&&t[o++],done:!t}}};throw new TypeError(e?"Object is not iterable.":"Symbol.iterator is not defined.")};Object.defineProperty(e,"__esModule",{value:!0}),e.SimulationManager=void 0;var i=n(230),r=n(527),a=n(90),u=n(887),s=function(){function t(){var t=this;this.fpsTarget=60;var e=document.getElementById("canvas");if(!e)throw new Error("couldn't find 'canvas' on document");this.canvas=new i.Canvas(e),new a.InputHandler(this.canvas,(function(e){return t.createBoid(e)}),(function(e){return t.createHunter(e)})),this.creatureStorage=new u.CreatureStorage;for(var n=0;n<r.config.boid.quantity;n++)this.creatureStorage.addBoid();for(n=0;n<r.config.hunter.quantity;n++)this.creatureStorage.addHunter()}return t.prototype.createBoid=function(t){this.creatureStorage.addBoid(t)},t.prototype.createHunter=function(t){this.creatureStorage.addHunter(t)},t.prototype.runSimulation=function(){this.tick(performance.now(),0)},t.prototype.tick=function(t,e){var n=this,o=performance.now(),i=o-t;for(t=o,e+=i;e>=1e3/this.fpsTarget;)this.updateSimulation(),e-=1e3/this.fpsTarget;this.renderSimulation(),setTimeout((function(){return n.tick(t,e)}),0)},t.prototype.updateSimulation=function(){var t,e,n,i;this.creatureStorage.update();try{for(var r=o(this.creatureStorage.getAllBoids()),a=r.next();!a.done;a=r.next())a.value.update()}catch(e){t={error:e}}finally{try{a&&!a.done&&(e=r.return)&&e.call(r)}finally{if(t)throw t.error}}try{for(var u=o(this.creatureStorage.getAllHunters()),s=u.next();!s.done;s=u.next())s.value.update()}catch(t){n={error:t}}finally{try{s&&!s.done&&(i=u.return)&&i.call(u)}finally{if(n)throw n.error}}},t.prototype.renderSimulation=function(){this.canvas.draw(this.creatureStorage.getAllCreatures()),this.updateHunterCountDisplay(this.creatureStorage.getHunterCount()),this.updateBoidCountDisplay(this.creatureStorage.getBoidCount())},t.prototype.updateHunterCountDisplay=function(t){var e=document.getElementById("number-of-hunters");e&&(e.textContent=""+t)},t.prototype.updateBoidCountDisplay=function(t){var e=document.getElementById("number-of-boids");e&&(e.textContent=""+t)},t}();e.SimulationManager=s},230:(t,e,n)=>{Object.defineProperty(e,"__esModule",{value:!0}),e.Canvas=void 0;var o=n(527),i=n(350),r=n(577),a=function(){function t(t){this.fpsCounter=r.FpsCounter.getFpsCounter(),this.cameraPosition=new i.Vector(window.innerWidth,window.innerHeight),this.canvas=t;var e=this.canvas.getContext("2d");if(!e)throw new Error("could not get canvas context");this.ctx=e,this.canvas.height=o.config.screen.maxY,this.canvas.width=o.config.screen.maxX,this.setScreenSize()}return t.prototype.onclick=function(t){this.canvas.onclick=t},t.prototype.setScreenSize=function(){window&&(o.config.screen.maxX=window.innerWidth,o.config.screen.maxY=window.innerHeight),this.ctx.canvas.width=o.config.screen.maxX,this.ctx.canvas.height=o.config.screen.maxY},t.prototype.draw=function(t,e){var n=this;void 0===e&&(e=new i.Vector(window.innerWidth/2,window.innerHeight/2)),this.cameraPosition=e,this.ctx.clearRect(0,0,this.canvas.width,this.canvas.height),this.setScreenSize(),this.drawGhosts(t),t.forEach((function(t){n.drawCreature(t)})),this.fpsCounter.countFrame(),this.fpsCounter.updateFps()},t.prototype.drawGhosts=function(t){var e=this;if(o.config.creature.maxHistory)for(var n=function(n){t.forEach((function(t){e.drawGhost(t,n)}))},i=0;i<o.config.creature.maxHistory;i++)n(i)},t.prototype.drawGhost=function(t,e){this.drawCreatureBody(t,e)},t.prototype.drawCreature=function(t){this.drawCreatureBody(t),this.drawCreatureBeak(t)},t.prototype.getPositionInCameraSpace=function(t){return t.add(new i.Vector(window.innerWidth/2,window.innerHeight/2)).subtract(this.cameraPosition).normalize()},t.prototype.getPositionInWorldSpace=function(t){return t.subtract(new i.Vector(window.innerWidth/2,window.innerHeight/2)).add(this.cameraPosition).normalize()},t.prototype.drawCreatureBody=function(t,e){var n=e?t.history[e]:t.position;n=this.getPositionInCameraSpace(n);var i=e?t.size*((e+1)/(o.config.creature.maxHistory+1)):t.size;this.ctx.beginPath(),this.ctx.arc(n.x,n.y,i,0,2*Math.PI),this.ctx.fillStyle=t.colour,this.ctx.fill()},t.prototype.drawCreatureBeak=function(t){var e=this.getPositionInCameraSpace(t.position);this.ctx.beginPath(),this.ctx.arc(e.x+(t.size+1)*Math.cos(t.heading),e.y+(t.size+1)*Math.sin(t.heading),t.size/2,0,2*Math.PI),this.ctx.fillStyle="black",this.ctx.fill()},t}();e.Canvas=a},577:(t,e)=>{Object.defineProperty(e,"__esModule",{value:!0}),e.FpsCounter=void 0;var n=function(){function t(){this.fpsLabel=document.getElementById("fps-status"),this.recentFrames=[]}return t.getFpsCounter=function(){return this.fpsCounter||(this.fpsCounter=new t)},t.prototype.countFrame=function(){this.recentFrames.push(performance.now())},t.prototype.getFPS=function(){var t=performance.now();return this.recentFrames.filter((function(e){return e>=t-1e3})).length},t.prototype.updateFps=function(){this.fpsLabel.textContent=this.getFPS().toString()},t}();e.FpsCounter=n},90:(t,e,n)=>{Object.defineProperty(e,"__esModule",{value:!0}),e.InputHandler=void 0;var o=n(350),i=n(527),r=function(){function t(t,e,n){var o=this;this.canvas=t,this.createBoid=e,this.createHunter=n,this.separationLabel=document.getElementById("separation-status"),this.alignmentLabel=document.getElementById("alignment-status"),this.cohesionLabel=document.getElementById("cohesion-status"),this.canvas.onclick((function(t){o.handleMouseClick(t)})),window.addEventListener("keyup",(function(t){o.handleKeyUp(t)}))}return t.prototype.handleMouseClick=function(t){var e=this.canvas.getPositionInWorldSpace(new o.Vector(t.clientX,t.clientY));t.ctrlKey||t.metaKey?this.createHunter(e):this.createBoid(e)},t.prototype.handleKeyUp=function(t){switch(t.key){case"1":this.toggleSeparation();break;case"2":this.toggleAlignment();break;case"3":this.toggleCohesion();break;default:return}},t.prototype.toggleSeparation=function(){i.config.boid.repulsionRadius?(i.config.boid.repulsionRadius=0,this.separationLabel.textContent="OFF",this.separationLabel.style.color="red"):(i.config.boid.repulsionRadius=i.config.boid.repulsionRadiusDefault,this.separationLabel.textContent="ON",this.separationLabel.style.color="green")},t.prototype.toggleAlignment=function(){i.config.boid.alignmentRadius?(i.config.boid.alignmentRadius=0,this.alignmentLabel.textContent="OFF",this.alignmentLabel.style.color="red"):(i.config.boid.alignmentRadius=i.config.boid.alignmentRadiusDefault,this.alignmentLabel.textContent="ON",this.alignmentLabel.style.color="green")},t.prototype.toggleCohesion=function(){i.config.boid.attractionRadius?(i.config.boid.attractionRadius=0,this.cohesionLabel.textContent="OFF",this.cohesionLabel.style.color="red"):(i.config.boid.attractionRadius=i.config.boid.attractionRadiusDefault,this.cohesionLabel.textContent="ON",this.cohesionLabel.style.color="green")},t}();e.InputHandler=r}},e={};!function n(o){if(e[o])return e[o].exports;var i=e[o]={exports:{}};return t[o].call(i.exports,i,i.exports,n),i.exports}(419)})();
//# sourceMappingURL=bundle.js.map