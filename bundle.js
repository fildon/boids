!function(t){var e={};function i(n){if(e[n])return e[n].exports;var s=e[n]={i:n,l:!1,exports:{}};return t[n].call(s.exports,s,s.exports,i),s.l=!0,s.exports}i.m=t,i.c=e,i.d=function(t,e,n){i.o(t,e)||Object.defineProperty(t,e,{enumerable:!0,get:n})},i.r=function(t){"undefined"!=typeof Symbol&&Symbol.toStringTag&&Object.defineProperty(t,Symbol.toStringTag,{value:"Module"}),Object.defineProperty(t,"__esModule",{value:!0})},i.t=function(t,e){if(1&e&&(t=i(t)),8&e)return t;if(4&e&&"object"==typeof t&&t&&t.__esModule)return t;var n=Object.create(null);if(i.r(n),Object.defineProperty(n,"default",{enumerable:!0,value:t}),2&e&&"string"!=typeof t)for(var s in t)i.d(n,s,function(e){return t[e]}.bind(null,s));return n},i.n=function(t){var e=t&&t.__esModule?function(){return t.default}:function(){return t};return i.d(e,"a",e),e},i.o=function(t,e){return Object.prototype.hasOwnProperty.call(t,e)},i.p="",i(i.s=4)}([function(t,e,i){"use strict";Object.defineProperty(e,"__esModule",{value:!0}),e.config=void 0,e.config={boid:{alignmentRadius:40,alignmentRadiusDefault:40,attractionRadius:200,attractionRadiusDefault:200,defaultColour:"LightSteelBlue",fearDuration:30,maxSpeed:6,minSpeed:3,quantity:100,repulsionRadius:30,repulsionRadiusDefault:30,size:4,visionRadius:200},creature:{acceleration:.2,headingFuzz:.05,maxHistory:5,turningMax:.2},hunter:{defaultColour:"pink",eatRadius:20,maxSpeed:5,minSpeed:0,quantity:1,size:8,visionRadius:90},player:{maxSpeed:64,minSpeed:0},screen:{maxX:1e3,maxY:1e3}}},function(t,e,i){"use strict";Object.defineProperty(e,"__esModule",{value:!0}),e.Vector2=void 0;const n=i(0);class s{constructor(t=0,e=0){this.x=t%n.config.screen.maxX,this.y=e%n.config.screen.maxY,this.length=Math.sqrt(Math.pow(this.x,2)+Math.pow(this.y,2))}static average(t){if(0===t.length)return new s;return t.reduce((t,e)=>t.add(e)).scaleByScalar(1/t.length)}static fromHeadingAndSpeed(t,e){return e?new s(e*Math.cos(t),e*Math.sin(t)):new s(0,0)}unitVector(){return this.scaleByScalar(1/this.length)}distance(t){return this.vectorTo(t).length}vectorTo(t){let e=(t.x-this.x)%n.config.screen.maxX;e>n.config.screen.maxX/2&&(e-=n.config.screen.maxX),e<-n.config.screen.maxX/2&&(e+=n.config.screen.maxX);let i=(t.y-this.y)%n.config.screen.maxY;return i>n.config.screen.maxY/2&&(i-=n.config.screen.maxY),i<-n.config.screen.maxY/2&&(i+=n.config.screen.maxY),new s(e,i)}rotate(t){return new s(this.x*Math.cos(t)-this.y*Math.sin(t),this.x*Math.sin(t)+this.y*Math.cos(t))}angleTo(t){return Math.atan2(this.x*t.y-this.y*t.x,this.x*t.x+this.y*t.y)}add(t){return new s(this.x+t.x,this.y+t.y)}subtract(t){return new s(this.x-t.x,this.y-t.y)}equals(t){return this.x===t.x&&this.y===t.y}scaleByScalar(t){return new s(this.x*t,this.y*t)}scaleToLength(t){return this.length?this.scaleByScalar(t/this.length):this}isParallelTo(t){return this.x*t.y==this.y*t.x}normalize(){return 0<=this.x&&0<=this.y?this:new s((this.x%n.config.screen.maxX+n.config.screen.maxX)%n.config.screen.maxX,(this.y%n.config.screen.maxY+n.config.screen.maxY)%n.config.screen.maxY)}toHeading(){return Math.atan2(this.y,this.x)}toString(){return`[${this.x}, ${this.y}]`}}e.Vector2=s},function(t,e,i){"use strict";Object.defineProperty(e,"__esModule",{value:!0}),e.Creature=void 0;const n=i(1);e.Creature=class{distanceToCreature(t){return this.position.distance(t.position)}updateHistory(){this.history.push(this.position),this.history=this.history.slice(1)}velocity(){return n.Vector2.fromHeadingAndSpeed(this.heading,this.speed)}}},function(t,e,i){"use strict";Object.defineProperty(e,"__esModule",{value:!0});const n=i(1);e.default=class{constructor(t=new n.Vector2,e=0){this.vector=t,this.weight=e}static average(t){if(0===t.length)return new n.Vector2;const e=t.reduce((t,e)=>({vector:t.vector.add(e.vector.scaleByScalar(e.weight)),weight:t.weight+e.weight}),{vector:new n.Vector2,weight:0});return e.vector.scaleByScalar(1/e.weight)}}},function(t,e,i){"use strict";Object.defineProperty(e,"__esModule",{value:!0});const n=i(5);document.addEventListener("DOMContentLoaded",()=>{(new n.SimulationManager).runSimulation()},!1)},function(t,e,i){"use strict";Object.defineProperty(e,"__esModule",{value:!0}),e.SimulationManager=void 0;const n=i(6),s=i(0),o=i(8),r=i(9);e.SimulationManager=class{constructor(){this.fpsTarget=60;const t=document.getElementById("canvas");if(!t)throw new Error("couldn't find 'canvas' on document");this.canvas=new n.Canvas(t),this.inputHandler=new o.InputHandler(this.canvas,t=>this.createBoid(t),t=>this.createHunter(t)),this.creatureStorage=new r.CreatureStorage;for(let t=0;t<s.config.boid.quantity;t++)this.creatureStorage.addBoid();for(let t=0;t<s.config.hunter.quantity;t++)this.creatureStorage.addHunter()}createBoid(t){this.creatureStorage.addBoid(t)}createHunter(t){this.creatureStorage.addHunter(t)}runSimulation(){this.tick(performance.now(),0)}tick(t,e){const i=performance.now(),n=i-t;for(t=i,e+=n;e>=1e3/this.fpsTarget;)this.updateSimulation(),e-=1e3/this.fpsTarget;this.renderSimulation(),setTimeout(()=>this.tick(t,e),0)}updateSimulation(){this.creatureStorage.update();for(const t of this.creatureStorage.getAllBoids())t.update();for(const t of this.creatureStorage.getAllHunters())t.update()}renderSimulation(){this.canvas.draw(this.creatureStorage.getAllCreatures()),this.updateHunterCountDisplay(this.creatureStorage.getHunterCount()),this.updateBoidCountDisplay(this.creatureStorage.getBoidCount())}updateHunterCountDisplay(t){const e=document.getElementById("number-of-hunters");e&&(e.textContent=""+t)}updateBoidCountDisplay(t){const e=document.getElementById("number-of-boids");e&&(e.textContent=""+t)}}},function(t,e,i){"use strict";Object.defineProperty(e,"__esModule",{value:!0}),e.Canvas=void 0;const n=i(0),s=i(1),o=i(7);e.Canvas=class{constructor(t){this.fpsCounter=o.FpsCounter.getFpsCounter(),this.cameraPosition=new s.Vector2(window.innerWidth,window.innerHeight),this.canvas=t;const e=this.canvas.getContext("2d");if(!e)throw new Error("could not get canvas context");this.ctx=e,this.canvas.height=n.config.screen.maxY,this.canvas.width=n.config.screen.maxX,this.setScreenSize()}onclick(t){this.canvas.onclick=t}setScreenSize(){window&&(n.config.screen.maxX=window.innerWidth,n.config.screen.maxY=window.innerHeight),this.ctx.canvas.width=n.config.screen.maxX,this.ctx.canvas.height=n.config.screen.maxY}draw(t,e=new s.Vector2(window.innerWidth/2,window.innerHeight/2)){this.cameraPosition=e,this.ctx.clearRect(0,0,this.canvas.width,this.canvas.height),this.setScreenSize(),this.drawGhosts(t),t.forEach(t=>{this.drawCreature(t)}),this.fpsCounter.countFrame(),this.fpsCounter.updateFps()}drawGhosts(t){if(n.config.creature.maxHistory)for(let e=0;e<n.config.creature.maxHistory;e++)t.forEach(t=>{this.drawGhost(t,e)})}drawGhost(t,e){this.drawCreatureBody(t,e)}drawCreature(t){this.drawCreatureBody(t),this.drawCreatureBeak(t)}getPositionInCameraSpace(t){return t.add(new s.Vector2(window.innerWidth/2,window.innerHeight/2)).subtract(this.cameraPosition).normalize()}getPositionInWorldSpace(t){return t.subtract(new s.Vector2(window.innerWidth/2,window.innerHeight/2)).add(this.cameraPosition).normalize()}drawCreatureBody(t,e){let i=e?t.history[e]:t.position;i=this.getPositionInCameraSpace(i);const s=e?t.size*((e+1)/(n.config.creature.maxHistory+1)):t.size;this.ctx.beginPath(),this.ctx.arc(i.x,i.y,s,0,2*Math.PI),this.ctx.fillStyle=t.colour,this.ctx.fill()}drawCreatureBeak(t){const e=this.getPositionInCameraSpace(t.position);this.ctx.beginPath(),this.ctx.arc(e.x+(t.size+1)*Math.cos(t.heading),e.y+(t.size+1)*Math.sin(t.heading),t.size/2,0,2*Math.PI),this.ctx.fillStyle="black",this.ctx.fill()}}},function(t,e,i){"use strict";Object.defineProperty(e,"__esModule",{value:!0}),e.FpsCounter=void 0;class n{constructor(){this.SECOND=1e3,this.recentFrames=[],this.fpsLabel=document.getElementById("fps-status"),this.start=performance.now()}static getFpsCounter(){return this.fpsCounter||(this.fpsCounter=new n)}countFrame(){this.recentFrames.push(performance.now())}getFPS(){const t=performance.now(),e=t-this.start<this.SECOND?Math.floor(1e3/(t-this.start)):1;return this.recentFrames.filter(e=>e>=t-this.SECOND).length*e}updateFps(){this.fpsLabel.textContent=this.getFPS().toString()}}e.FpsCounter=n},function(t,e,i){"use strict";Object.defineProperty(e,"__esModule",{value:!0}),e.InputHandler=void 0;const n=i(1),s=i(0);e.InputHandler=class{constructor(t,e,i){this.canvas=t,this.createBoid=e,this.createHunter=i,this.separationLabel=document.getElementById("separation-status"),this.alignmentLabel=document.getElementById("alignment-status"),this.cohesionLabel=document.getElementById("cohesion-status"),this.canvas.onclick(t=>{this.handleMouseClick(t)}),window.addEventListener("keyup",t=>{this.handleKeyUp(t)})}handleMouseClick(t){const e=this.canvas.getPositionInWorldSpace(new n.Vector2(t.clientX,t.clientY));t.ctrlKey||t.metaKey?this.createHunter(e):this.createBoid(e)}handleKeyUp(t){switch(t.keyCode){case 49:this.toggleSeparation();break;case 50:this.toggleAlignment();break;case 51:this.toggleCohesion();break;default:return}}toggleSeparation(){s.config.boid.repulsionRadius?(s.config.boid.repulsionRadius=0,this.separationLabel.textContent="OFF",this.separationLabel.style.color="red"):(s.config.boid.repulsionRadius=s.config.boid.repulsionRadiusDefault,this.separationLabel.textContent="ON",this.separationLabel.style.color="green")}toggleAlignment(){s.config.boid.alignmentRadius?(s.config.boid.alignmentRadius=0,this.alignmentLabel.textContent="OFF",this.alignmentLabel.style.color="red"):(s.config.boid.alignmentRadius=s.config.boid.alignmentRadiusDefault,this.alignmentLabel.textContent="ON",this.alignmentLabel.style.color="green")}toggleCohesion(){s.config.boid.attractionRadius?(s.config.boid.attractionRadius=0,this.cohesionLabel.textContent="OFF",this.cohesionLabel.style.color="red"):(s.config.boid.attractionRadius=s.config.boid.attractionRadiusDefault,this.cohesionLabel.textContent="ON",this.cohesionLabel.style.color="green")}}},function(t,e,i){"use strict";Object.defineProperty(e,"__esModule",{value:!0}),e.CreatureStorage=void 0;const n=i(10),s=i(15),o=i(0);e.CreatureStorage=class{constructor(){this.nextId=0,this.creatures=new Map,this.bucketMap=[],this.bucketColumns=1,this.bucketRows=1,this.bucketSize=100,this.update()}update(){this.resetBucketMap(),this.creatures.forEach(t=>{const e=Math.min(Math.floor(t.position.x/this.bucketSize),this.bucketColumns-1),i=Math.min(Math.floor(t.position.y/this.bucketSize),this.bucketRows-1);this.bucketMap[e][i].push(t)})}addHunter(t){const e=new n.Hunter(this.nextId,this,t);return this.creatures.set(this.nextId,e),this.nextId++,e}addBoid(t){const e=new s.Boid(this.nextId,this,t);return this.creatures.set(this.nextId,e),this.nextId++,e}getAllHunters(){return[...this.creatures.values()].filter(t=>t instanceof n.Hunter)}getAllBoids(){return[...this.creatures.values()].filter(t=>t instanceof s.Boid)}getAllCreatures(){return[...this.creatures.values()]}getHuntersInArea(t,e){return this.getCreaturesInArea(t,e).filter(i=>i instanceof n.Hunter&&i.position.distance(t)<e)}getBoidsInArea(t,e){return this.getCreaturesInArea(t,e).filter(i=>i instanceof s.Boid&&i.position.distance(t)<e)}getCreaturesInArea(t,e){const i=Math.floor(t.x/this.bucketSize),n=Math.floor(t.y/this.bucketSize),s=Math.ceil(e/this.bucketSize),o=(i-s+this.bucketColumns)%this.bucketColumns,r=(i+s+1)%this.bucketColumns,a=(n-s+this.bucketRows)%this.bucketRows,c=(n+s+1)%this.bucketRows;let u=[];for(let t=o;t!==r;t++,t%=this.bucketColumns)for(let e=a;e!==c;e++,e%=this.bucketRows)u=u.concat(this.bucketMap[t][e]);return u}getHunterCount(){return this.getAllHunters().length}getBoidCount(){return this.getAllBoids().length}remove(t){this.creatures.delete(t)}resetBucketMap(){this.bucketMap=[],this.bucketColumns=Math.ceil(o.config.screen.maxX/this.bucketSize),this.bucketRows=Math.ceil(o.config.screen.maxY/this.bucketSize);for(let t=0;t<this.bucketColumns;t++){const t=[];for(let e=0;e<this.bucketRows;e++)t.push([]);this.bucketMap.push(t)}}}},function(t,e,i){"use strict";Object.defineProperty(e,"__esModule",{value:!0}),e.Hunter=void 0;const n=i(0),s=i(1),o=i(2),r=i(11);let a=(()=>{class t extends o.Creature{constructor(e=0,i,o){super(),this.id=e,this.creatureStorage=i,this.colour=n.config.hunter.defaultColour,this.maxSpeed=n.config.hunter.maxSpeed,this.minSpeed=n.config.hunter.minSpeed,this.size=n.config.hunter.size,this.heading=0,this.speed=0,this.history=[],this.position=o||new s.Vector2(Math.random()*n.config.screen.maxX,Math.random()*n.config.screen.maxY);for(let t=0;t<n.config.creature.maxHistory;t++)this.history.push(this.position);this.initializeVelocity(),this.net=new r.Net(t.netSizeSchema)}initializeVelocity(){this.heading=2*Math.random()*Math.PI,this.speed=n.config.hunter.minSpeed}update(){this.eat(),this.move(),this.updateHistory()}eat(){this.creatureStorage.getBoidsInArea(this.position,n.config.hunter.eatRadius).forEach(t=>t.die())}move(){this.updateHistory(),this.position=this.position.add(this.velocity()).normalize();const t=this.getNeuralNetInputVector(),e=this.net.processInput(t);this.parseOutputToAction(e)}getNeuralNetInputVector(){const t=this.creatureStorage.getAllBoids().sort((t,e)=>t.distanceToCreature(this)-e.distanceToCreature(this))[0],e=this.position.vectorTo(t.position);return[this.velocity().angleTo(e)/(2*Math.PI)+.5]}parseOutputToAction(t){const e=t[0],i=this.heading-n.config.creature.turningMax,s=2*n.config.creature.turningMax;this.heading=i+e*s;const o=t[1],r=this.speed-n.config.creature.acceleration+2*n.config.creature.acceleration*o;this.speed=Math.min(Math.max(r,0),n.config.hunter.maxSpeed)}}return t.netSizeSchema=[1,3,2],t})();e.Hunter=a},function(t,e,i){"use strict";Object.defineProperty(e,"__esModule",{value:!0}),e.Net=void 0;const n=i(12);e.Net=class{constructor(t){const e=new n.Layer(t[0]);this.layers=[e];let i=e;for(let e=1;e<t.length;e++){const s=new n.Layer(t[e]);s.connectPriorLayer(i),this.layers.push(s),i=s}}processInput(t){this.injectInputVectorToInputLayer(t);for(let t=1;t<this.layers.length;t++)this.layers[t].updateValues();return this.layers[this.layers.length-1].outputVector()}injectInputVectorToInputLayer(t){this.layers[0].injectInputVector(t)}}},function(t,e,i){"use strict";Object.defineProperty(e,"__esModule",{value:!0}),e.Layer=void 0;const n=i(13);e.Layer=class{constructor(t){this.neurons=[];for(let e=0;e<t;e++)this.neurons.push(new n.Neuron)}connectPriorLayer(t){this.neurons.forEach(e=>{t.neurons.forEach(t=>{n.Neuron.connectPair(t,e)})})}injectInputVector(t){for(let e=0;e<t.length;e++)this.neurons[e].value=t[e]}updateValues(){this.neurons.forEach(t=>t.updateValue())}outputVector(){return this.neurons.map(t=>t.value)}}},function(t,e,i){"use strict";Object.defineProperty(e,"__esModule",{value:!0}),e.Neuron=void 0;const n=i(14);e.Neuron=class{constructor(){this.inputs=[],this.outputs=[],this.value=0}connectOutput(t){this.outputs.push(t)}connectInput(t){this.inputs.push(t)}static connectPair(t,e){const i=new n.Connection(t,e);t.connectOutput(i),e.connectInput(i)}updateValue(){this.step3Function()}step2Function(){const t=this.inputs.reduce((t,e)=>t+e.getWeightedOutput(),0)/this.inputs.length;this.value=t<.5?0:1}step3Function(){const t=this.inputs.reduce((t,e)=>t+e.getWeightedOutput(),0)/this.inputs.length*2;this.value=t<1/3?0:t<2/3?.5:1}}},function(t,e,i){"use strict";Object.defineProperty(e,"__esModule",{value:!0}),e.Connection=void 0;e.Connection=class{constructor(t,e,i=Math.random()){this.input=t,this.output=e,this.weight=i}getWeightedOutput(){return this.input.value*this.weight}}},function(t,e,i){"use strict";Object.defineProperty(e,"__esModule",{value:!0}),e.Boid=void 0;const n=i(0),s=i(1),o=i(16),r=i(18),a=i(3);class c extends r.BehaviourControlledCreature{constructor(){super(...arguments),this.defaultColour=n.config.boid.defaultColour,this.maxSpeed=n.config.boid.maxSpeed,this.minSpeed=n.config.boid.minSpeed,this.size=n.config.boid.size,this.fearCountdown=0,this.heading=2*Math.PI*Math.random(),this.speed=n.config.boid.maxSpeed,this.behaviours=[new o.Behaviour(()=>this.hunterEvasion(),()=>"red"),new o.Behaviour(()=>this.repulsion(),()=>this.fearCountdown?"red":"orange"),new o.Behaviour(()=>this.alignment(),()=>this.fearCountdown?"red":"blue"),new o.Behaviour(()=>this.attraction(),()=>this.fearCountdown?"red":"green")]}initializeVelocity(){this.heading=2*Math.random()*Math.PI,this.speed=n.config.boid.maxSpeed}update(){this.fearCountdown&&this.fearCountdown--,this.move()}hunterEvasion(){const t=this.creatureStorage.getHuntersInArea(this.position,n.config.boid.visionRadius);if(0===t.length)return new a.default;this.fearCountdown=n.config.boid.fearDuration;const e=this.nearestCreatureToPosition(t).position.vectorTo(this.position);return new a.default(e.scaleToLength(this.maxSpeed),100)}repulsion(){const t=this.creatureStorage.getBoidsInArea(this.position,n.config.boid.repulsionRadius).filter(t=>t!==this);if(0===t.length)return new a.default;const e=t.map(t=>t.position.vectorTo(this.position)).map(t=>new a.default(t,this.repulsionWeightFrom(t))),i=e.reduce((t,e)=>t+e.weight,0);return new a.default(a.default.average(e),i)}repulsionWeightFrom(t){const e=(n.config.boid.repulsionRadius-t.length)/n.config.boid.repulsionRadius;return Math.pow(e,2)*n.config.boid.repulsionRadius}alignment(){const t=this.creatureStorage.getBoidsInArea(this.position,n.config.boid.alignmentRadius).filter(t=>t!==this);if(0===t.length)return new a.default;const e=s.Vector2.average(t.map(t=>t.velocity()));return new a.default(this.fearCountdown?e.scaleToLength(this.maxSpeed):e,15)}attraction(){const t=this.creatureStorage.getBoidsInArea(this.position,n.config.boid.attractionRadius).filter(t=>t!==this);if(0===t.length)return new a.default;const e=this.nearestCreatureToPosition(t);return new a.default(this.position.vectorTo(e.position).scaleToLength(this.fearCountdown?this.maxSpeed:1.1*e.speed),10)}die(){this.creatureStorage.remove(this.id)}}e.Boid=c},function(t,e,i){"use strict";Object.defineProperty(e,"__esModule",{value:!0}),e.Behaviour=void 0;const n=i(17);e.Behaviour=class{constructor(t,e){this.getIdealWeightedHeading=t,this.getColor=e}getCurrentPriority(){const t=this.getIdealWeightedHeading();return t.weight>0?new n.Priority(t,this.getColor()):null}}},function(t,e,i){"use strict";Object.defineProperty(e,"__esModule",{value:!0}),e.Priority=void 0;e.Priority=class{constructor(t,e){this.weightedVector=t,this.color=e}}},function(t,e,i){"use strict";Object.defineProperty(e,"__esModule",{value:!0}),e.BehaviourControlledCreature=void 0;const n=i(0),s=i(1),o=i(2),r=i(3);class a extends o.Creature{constructor(t=0,e,i){super(),this.id=t,this.creatureStorage=e,this.colour="black",this.history=[],this.position=i||new s.Vector2(Math.random()*n.config.screen.maxX,Math.random()*n.config.screen.maxY);for(let t=0;t<n.config.creature.maxHistory;t++)this.history.push(this.position);this.initializeVelocity()}distanceToCreature(t){return this.position.distance(t.position)}move(){this.updateHistory(),this.position=this.position.add(this.velocity()).normalize(),this.updateHeading()}updateHeading(){const t=this.getCurrentPriorities().sort((t,e)=>e.weightedVector.weight-t.weightedVector.weight);0!==t.length?(this.colour=t[0].color,this.updateHeadingTowards(r.default.average(t.map(t=>t.weightedVector)))):this.defaultBehaviour()}getCurrentPriorities(){return this.behaviours.map(t=>t.getCurrentPriority()).filter(t=>t&&t.weightedVector.vector.length&&t.weightedVector.weight)}defaultBehaviour(){this.colour=this.defaultColour,this.speed=Math.max(this.velocity.length-n.config.creature.acceleration,this.minSpeed);const t=2*n.config.creature.turningMax*Math.random()-n.config.creature.turningMax;this.heading=this.heading+t}updateHeadingTowards(t){if(!t)return;let e=Math.max(Math.min(t.length,this.maxSpeed),this.minSpeed);e=Math.max(Math.min(e,this.speed+n.config.creature.acceleration),this.speed-n.config.creature.acceleration),this.speed=e;const i=this.velocity().angleTo(t),s=Math.max(Math.min(i,n.config.creature.turningMax),-n.config.creature.turningMax);this.heading=this.heading+s+2*n.config.creature.headingFuzz*Math.random()-n.config.creature.headingFuzz}nearestCreatureToPosition(t){if(0===t.length)throw new Error("Nearest creature is undefined for zero creatures");return t.reduce((t,e)=>{const i=this.position.vectorTo(e.position).length;return t.distance>i?{distance:i,nearest:e}:t},{distance:this.position.vectorTo(t[0].position).length,nearest:t[0]}).nearest}}e.BehaviourControlledCreature=a}]);
//# sourceMappingURL=data:application/json;charset=utf-8;base64,eyJ2ZXJzaW9uIjozLCJzb3VyY2VzIjpbIndlYnBhY2s6Ly8vd2VicGFjay9ib290c3RyYXAiLCJ3ZWJwYWNrOi8vLy4vc3JjL3N0YXRlTWFuYWdlbWVudC9jb25maWcudHMiLCJ3ZWJwYWNrOi8vLy4vc3JjL2dlb21ldHJ5L3ZlY3RvcjIudHMiLCJ3ZWJwYWNrOi8vLy4vc3JjL2NyZWF0dXJlcy9jcmVhdHVyZS50cyIsIndlYnBhY2s6Ly8vLi9zcmMvZ2VvbWV0cnkvd2VpZ2h0ZWRWZWN0b3IyLnRzIiwid2VicGFjazovLy8uL3NyYy9lbnRyeS50cyIsIndlYnBhY2s6Ly8vLi9zcmMvc3RhdGVNYW5hZ2VtZW50L3NpbXVsYXRpb25NYW5hZ2VyLnRzIiwid2VicGFjazovLy8uL3NyYy91aS9jYW52YXMudHMiLCJ3ZWJwYWNrOi8vLy4vc3JjL3VpL2Zwc0NvdW50ZXIudHMiLCJ3ZWJwYWNrOi8vLy4vc3JjL3VpL2lucHV0SGFuZGxlci50cyIsIndlYnBhY2s6Ly8vLi9zcmMvc3RhdGVNYW5hZ2VtZW50L2NyZWF0dXJlU3RvcmFnZS50cyIsIndlYnBhY2s6Ly8vLi9zcmMvY3JlYXR1cmVzL2h1bnRlci50cyIsIndlYnBhY2s6Ly8vLi9zcmMvbmV1cmFsL25ldC50cyIsIndlYnBhY2s6Ly8vLi9zcmMvbmV1cmFsL2xheWVyLnRzIiwid2VicGFjazovLy8uL3NyYy9uZXVyYWwvbmV1cm9uLnRzIiwid2VicGFjazovLy8uL3NyYy9uZXVyYWwvY29ubmVjdGlvbi50cyIsIndlYnBhY2s6Ly8vLi9zcmMvY3JlYXR1cmVzL2JvaWQudHMiLCJ3ZWJwYWNrOi8vLy4vc3JjL2NyZWF0dXJlcy9iZWhhdmlvdXIudHMiLCJ3ZWJwYWNrOi8vLy4vc3JjL2NyZWF0dXJlcy9wcmlvcml0eS50cyIsIndlYnBhY2s6Ly8vLi9zcmMvY3JlYXR1cmVzL2JlaGF2aW91ckNvbnRyb2xsZWRDcmVhdHVyZS50cyJdLCJuYW1lcyI6WyJpbnN0YWxsZWRNb2R1bGVzIiwiX193ZWJwYWNrX3JlcXVpcmVfXyIsIm1vZHVsZUlkIiwiZXhwb3J0cyIsIm1vZHVsZSIsImkiLCJsIiwibW9kdWxlcyIsImNhbGwiLCJtIiwiYyIsImQiLCJuYW1lIiwiZ2V0dGVyIiwibyIsIk9iamVjdCIsImRlZmluZVByb3BlcnR5IiwiZW51bWVyYWJsZSIsImdldCIsInIiLCJTeW1ib2wiLCJ0b1N0cmluZ1RhZyIsInZhbHVlIiwidCIsIm1vZGUiLCJfX2VzTW9kdWxlIiwibnMiLCJjcmVhdGUiLCJrZXkiLCJiaW5kIiwibiIsIm9iamVjdCIsInByb3BlcnR5IiwicHJvdG90eXBlIiwiaGFzT3duUHJvcGVydHkiLCJwIiwicyIsImNvbmZpZyIsImJvaWQiLCJhbGlnbm1lbnRSYWRpdXMiLCJhbGlnbm1lbnRSYWRpdXNEZWZhdWx0IiwiYXR0cmFjdGlvblJhZGl1cyIsImF0dHJhY3Rpb25SYWRpdXNEZWZhdWx0IiwiZGVmYXVsdENvbG91ciIsImZlYXJEdXJhdGlvbiIsIm1heFNwZWVkIiwibWluU3BlZWQiLCJxdWFudGl0eSIsInJlcHVsc2lvblJhZGl1cyIsInJlcHVsc2lvblJhZGl1c0RlZmF1bHQiLCJzaXplIiwidmlzaW9uUmFkaXVzIiwiY3JlYXR1cmUiLCJhY2NlbGVyYXRpb24iLCJoZWFkaW5nRnV6eiIsIm1heEhpc3RvcnkiLCJ0dXJuaW5nTWF4IiwiaHVudGVyIiwiZWF0UmFkaXVzIiwicGxheWVyIiwic2NyZWVuIiwibWF4WCIsIm1heFkiLCJWZWN0b3IyIiwieCIsInkiLCJ0aGlzIiwibGVuZ3RoIiwiTWF0aCIsInNxcnQiLCJwb3ciLCJ2ZWN0b3JzIiwicmVkdWNlIiwicGFydGlhbFN1bSIsImN1cnJlbnQiLCJhZGQiLCJzY2FsZUJ5U2NhbGFyIiwiaGVhZGluZyIsInNwZWVkIiwiY29zIiwic2luIiwidiIsInZlY3RvclRvIiwidmVjdG9yIiwibmVhcmVzdFgiLCJuZWFyZXN0WSIsInJhZGlhbnMiLCJhdGFuMiIsInNjYWxlIiwicG9zaXRpb24iLCJkaXN0YW5jZSIsImhpc3RvcnkiLCJwdXNoIiwic2xpY2UiLCJmcm9tSGVhZGluZ0FuZFNwZWVkIiwid2VpZ2h0Iiwid2VpZ2h0ZWRWZWN0b3JzIiwid2VpZ2h0ZWRBdmVyYWdlIiwicGFydGlhbCIsImRvY3VtZW50IiwiYWRkRXZlbnRMaXN0ZW5lciIsIlNpbXVsYXRpb25NYW5hZ2VyIiwicnVuU2ltdWxhdGlvbiIsImZwc1RhcmdldCIsImNhbnZhc0VsZW1lbnQiLCJnZXRFbGVtZW50QnlJZCIsIkVycm9yIiwiY2FudmFzIiwiQ2FudmFzIiwiaW5wdXRIYW5kbGVyIiwiSW5wdXRIYW5kbGVyIiwiY3JlYXRlQm9pZCIsImNyZWF0ZUh1bnRlciIsImNyZWF0dXJlU3RvcmFnZSIsIkNyZWF0dXJlU3RvcmFnZSIsImFkZEJvaWQiLCJhZGRIdW50ZXIiLCJ0aWNrIiwicGVyZm9ybWFuY2UiLCJub3ciLCJwcmV2aW91c1RpbWUiLCJsYWciLCJjdXJyZW50VGltZSIsImVsYXBzZWQiLCJ1cGRhdGVTaW11bGF0aW9uIiwicmVuZGVyU2ltdWxhdGlvbiIsInNldFRpbWVvdXQiLCJ1cGRhdGUiLCJnZXRBbGxCb2lkcyIsImdldEFsbEh1bnRlcnMiLCJkcmF3IiwiZ2V0QWxsQ3JlYXR1cmVzIiwidXBkYXRlSHVudGVyQ291bnREaXNwbGF5IiwiZ2V0SHVudGVyQ291bnQiLCJ1cGRhdGVCb2lkQ291bnREaXNwbGF5IiwiZ2V0Qm9pZENvdW50IiwiY291bnQiLCJjb3VudERpc3BsYXkiLCJ0ZXh0Q29udGVudCIsImZwc0NvdW50ZXIiLCJGcHNDb3VudGVyIiwiZ2V0RnBzQ291bnRlciIsImNhbWVyYVBvc2l0aW9uIiwid2luZG93IiwiaW5uZXJXaWR0aCIsImlubmVySGVpZ2h0IiwiY29udGV4dCIsImdldENvbnRleHQiLCJjdHgiLCJoZWlnaHQiLCJ3aWR0aCIsInNldFNjcmVlblNpemUiLCJjYWxsYmFjayIsIm9uY2xpY2siLCJjcmVhdHVyZXMiLCJjbGVhclJlY3QiLCJkcmF3R2hvc3RzIiwiZm9yRWFjaCIsImRyYXdDcmVhdHVyZSIsImNvdW50RnJhbWUiLCJ1cGRhdGVGcHMiLCJkcmF3R2hvc3QiLCJoaXN0b3J5SW5kZXgiLCJkcmF3Q3JlYXR1cmVCb2R5IiwiZHJhd0NyZWF0dXJlQmVhayIsInN1YnRyYWN0Iiwibm9ybWFsaXplIiwiZ2V0UG9zaXRpb25JbkNhbWVyYVNwYWNlIiwicmFkaXVzIiwiYmVnaW5QYXRoIiwiYXJjIiwiUEkiLCJmaWxsU3R5bGUiLCJjb2xvdXIiLCJmaWxsIiwiU0VDT05EIiwicmVjZW50RnJhbWVzIiwiZnBzTGFiZWwiLCJzdGFydCIsIm11bHRpcGxpZXIiLCJmbG9vciIsImZpbHRlciIsImRyYXdUaW1lIiwiZ2V0RlBTIiwidG9TdHJpbmciLCJzZXBhcmF0aW9uTGFiZWwiLCJhbGlnbm1lbnRMYWJlbCIsImNvaGVzaW9uTGFiZWwiLCJldmVudCIsImhhbmRsZU1vdXNlQ2xpY2siLCJoYW5kbGVLZXlVcCIsIm1vdXNlUG9zaXRpb24iLCJnZXRQb3NpdGlvbkluV29ybGRTcGFjZSIsImNsaWVudFgiLCJjbGllbnRZIiwiY3RybEtleSIsIm1ldGFLZXkiLCJrZXlDb2RlIiwidG9nZ2xlU2VwYXJhdGlvbiIsInRvZ2dsZUFsaWdubWVudCIsInRvZ2dsZUNvaGVzaW9uIiwic3R5bGUiLCJjb2xvciIsIm5leHRJZCIsIk1hcCIsImJ1Y2tldE1hcCIsImJ1Y2tldENvbHVtbnMiLCJidWNrZXRSb3dzIiwiYnVja2V0U2l6ZSIsInJlc2V0QnVja2V0TWFwIiwiYnVja2V0WCIsIm1pbiIsImJ1Y2tldFkiLCJuZXdIdW50ZXIiLCJIdW50ZXIiLCJzZXQiLCJuZXdCb2lkIiwiQm9pZCIsInZhbHVlcyIsImNlbnRlciIsImdldENyZWF0dXJlc0luQXJlYSIsImJ1Y2tldFJhZGl1cyIsImNlaWwiLCJtaW5YIiwibWluWSIsImoiLCJjb25jYXQiLCJjcmVhdHVyZUlkIiwiZGVsZXRlIiwiYnVja2V0Um93IiwiQ3JlYXR1cmUiLCJpZCIsInN1cGVyIiwicmFuZG9tIiwiaW5pdGlhbGl6ZVZlbG9jaXR5IiwibmV0IiwiTmV0IiwibmV0U2l6ZVNjaGVtYSIsImVhdCIsIm1vdmUiLCJ1cGRhdGVIaXN0b3J5IiwiZ2V0Qm9pZHNJbkFyZWEiLCJwcmV5IiwiZGllIiwidmVsb2NpdHkiLCJpbnB1dFZlY3RvciIsImdldE5ldXJhbE5ldElucHV0VmVjdG9yIiwib3V0cHV0VmVjdG9yIiwicHJvY2Vzc0lucHV0IiwicGFyc2VPdXRwdXRUb0FjdGlvbiIsIm5lYXJlc3RCb2lkIiwic29ydCIsImEiLCJiIiwiZGlzdGFuY2VUb0NyZWF0dXJlIiwic2hvcnRlc3RQYXRoIiwiYW5nbGVUbyIsInJvdGF0aW9uRGVjaXNpb24iLCJtYXhpbXVtTGVmdCIsImZ1bGxUdXJuaW5nUmFuZ2UiLCJhY2NlbGVyYXRpb25EZWNpc2lvbiIsInRhcmdldFNwZWVkIiwibWF4IiwibGF5ZXJTaXplcyIsImlucHV0TGF5ZXIiLCJMYXllciIsImxheWVycyIsInByaW9yTGF5ZXIiLCJuZXh0TGF5ZXIiLCJjb25uZWN0UHJpb3JMYXllciIsImluamVjdElucHV0VmVjdG9yVG9JbnB1dExheWVyIiwidXBkYXRlVmFsdWVzIiwiaW5qZWN0SW5wdXRWZWN0b3IiLCJuZXVyb25zIiwiTmV1cm9uIiwibmV1cm9uIiwicHJpb3JOZXVyb24iLCJjb25uZWN0UGFpciIsInVwZGF0ZVZhbHVlIiwibWFwIiwiaW5wdXRzIiwib3V0cHV0cyIsImNvbm5lY3Rpb24iLCJwcmlvciIsIm5leHQiLCJDb25uZWN0aW9uIiwiY29ubmVjdE91dHB1dCIsImNvbm5lY3RJbnB1dCIsInN0ZXAzRnVuY3Rpb24iLCJhdmVyYWdlSW5wdXQiLCJwcmV2IiwiY3VyciIsImdldFdlaWdodGVkT3V0cHV0IiwiaW5wdXQiLCJvdXRwdXQiLCJCZWhhdmlvdXJDb250cm9sbGVkQ3JlYXR1cmUiLCJmZWFyQ291bnRkb3duIiwiYmVoYXZpb3VycyIsIkJlaGF2aW91ciIsImh1bnRlckV2YXNpb24iLCJyZXB1bHNpb24iLCJhbGlnbm1lbnQiLCJhdHRyYWN0aW9uIiwiaHVudGVyc0luU2lnaHQiLCJnZXRIdW50ZXJzSW5BcmVhIiwidmVjdG9yVG9NZSIsIm5lYXJlc3RDcmVhdHVyZVRvUG9zaXRpb24iLCJzY2FsZVRvTGVuZ3RoIiwibmVpZ2hib3VycyIsInJlcHVsc2lvblZlY3RvcnMiLCJyZXB1bHNpb25XZWlnaHRGcm9tIiwidG90YWxXZWlnaHQiLCJwYXJ0aWFsV2VpZ2h0IiwiYXZlcmFnZSIsIm5vcm1hbGl6ZWRJbnRydXNpb24iLCJhdmVyYWdlQWxpZ25tZW50VmVjdG9yIiwibmVhcmVzdE5laWdoYm91ciIsInJlbW92ZSIsImdldElkZWFsV2VpZ2h0ZWRIZWFkaW5nIiwiZ2V0Q29sb3IiLCJ3ZWlnaHRlZEhlYWRpbmciLCJQcmlvcml0eSIsIndlaWdodGVkVmVjdG9yIiwidXBkYXRlSGVhZGluZyIsInByaW9yaXRpZXMiLCJnZXRDdXJyZW50UHJpb3JpdGllcyIsInVwZGF0ZUhlYWRpbmdUb3dhcmRzIiwicHJpb3JpdHkiLCJkZWZhdWx0QmVoYXZpb3VyIiwiYmVoYXZpb3VyIiwiZ2V0Q3VycmVudFByaW9yaXR5IiwicmFuZG9tVHVybiIsImxpbWl0ZWRTcGVlZCIsImlkZWFsVHVybiIsImxpbWl0ZWRUdXJuIiwicHJldmlvdXMiLCJjdXJyZW50RGlzdGFuY2UiLCJuZWFyZXN0Il0sIm1hcHBpbmdzIjoiYUFDRSxJQUFJQSxFQUFtQixHQUd2QixTQUFTQyxFQUFvQkMsR0FHNUIsR0FBR0YsRUFBaUJFLEdBQ25CLE9BQU9GLEVBQWlCRSxHQUFVQyxRQUduQyxJQUFJQyxFQUFTSixFQUFpQkUsR0FBWSxDQUN6Q0csRUFBR0gsRUFDSEksR0FBRyxFQUNISCxRQUFTLElBVVYsT0FOQUksRUFBUUwsR0FBVU0sS0FBS0osRUFBT0QsUUFBU0MsRUFBUUEsRUFBT0QsUUFBU0YsR0FHL0RHLEVBQU9FLEdBQUksRUFHSkYsRUFBT0QsUUFLZkYsRUFBb0JRLEVBQUlGLEVBR3hCTixFQUFvQlMsRUFBSVYsRUFHeEJDLEVBQW9CVSxFQUFJLFNBQVNSLEVBQVNTLEVBQU1DLEdBQzNDWixFQUFvQmEsRUFBRVgsRUFBU1MsSUFDbENHLE9BQU9DLGVBQWViLEVBQVNTLEVBQU0sQ0FBRUss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QU9lLFNBQVNDLGNBQy9CYSxLQUFLWSxNQUFROFAsRUFFYixNQUFNQyxFQUFZM1EsS0FBS2tMLFdBQVdZLFFBQVE3SyxHQUNwQzJQLEVBQWMxUSxLQUFLa00sSUFDdkJsTSxLQUFLK0ksSUFBSTBILEVBQVcsRUFBQXhTLE9BQU9lLFNBQVNJLGFBQ25DLEVBQUFuQixPQUFPZSxTQUFTSSxZQUduQlUsS0FBS1csUUFBVVgsS0FBS1csUUFDaEJpUSxFQUNBLEVBQUksRUFBQXpTLE9BQU9lLFNBQVNFLFlBQWNjLEtBQUtxSyxTQUFXLEVBQUFwTSxPQUFPZSxTQUFTRSxZQUdqRSwwQkFBMEJvRyxHQUMvQixHQUF5QixJQUFyQkEsRUFBVXZGLE9BQ1osTUFBTSxJQUFJdUMsTUFBTSxvREFFbEIsT0FBT2dELEVBQVVsRixPQUFPLENBQUN1USxFQUFVclEsS0FDakMsTUFBTXNRLEVBQWtCOVEsS0FBS3VCLFNBQVNQLFNBQVNSLEVBQVFlLFVBQVV0QixPQUNqRSxPQUFJNFEsRUFBU3JQLFNBQVdzUCxFQUNmLENBQ0x0UCxTQUFVc1AsRUFDVkMsUUFBU3ZRLEdBR05xUSxHQUNOLENBQ0RyUCxTQUFVeEIsS0FBS3VCLFNBQVNQLFNBQVN3RSxFQUFVLEdBQUdqRSxVQUFVdEIsT0FDeEQ4USxRQUFTdkwsRUFBVSxLQUNsQnVMLFNBeEdQIiwiZmlsZSI6ImJ1bmRsZS5qcyIsInNvdXJjZXNDb250ZW50IjpbIiBcdC8vIFRoZSBtb2R1bGUgY2FjaGVcbiBcdHZhciBpbnN0YWxsZWRNb2R1bGVzID0ge307XG5cbiBcdC8vIFRoZSByZXF1aXJlIGZ1bmN0aW9uXG4gXHRmdW5jdGlvbiBfX3dlYnBhY2tfcmVxdWlyZV9fKG1vZHVsZUlkKSB7XG5cbiBcdFx0Ly8gQ2hlY2sgaWYgbW9kdWxlIGlzIGluIGNhY2hlXG4gXHRcdGlmKGluc3RhbGxlZE1vZHVsZXNbbW9kdWxlSWRdKSB7XG4gXHRcdFx0cmV0dXJuIGluc3RhbGxlZE1vZHVsZXNbbW9kdWxlSWRdLmV4cG9ydHM7XG4gXHRcdH1cbiBcdFx0Ly8gQ3JlYXRlIGEgbmV3IG1vZHVsZSAoYW5kIHB1dCBpdCBpbnRvIHRoZSBjYWNoZSlcbiBcdFx0dmFyIG1vZHVsZSA9IGluc3RhbGxlZE1vZHVsZXNbbW9kdWxlSWRdID0ge1xuIFx0XHRcdGk6IG1vZHVsZUlkLFxuIFx0XHRcdGw6IGZhbHNlLFxuIFx0XHRcdGV4cG9ydHM6IHt9XG4gXHRcdH07XG5cbiBcdFx0Ly8gRXhlY3V0ZSB0aGUgbW9kdWxlIGZ1bmN0aW9uXG4gXHRcdG1vZHVsZXNbbW9kdWxlSWRdLmNhbGwobW9kdWxlLmV4cG9ydHMsIG1vZHVsZSwgbW9kdWxlLmV4cG9ydHMsIF9fd2VicGFja19yZXF1aXJlX18pO1xuXG4gXHRcdC8vIEZsYWcgdGhlIG1vZHVsZSBhcyBsb2FkZWRcbiBcdFx0bW9kdWxlLmwgPSB0cnVlO1xuXG4gXHRcdC8vIFJldHVybiB0aGUgZXhwb3J0cyBvZiB0aGUgbW9kdWxlXG4gXHRcdHJldHVybiBtb2R1bGUuZXhwb3J0cztcbiBcdH1cblxuXG4gXHQvLyBleHBvc2UgdGhlIG1vZHVsZXMgb2JqZWN0IChfX3dlYnBhY2tfbW9kdWxlc19fKVxuIFx0X193ZWJwYWNrX3JlcXVpcmVfXy5tID0gbW9kdWxlcztcblxuIFx0Ly8gZXhwb3NlIHRoZSBtb2R1bGUgY2FjaGVcbiBcdF9fd2VicGFja19yZXF1aXJlX18uYyA9IGluc3RhbGxlZE1vZHVsZXM7XG5cbiBcdC8vIGRlZmluZSBnZXR0ZXIgZnVuY3Rpb24gZm9yIGhhcm1vbnkgZXhwb3J0c1xuIFx0X193ZWJwYWNrX3JlcXVpcmVfXy5kID0gZnVuY3Rpb24oZXhwb3J0cywgbmFtZSwgZ2V0dGVyKSB7XG4gXHRcdGlmKCFfX3dlYnBhY2tfcmVxdWlyZV9fLm8oZXhwb3J0cywgbmFtZSkpIHtcbiBcdFx0XHRPYmplY3QuZGVmaW5lUHJvcGVydHkoZXhwb3J0cywgbmFtZSwgeyBlbnVtZXJhYmxlOiB0cnVlLCBnZXQ6IGdldHRlciB9KTtcbiBcdFx0fVxuIFx0fTtcblxuIFx0Ly8gZGVmaW5lIF9fZXNNb2R1bGUgb24gZXhwb3J0c1xuIFx0X193ZWJwYWNrX3JlcXVpcmVfXy5yID0gZnVuY3Rpb24oZXhwb3J0cykge1xuIFx0XHRpZih0eXBlb2YgU3ltYm9sICE9PSAndW5kZWZpbmVkJyAmJiBTeW1ib2wudG9TdHJpbmdUYWcpIHtcbiBcdFx0XHRPYmplY3QuZGVmaW5lUHJvcGVydHkoZXhwb3J0cywgU3ltYm9sLnRvU3RyaW5nVGFnLCB7IHZhbHVlOiAnTW9kdWxlJyB9KTtcbiBcdFx0fVxuIFx0XHRPYmplY3QuZGVmaW5lUHJvcGVydHkoZXhwb3J0cywgJ19fZXNNb2R1bGUnLCB7IHZhbHVlOiB0cnVlIH0pO1xuIFx0fTtcblxuIFx0Ly8gY3JlYXRlIGEgZmFrZSBuYW1lc3BhY2Ugb2JqZWN0XG4gXHQvLyBtb2RlICYgMTogdmFsdWUgaXMgYSBtb2R1bGUgaWQsIHJlcXVpcmUgaXRcbiBcdC8vIG1vZGUgJiAyOiBtZXJnZSBhbGwgcHJvcGVydGllcyBvZiB2YWx1ZSBpbnRvIHRoZSBuc1xuIFx0Ly8gbW9kZSAmIDQ6IHJldHVybiB2YWx1ZSB3aGVuIGFscmVhZHkgbnMgb2JqZWN0XG4gXHQvLyBtb2RlICYgOHwxOiBiZWhhdmUgbGlrZSByZXF1aXJlXG4gXHRfX3dlYnBhY2tfcmVxdWlyZV9fLnQgPSBmdW5jdGlvbih2YWx1ZSwgbW9kZSkge1xuIFx0XHRpZihtb2RlICYgMSkgdmFsdWUgPSBfX3dlYnBhY2tfcmVxdWlyZV9fKHZhbHVlKTtcbiBcdFx0aWYobW9kZSAmIDgpIHJldHVybiB2YWx1ZTtcbiBcdFx0aWYoKG1vZGUgJiA0KSAmJiB0eXBlb2YgdmFsdWUgPT09ICdvYmplY3QnICYmIHZhbHVlICYmIHZhbHVlLl9fZXNNb2R1bGUpIHJldHVybiB2YWx1ZTtcbiBcdFx0dmFyIG5zID0gT2JqZWN0LmNyZWF0ZShudWxsKTtcbiBcdFx0X193ZWJwYWNrX3JlcXVpcmVfXy5yKG5zKTtcbiBcdFx0T2JqZWN0LmRlZmluZVByb3BlcnR5KG5zLCAnZGVmYXVsdCcsIHsgZW51bWVyYWJsZTogdHJ1ZSwgdmFsdWU6IHZhbHVlIH0pO1xuIFx0XHRpZihtb2RlICYgMiAmJiB0eXBlb2YgdmFsdWUgIT0gJ3N0cmluZycpIGZvcih2YXIga2V5IGluIHZhbHVlKSBfX3dlYnBhY2tfcmVxdWlyZV9fLmQobnMsIGtleSwgZnVuY3Rpb24oa2V5KSB7IHJldHVybiB2YWx1ZVtrZXldOyB9LmJpbmQobnVsbCwga2V5KSk7XG4gXHRcdHJldHVybiBucztcbiBcdH07XG5cbiBcdC8vIGdldERlZmF1bHRFeHBvcnQgZnVuY3Rpb24gZm9yIGNvbXBhdGliaWxpdHkgd2l0aCBub24taGFybW9ueSBtb2R1bGVzXG4gXHRfX3dlYnBhY2tfcmVxdWlyZV9fLm4gPSBmdW5jdGlvbihtb2R1bGUpIHtcbiBcdFx0dmFyIGdldHRlciA9IG1vZHVsZSAmJiBtb2R1bGUuX19lc01vZHVsZSA/XG4gXHRcdFx0ZnVuY3Rpb24gZ2V0RGVmYXVsdCgpIHsgcmV0dXJuIG1vZHVsZVsnZGVmYXVsdCddOyB9IDpcbiBcdFx0XHRmdW5jdGlvbiBnZXRNb2R1bGVFeHBvcnRzKCkgeyByZXR1cm4gbW9kdWxlOyB9O1xuIFx0XHRfX3dlYnBhY2tfcmVxdWlyZV9fLmQoZ2V0dGVyLCAnYScsIGdldHRlcik7XG4gXHRcdHJldHVybiBnZXR0ZXI7XG4gXHR9O1xuXG4gXHQvLyBPYmplY3QucHJvdG90eXBlLmhhc093blByb3BlcnR5LmNhbGxcbiBcdF9fd2VicGFja19yZXF1aXJlX18ubyA9IGZ1bmN0aW9uKG9iamVjdCwgcHJvcGVydHkpIHsgcmV0dXJuIE9iamVjdC5wcm90b3R5cGUuaGFzT3duUHJvcGVydHkuY2FsbChvYmplY3QsIHByb3BlcnR5KTsgfTtcblxuIFx0Ly8gX193ZWJwYWNrX3B1YmxpY19wYXRoX19cbiBcdF9fd2VicGFja19yZXF1aXJlX18ucCA9IFwiXCI7XG5cblxuIFx0Ly8gTG9hZCBlbnRyeSBtb2R1bGUgYW5kIHJldHVybiBleHBvcnRzXG4gXHRyZXR1cm4gX193ZWJwYWNrX3JlcXVpcmVfXyhfX3dlYnBhY2tfcmVxdWlyZV9fLnMgPSA0KTtcbiIsImV4cG9ydCBjb25zdCBjb25maWcgPSB7XHJcbiAgYm9pZDoge1xyXG4gICAgYWxpZ25tZW50UmFkaXVzOiA0MCxcclxuICAgIGFsaWdubWVudFJhZGl1c0RlZmF1bHQ6IDQwLFxyXG4gICAgYXR0cmFjdGlvblJhZGl1czogMjAwLFxyXG4gICAgYXR0cmFjdGlvblJhZGl1c0RlZmF1bHQ6IDIwMCxcclxuICAgIGRlZmF1bHRDb2xvdXI6IFwiTGlnaHRTdGVlbEJsdWVcIixcclxuICAgIGZlYXJEdXJhdGlvbjogMzAsXHJcbiAgICBtYXhTcGVlZDogNixcclxuICAgIG1pblNwZWVkOiAzLFxyXG4gICAgcXVhbnRpdHk6IDEwMCxcclxuICAgIHJlcHVsc2lvblJhZGl1czogMzAsXHJcbiAgICByZXB1bHNpb25SYWRpdXNEZWZhdWx0OiAzMCxcclxuICAgIHNpemU6IDQsXHJcbiAgICB2aXNpb25SYWRpdXM6IDIwMCxcclxuICB9LFxyXG4gIGNyZWF0dXJlOiB7XHJcbiAgICBhY2NlbGVyYXRpb246IDAuMixcclxuICAgIGhlYWRpbmdGdXp6OiAwLjA1LFxyXG4gICAgbWF4SGlzdG9yeTogNSxcclxuICAgIHR1cm5pbmdNYXg6IDAuMiwgLy8gcmFkaWFuc1xyXG4gIH0sXHJcbiAgaHVudGVyOiB7XHJcbiAgICBkZWZhdWx0Q29sb3VyOiBcInBpbmtcIixcclxuICAgIGVhdFJhZGl1czogMjAsXHJcbiAgICBtYXhTcGVlZDogNSxcclxuICAgIG1pblNwZWVkOiAwLFxyXG4gICAgcXVhbnRpdHk6IDEsXHJcbiAgICBzaXplOiA4LFxyXG4gICAgdmlzaW9uUmFkaXVzOiA5MCxcclxuICB9LFxyXG4gIHBsYXllcjoge1xyXG4gICAgbWF4U3BlZWQ6IDY0LFxyXG4gICAgbWluU3BlZWQ6IDAsXHJcbiAgfSxcclxuICBzY3JlZW46IHtcclxuICAgIC8vIG1heFggYW5kIG1heFkgYXJlIG92ZXJ3cml0dGVuIGF0IHJ1biB0aW1lXHJcbiAgICAvLyBhY2NvcmRpbmcgdG8gYWN0dWFsIHNjcmVlbiBzaXplXHJcbiAgICBtYXhYOiAxMDAwLFxyXG4gICAgbWF4WTogMTAwMCxcclxuICB9LFxyXG59O1xyXG4iLCJpbXBvcnQgeyBjb25maWcgfSBmcm9tIFwic3RhdGVNYW5hZ2VtZW50L2NvbmZpZ1wiO1xyXG5cclxuZXhwb3J0IGNsYXNzIFZlY3RvcjIge1xyXG4gIHB1YmxpYyBzdGF0aWMgYXZlcmFnZSh2ZWN0b3JzOiBWZWN0b3IyW10pOiBWZWN0b3IyIHtcclxuICAgIGlmICh2ZWN0b3JzLmxlbmd0aCA9PT0gMCkge1xyXG4gICAgICByZXR1cm4gbmV3IFZlY3RvcjIoKTtcclxuICAgIH1cclxuICAgIGNvbnN0IHRvdGFsVmVjdG9yID0gdmVjdG9ycy5yZWR1Y2UoKHBhcnRpYWxTdW0sIGN1cnJlbnQpID0+IHtcclxuICAgICAgcmV0dXJuIHBhcnRpYWxTdW0uYWRkKGN1cnJlbnQpO1xyXG4gICAgfSk7XHJcblxyXG4gICAgcmV0dXJuIHRvdGFsVmVjdG9yLnNjYWxlQnlTY2FsYXIoMSAvIHZlY3RvcnMubGVuZ3RoKTtcclxuICB9XHJcblxyXG4gIHB1YmxpYyBzdGF0aWMgZnJvbUhlYWRpbmdBbmRTcGVlZChoZWFkaW5nOiBudW1iZXIsIHNwZWVkOiBudW1iZXIpOiBWZWN0b3IyIHtcclxuICAgIGlmICghc3BlZWQpIHtcclxuICAgICAgcmV0dXJuIG5ldyBWZWN0b3IyKDAsIDApO1xyXG4gICAgfVxyXG4gICAgcmV0dXJuIG5ldyBWZWN0b3IyKFxyXG4gICAgICBzcGVlZCAqIE1hdGguY29zKGhlYWRpbmcpLFxyXG4gICAgICBzcGVlZCAqIE1hdGguc2luKGhlYWRpbmcpLFxyXG4gICAgKTtcclxuICB9XHJcblxyXG4gIHB1YmxpYyB4OiBudW1iZXI7XHJcbiAgcHVibGljIHk6IG51bWJlcjtcclxuICBwdWJsaWMgbGVuZ3RoOiBudW1iZXI7XHJcbiAgY29uc3RydWN0b3IoeCA9IDAsIHkgPSAwKSB7XHJcbiAgICB0aGlzLnggPSB4ICUgY29uZmlnLnNjcmVlbi5tYXhYO1xyXG4gICAgdGhpcy55ID0geSAlIGNvbmZpZy5zY3JlZW4ubWF4WTtcclxuICAgIHRoaXMubGVuZ3RoID0gTWF0aC5zcXJ0KE1hdGgucG93KHRoaXMueCwgMikgKyBNYXRoLnBvdyh0aGlzLnksIDIpKTtcclxuICB9XHJcblxyXG4gIHB1YmxpYyB1bml0VmVjdG9yKCk6IFZlY3RvcjIge1xyXG4gICAgcmV0dXJuIHRoaXMuc2NhbGVCeVNjYWxhcigxIC8gdGhpcy5sZW5ndGgpO1xyXG4gIH1cclxuXHJcbiAgcHVibGljIGRpc3RhbmNlKHY6IFZlY3RvcjIpOiBudW1iZXIge1xyXG4gICAgcmV0dXJuIHRoaXMudmVjdG9yVG8odikubGVuZ3RoO1xyXG4gIH1cclxuXHJcbiAgcHVibGljIHZlY3RvclRvKHZlY3RvcjogVmVjdG9yMik6IFZlY3RvcjIge1xyXG4gICAgbGV0IG5lYXJlc3RYID0gKHZlY3Rvci54IC0gdGhpcy54KSAlIGNvbmZpZy5zY3JlZW4ubWF4WDtcclxuICAgIGlmIChuZWFyZXN0WCA+IChjb25maWcuc2NyZWVuLm1heFggLyAyKSkge1xyXG4gICAgICBuZWFyZXN0WCAtPSBjb25maWcuc2NyZWVuLm1heFg7XHJcbiAgICB9XHJcbiAgICBpZiAobmVhcmVzdFggPCAtKGNvbmZpZy5zY3JlZW4ubWF4WCAvIDIpKSB7XHJcbiAgICAgIG5lYXJlc3RYICs9IGNvbmZpZy5zY3JlZW4ubWF4WDtcclxuICAgIH1cclxuICAgIGxldCBuZWFyZXN0WSA9ICh2ZWN0b3IueSAtIHRoaXMueSkgJSBjb25maWcuc2NyZWVuLm1heFk7XHJcbiAgICBpZiAobmVhcmVzdFkgPiAoY29uZmlnLnNjcmVlbi5tYXhZIC8gMikpIHtcclxuICAgICAgbmVhcmVzdFkgLT0gY29uZmlnLnNjcmVlbi5tYXhZO1xyXG4gICAgfVxyXG4gICAgaWYgKG5lYXJlc3RZIDwgLShjb25maWcuc2NyZWVuLm1heFkgLyAyKSkge1xyXG4gICAgICBuZWFyZXN0WSArPSBjb25maWcuc2NyZWVuLm1heFk7XHJcbiAgICB9XHJcbiAgICByZXR1cm4gbmV3IFZlY3RvcjIobmVhcmVzdFgsIG5lYXJlc3RZKTtcclxuICB9XHJcblxyXG4gIHB1YmxpYyByb3RhdGUocmFkaWFuczogbnVtYmVyKTogVmVjdG9yMiB7XHJcbiAgICByZXR1cm4gbmV3IFZlY3RvcjIoXHJcbiAgICAgIHRoaXMueCAqIE1hdGguY29zKHJhZGlhbnMpIC0gdGhpcy55ICogTWF0aC5zaW4ocmFkaWFucyksXHJcbiAgICAgIHRoaXMueCAqIE1hdGguc2luKHJhZGlhbnMpICsgdGhpcy55ICogTWF0aC5jb3MocmFkaWFucyksXHJcbiAgICApO1xyXG4gIH1cclxuXHJcbiAgLy8gTWVhc3VyZXMgYW50aSBjbG9ja3dpc2UgZnJvbSAtUEkgdG8gUElcclxuICBwdWJsaWMgYW5nbGVUbyh2OiBWZWN0b3IyKTogbnVtYmVyIHtcclxuICAgIHJldHVybiBNYXRoLmF0YW4yKFxyXG4gICAgICB0aGlzLnggKiB2LnkgLSB0aGlzLnkgKiB2LngsXHJcbiAgICAgIHRoaXMueCAqIHYueCArIHRoaXMueSAqIHYueSxcclxuICAgICk7XHJcbiAgfVxyXG5cclxuICBwdWJsaWMgYWRkKHY6IFZlY3RvcjIpOiBWZWN0b3IyIHtcclxuICAgIHJldHVybiBuZXcgVmVjdG9yMih0aGlzLnggKyB2LngsIHRoaXMueSArIHYueSk7XHJcbiAgfVxyXG5cclxuICBwdWJsaWMgc3VidHJhY3QodjogVmVjdG9yMik6IFZlY3RvcjIge1xyXG4gICAgcmV0dXJuIG5ldyBWZWN0b3IyKHRoaXMueCAtIHYueCwgdGhpcy55IC0gdi55KTtcclxuICB9XHJcblxyXG4gIHB1YmxpYyBlcXVhbHModjogVmVjdG9yMik6IGJvb2xlYW4ge1xyXG4gICAgcmV0dXJuIHRoaXMueCA9PT0gdi54ICYmIHRoaXMueSA9PT0gdi55O1xyXG4gIH1cclxuXHJcbiAgcHVibGljIHNjYWxlQnlTY2FsYXIoc2NhbGU6IG51bWJlcik6IFZlY3RvcjIge1xyXG4gICAgcmV0dXJuIG5ldyBWZWN0b3IyKHRoaXMueCAqIHNjYWxlLCB0aGlzLnkgKiBzY2FsZSk7XHJcbiAgfVxyXG5cclxuICBwdWJsaWMgc2NhbGVUb0xlbmd0aChsZW5ndGg6IG51bWJlcik6IFZlY3RvcjIge1xyXG4gICAgcmV0dXJuIHRoaXMubGVuZ3RoID9cclxuICAgICAgdGhpcy5zY2FsZUJ5U2NhbGFyKGxlbmd0aCAvIHRoaXMubGVuZ3RoKSA6XHJcbiAgICAgIHRoaXM7XHJcbiAgfVxyXG5cclxuICBwdWJsaWMgaXNQYXJhbGxlbFRvKHY6IFZlY3RvcjIpOiBib29sZWFuIHtcclxuICAgIHJldHVybiB0aGlzLnggKiB2LnkgPT09IHRoaXMueSAqIHYueDtcclxuICB9XHJcblxyXG4gIHB1YmxpYyBub3JtYWxpemUoKTogVmVjdG9yMiB7XHJcbiAgICBpZiAoMCA8PSB0aGlzLnggJiZcclxuICAgICAgMCA8PSB0aGlzLnkpIHtcclxuICAgICAgcmV0dXJuIHRoaXM7XHJcbiAgICB9XHJcbiAgICByZXR1cm4gbmV3IFZlY3RvcjIoXHJcbiAgICAgICgodGhpcy54ICUgY29uZmlnLnNjcmVlbi5tYXhYKSArIGNvbmZpZy5zY3JlZW4ubWF4WCkgJSBjb25maWcuc2NyZWVuLm1heFgsXHJcbiAgICAgICgodGhpcy55ICUgY29uZmlnLnNjcmVlbi5tYXhZKSArIGNvbmZpZy5zY3JlZW4ubWF4WSkgJSBjb25maWcuc2NyZWVuLm1heFksXHJcbiAgICApO1xyXG4gIH1cclxuXHJcbiAgcHVibGljIHRvSGVhZGluZygpOiBudW1iZXIge1xyXG4gICAgcmV0dXJuIE1hdGguYXRhbjIodGhpcy55LCB0aGlzLngpO1xyXG4gIH1cclxuXHJcbiAgcHVibGljIHRvU3RyaW5nKCk6IHN0cmluZyB7XHJcbiAgICByZXR1cm4gYFske3RoaXMueH0sICR7dGhpcy55fV1gO1xyXG4gIH1cclxufVxyXG4iLCJpbXBvcnQgeyBWZWN0b3IyIH0gZnJvbSBcImdlb21ldHJ5L3ZlY3RvcjJcIjtcclxuXHJcbmV4cG9ydCBhYnN0cmFjdCBjbGFzcyBDcmVhdHVyZSB7XHJcbiAgcHVibGljIGFic3RyYWN0IHBvc2l0aW9uOiBWZWN0b3IyO1xyXG4gIHB1YmxpYyBhYnN0cmFjdCBoZWFkaW5nOiBudW1iZXI7XHJcbiAgcHVibGljIGFic3RyYWN0IHNwZWVkOiBudW1iZXI7XHJcbiAgcHVibGljIGFic3RyYWN0IGhpc3Rvcnk6IFZlY3RvcjJbXTtcclxuICBwdWJsaWMgYWJzdHJhY3QgY29sb3VyOiBzdHJpbmc7XHJcbiAgcHVibGljIGFic3RyYWN0IHNpemU6IG51bWJlcjtcclxuXHJcbiAgcHVibGljIGRpc3RhbmNlVG9DcmVhdHVyZShjcmVhdHVyZTogQ3JlYXR1cmUpOiBudW1iZXIge1xyXG4gICAgcmV0dXJuIHRoaXMucG9zaXRpb24uZGlzdGFuY2UoY3JlYXR1cmUucG9zaXRpb24pO1xyXG4gIH1cclxuXHJcbiAgcHVibGljIGFic3RyYWN0IHVwZGF0ZSgpOiB2b2lkO1xyXG5cclxuICBwdWJsaWMgdXBkYXRlSGlzdG9yeSgpOiB2b2lkIHtcclxuICAgIHRoaXMuaGlzdG9yeS5wdXNoKHRoaXMucG9zaXRpb24pO1xyXG4gICAgdGhpcy5oaXN0b3J5ID0gdGhpcy5oaXN0b3J5LnNsaWNlKDEpO1xyXG4gIH1cclxuXHJcbiAgcHVibGljIHZlbG9jaXR5KCk6IFZlY3RvcjIge1xyXG4gICAgcmV0dXJuIFZlY3RvcjIuZnJvbUhlYWRpbmdBbmRTcGVlZCh0aGlzLmhlYWRpbmcsIHRoaXMuc3BlZWQpO1xyXG4gIH1cclxufVxyXG4iLCJpbXBvcnQgeyBWZWN0b3IyIH0gZnJvbSBcIi4vdmVjdG9yMlwiO1xyXG5cclxuZXhwb3J0IGRlZmF1bHQgY2xhc3MgV2VpZ2h0ZWRWZWN0b3IyIHtcclxuICBwdWJsaWMgc3RhdGljIGF2ZXJhZ2Uod2VpZ2h0ZWRWZWN0b3JzOiBXZWlnaHRlZFZlY3RvcjJbXSk6IFZlY3RvcjIge1xyXG4gICAgaWYgKHdlaWdodGVkVmVjdG9ycy5sZW5ndGggPT09IDApIHtcclxuICAgICAgcmV0dXJuIG5ldyBWZWN0b3IyKCk7XHJcbiAgICB9XHJcbiAgICBjb25zdCB3ZWlnaHRlZEF2ZXJhZ2UgPSB3ZWlnaHRlZFZlY3RvcnMucmVkdWNlKChwYXJ0aWFsLCBjdXJyZW50KSA9PiB7XHJcbiAgICAgIHJldHVybiB7XHJcbiAgICAgICAgdmVjdG9yOiBwYXJ0aWFsLnZlY3Rvci5hZGQoY3VycmVudC52ZWN0b3Iuc2NhbGVCeVNjYWxhcihjdXJyZW50LndlaWdodCkpLFxyXG4gICAgICAgIHdlaWdodDogcGFydGlhbC53ZWlnaHQgKyBjdXJyZW50LndlaWdodCxcclxuICAgICAgfTtcclxuICAgIH0sIHtcclxuICAgICAgdmVjdG9yOiBuZXcgVmVjdG9yMigpLFxyXG4gICAgICB3ZWlnaHQ6IDAsXHJcbiAgICB9KTtcclxuXHJcbiAgICByZXR1cm4gd2VpZ2h0ZWRBdmVyYWdlLnZlY3Rvci5zY2FsZUJ5U2NhbGFyKDEgLyB3ZWlnaHRlZEF2ZXJhZ2Uud2VpZ2h0KTtcclxuICB9XHJcblxyXG4gIGNvbnN0cnVjdG9yKFxyXG4gICAgcHVibGljIHZlY3RvcjogVmVjdG9yMiA9IG5ldyBWZWN0b3IyKCksXHJcbiAgICBwdWJsaWMgd2VpZ2h0OiBudW1iZXIgPSAwLFxyXG4gICkge31cclxufVxyXG4iLCJpbXBvcnQgeyBTaW11bGF0aW9uTWFuYWdlciB9IGZyb20gXCIuL3N0YXRlTWFuYWdlbWVudC9zaW11bGF0aW9uTWFuYWdlclwiO1xyXG5cclxuZG9jdW1lbnQuYWRkRXZlbnRMaXN0ZW5lcihcIkRPTUNvbnRlbnRMb2FkZWRcIiwgKCkgPT4ge1xyXG4gIG5ldyBTaW11bGF0aW9uTWFuYWdlcigpLnJ1blNpbXVsYXRpb24oKTtcclxufSwgZmFsc2UpO1xyXG4iLCJpbXBvcnQgeyBDYW52YXMgfSBmcm9tIFwidWkvY2FudmFzXCI7XHJcbmltcG9ydCB7IGNvbmZpZyB9IGZyb20gXCIuL2NvbmZpZ1wiO1xyXG5pbXBvcnQgeyBJbnB1dEhhbmRsZXIgfSBmcm9tIFwidWkvaW5wdXRIYW5kbGVyXCI7XHJcbmltcG9ydCB7IENyZWF0dXJlU3RvcmFnZSB9IGZyb20gXCIuL2NyZWF0dXJlU3RvcmFnZVwiO1xyXG5pbXBvcnQgeyBWZWN0b3IyIH0gZnJvbSBcImdlb21ldHJ5L3ZlY3RvcjJcIjtcclxuXHJcbmV4cG9ydCBjbGFzcyBTaW11bGF0aW9uTWFuYWdlciB7XHJcbiAgcHJpdmF0ZSBjYW52YXM6IENhbnZhcztcclxuICBwcml2YXRlIGlucHV0SGFuZGxlcjogSW5wdXRIYW5kbGVyO1xyXG4gIHByaXZhdGUgY3JlYXR1cmVTdG9yYWdlOiBDcmVhdHVyZVN0b3JhZ2U7XHJcbiAgcHJpdmF0ZSByZWFkb25seSBmcHNUYXJnZXQgPSA2MDtcclxuICBjb25zdHJ1Y3RvcigpIHtcclxuICAgIGNvbnN0IGNhbnZhc0VsZW1lbnQgPSBkb2N1bWVudC5nZXRFbGVtZW50QnlJZChcImNhbnZhc1wiKSBhcyBIVE1MQ2FudmFzRWxlbWVudDtcclxuICAgIGlmICghY2FudmFzRWxlbWVudCkge1xyXG4gICAgICB0aHJvdyBuZXcgRXJyb3IoXCJjb3VsZG4ndCBmaW5kICdjYW52YXMnIG9uIGRvY3VtZW50XCIpO1xyXG4gICAgfVxyXG4gICAgdGhpcy5jYW52YXMgPSBuZXcgQ2FudmFzKGNhbnZhc0VsZW1lbnQpO1xyXG4gICAgdGhpcy5pbnB1dEhhbmRsZXIgPSBuZXcgSW5wdXRIYW5kbGVyKFxyXG4gICAgICB0aGlzLmNhbnZhcyxcclxuICAgICAgKHBvc2l0aW9uOiBWZWN0b3IyKSA9PiB0aGlzLmNyZWF0ZUJvaWQocG9zaXRpb24pLFxyXG4gICAgICAocG9zaXRpb246IFZlY3RvcjIpID0+IHRoaXMuY3JlYXRlSHVudGVyKHBvc2l0aW9uKSxcclxuICAgICk7XHJcblxyXG4gICAgdGhpcy5jcmVhdHVyZVN0b3JhZ2UgPSBuZXcgQ3JlYXR1cmVTdG9yYWdlKCk7XHJcbiAgICBmb3IgKGxldCBpID0gMDsgaSA8IGNvbmZpZy5ib2lkLnF1YW50aXR5OyBpKyspIHtcclxuICAgICAgdGhpcy5jcmVhdHVyZVN0b3JhZ2UuYWRkQm9pZCgpO1xyXG4gICAgfVxyXG4gICAgZm9yIChsZXQgaSA9IDA7IGkgPCBjb25maWcuaHVudGVyLnF1YW50aXR5OyBpKyspIHtcclxuICAgICAgdGhpcy5jcmVhdHVyZVN0b3JhZ2UuYWRkSHVudGVyKCk7XHJcbiAgICB9XHJcbiAgfVxyXG5cclxuICBwdWJsaWMgY3JlYXRlQm9pZChwb3NpdGlvbj86IFZlY3RvcjIpOiB2b2lkIHtcclxuICAgIHRoaXMuY3JlYXR1cmVTdG9yYWdlLmFkZEJvaWQocG9zaXRpb24pO1xyXG4gIH1cclxuXHJcbiAgcHVibGljIGNyZWF0ZUh1bnRlcihwb3NpdGlvbj86IFZlY3RvcjIpOiB2b2lkIHtcclxuICAgIHRoaXMuY3JlYXR1cmVTdG9yYWdlLmFkZEh1bnRlcihwb3NpdGlvbik7XHJcbiAgfVxyXG5cclxuICBwdWJsaWMgcnVuU2ltdWxhdGlvbigpOiB2b2lkIHtcclxuICAgIHRoaXMudGljayhwZXJmb3JtYW5jZS5ub3coKSwgMCk7XHJcbiAgfVxyXG5cclxuICBwdWJsaWMgdGljayhwcmV2aW91c1RpbWU6IG51bWJlciwgbGFnOiBudW1iZXIpOiB2b2lkIHtcclxuICAgIGNvbnN0IGN1cnJlbnRUaW1lID0gcGVyZm9ybWFuY2Uubm93KCk7XHJcbiAgICBjb25zdCBlbGFwc2VkID0gY3VycmVudFRpbWUgLSBwcmV2aW91c1RpbWU7XHJcbiAgICBwcmV2aW91c1RpbWUgPSBjdXJyZW50VGltZTtcclxuICAgIGxhZyArPSBlbGFwc2VkO1xyXG5cclxuICAgIHdoaWxlIChsYWcgPj0gMTAwMCAvIHRoaXMuZnBzVGFyZ2V0KSB7XHJcbiAgICAgIHRoaXMudXBkYXRlU2ltdWxhdGlvbigpO1xyXG4gICAgICBsYWcgLT0gMTAwMCAvIHRoaXMuZnBzVGFyZ2V0O1xyXG4gICAgfVxyXG5cclxuICAgIHRoaXMucmVuZGVyU2ltdWxhdGlvbigpO1xyXG4gICAgc2V0VGltZW91dCgoKSA9PiB0aGlzLnRpY2socHJldmlvdXNUaW1lLCBsYWcpLCAwKTtcclxuICB9XHJcblxyXG4gIHB1YmxpYyB1cGRhdGVTaW11bGF0aW9uKCk6IHZvaWQge1xyXG4gICAgdGhpcy5jcmVhdHVyZVN0b3JhZ2UudXBkYXRlKCk7XHJcbiAgICBmb3IgKGNvbnN0IGJvaWQgb2YgdGhpcy5jcmVhdHVyZVN0b3JhZ2UuZ2V0QWxsQm9pZHMoKSkge1xyXG4gICAgICBib2lkLnVwZGF0ZSgpO1xyXG4gICAgfVxyXG4gICAgZm9yIChjb25zdCBodW50ZXIgb2YgdGhpcy5jcmVhdHVyZVN0b3JhZ2UuZ2V0QWxsSHVudGVycygpKSB7XHJcbiAgICAgIGh1bnRlci51cGRhdGUoKTtcclxuICAgIH1cclxuICB9XHJcblxyXG4gIHB1YmxpYyByZW5kZXJTaW11bGF0aW9uKCk6IHZvaWQge1xyXG4gICAgdGhpcy5jYW52YXMuZHJhdyhcclxuICAgICAgdGhpcy5jcmVhdHVyZVN0b3JhZ2UuZ2V0QWxsQ3JlYXR1cmVzKCksXHJcbiAgICApO1xyXG4gICAgdGhpcy51cGRhdGVIdW50ZXJDb3VudERpc3BsYXkoXHJcbiAgICAgIHRoaXMuY3JlYXR1cmVTdG9yYWdlLmdldEh1bnRlckNvdW50KCksXHJcbiAgICApO1xyXG4gICAgdGhpcy51cGRhdGVCb2lkQ291bnREaXNwbGF5KFxyXG4gICAgICB0aGlzLmNyZWF0dXJlU3RvcmFnZS5nZXRCb2lkQ291bnQoKSxcclxuICAgICk7XHJcbiAgfVxyXG5cclxuICBwcml2YXRlIHVwZGF0ZUh1bnRlckNvdW50RGlzcGxheShjb3VudDogbnVtYmVyKSB7XHJcbiAgICBjb25zdCBjb3VudERpc3BsYXkgPSBkb2N1bWVudC5nZXRFbGVtZW50QnlJZChcIm51bWJlci1vZi1odW50ZXJzXCIpO1xyXG4gICAgaWYgKGNvdW50RGlzcGxheSkge1xyXG4gICAgICBjb3VudERpc3BsYXkudGV4dENvbnRlbnQgPSBgJHtjb3VudH1gO1xyXG4gICAgfVxyXG4gIH1cclxuXHJcbiAgcHJpdmF0ZSB1cGRhdGVCb2lkQ291bnREaXNwbGF5KGNvdW50OiBudW1iZXIpIHtcclxuICAgIGNvbnN0IGNvdW50RGlzcGxheSA9IGRvY3VtZW50LmdldEVsZW1lbnRCeUlkKFwibnVtYmVyLW9mLWJvaWRzXCIpO1xyXG4gICAgaWYgKGNvdW50RGlzcGxheSkge1xyXG4gICAgICBjb3VudERpc3BsYXkudGV4dENvbnRlbnQgPSBgJHtjb3VudH1gO1xyXG4gICAgfVxyXG4gIH1cclxufVxyXG4iLCJpbXBvcnQgeyBjb25maWcgfSBmcm9tIFwic3RhdGVNYW5hZ2VtZW50L2NvbmZpZ1wiO1xyXG5pbXBvcnQgeyBDcmVhdHVyZSB9IGZyb20gXCJjcmVhdHVyZXMvY3JlYXR1cmVcIjtcclxuaW1wb3J0IHsgVmVjdG9yMiB9IGZyb20gXCJnZW9tZXRyeS92ZWN0b3IyXCI7XHJcbmltcG9ydCB7IEZwc0NvdW50ZXIgfSBmcm9tIFwiLi9mcHNDb3VudGVyXCI7XHJcblxyXG5leHBvcnQgY2xhc3MgQ2FudmFzIHtcclxuICBwcml2YXRlIHJlYWRvbmx5IGZwc0NvdW50ZXI6IEZwc0NvdW50ZXI7XHJcbiAgcHJpdmF0ZSBjYW1lcmFQb3NpdGlvbjogVmVjdG9yMjtcclxuICBwcml2YXRlIGNhbnZhczogSFRNTENhbnZhc0VsZW1lbnQ7XHJcbiAgcHJpdmF0ZSBjdHg6IENhbnZhc1JlbmRlcmluZ0NvbnRleHQyRDtcclxuXHJcbiAgY29uc3RydWN0b3IoY2FudmFzRWxlbWVudDogSFRNTENhbnZhc0VsZW1lbnQpIHtcclxuICAgIHRoaXMuZnBzQ291bnRlciA9IEZwc0NvdW50ZXIuZ2V0RnBzQ291bnRlcigpO1xyXG4gICAgdGhpcy5jYW1lcmFQb3NpdGlvbiA9IG5ldyBWZWN0b3IyKHdpbmRvdy5pbm5lcldpZHRoLCB3aW5kb3cuaW5uZXJIZWlnaHQpO1xyXG4gICAgdGhpcy5jYW52YXMgPSBjYW52YXNFbGVtZW50O1xyXG4gICAgY29uc3QgY29udGV4dCA9IHRoaXMuY2FudmFzLmdldENvbnRleHQoXCIyZFwiKTtcclxuICAgIGlmICghY29udGV4dCkge1xyXG4gICAgICB0aHJvdyBuZXcgRXJyb3IoXCJjb3VsZCBub3QgZ2V0IGNhbnZhcyBjb250ZXh0XCIpO1xyXG4gICAgfSBlbHNlIHtcclxuICAgICAgdGhpcy5jdHggPSBjb250ZXh0O1xyXG4gICAgfVxyXG4gICAgdGhpcy5jYW52YXMuaGVpZ2h0ID0gY29uZmlnLnNjcmVlbi5tYXhZO1xyXG4gICAgdGhpcy5jYW52YXMud2lkdGggPSBjb25maWcuc2NyZWVuLm1heFg7XHJcblxyXG4gICAgdGhpcy5zZXRTY3JlZW5TaXplKCk7XHJcbiAgfVxyXG5cclxuICBwdWJsaWMgb25jbGljayhjYWxsYmFjazogKChldjogTW91c2VFdmVudCkgPT4gdm9pZCkpOiB2b2lkIHtcclxuICAgIHRoaXMuY2FudmFzLm9uY2xpY2sgPSBjYWxsYmFjaztcclxuICB9XHJcblxyXG4gIHB1YmxpYyBzZXRTY3JlZW5TaXplKCk6IHZvaWQge1xyXG4gICAgaWYgKHdpbmRvdykge1xyXG4gICAgICBjb25maWcuc2NyZWVuLm1heFggPSB3aW5kb3cuaW5uZXJXaWR0aDtcclxuICAgICAgY29uZmlnLnNjcmVlbi5tYXhZID0gd2luZG93LmlubmVySGVpZ2h0O1xyXG4gICAgfVxyXG4gICAgdGhpcy5jdHguY2FudmFzLndpZHRoID0gY29uZmlnLnNjcmVlbi5tYXhYO1xyXG4gICAgdGhpcy5jdHguY2FudmFzLmhlaWdodCA9IGNvbmZpZy5zY3JlZW4ubWF4WTtcclxuICB9XHJcblxyXG4gIHB1YmxpYyBkcmF3KFxyXG4gICAgY3JlYXR1cmVzOiBDcmVhdHVyZVtdLFxyXG4gICAgY2FtZXJhUG9zaXRpb246IFZlY3RvcjIgPSBuZXcgVmVjdG9yMih3aW5kb3cuaW5uZXJXaWR0aCAvIDIsIHdpbmRvdy5pbm5lckhlaWdodCAvIDIpLFxyXG4gICk6IHZvaWQge1xyXG4gICAgdGhpcy5jYW1lcmFQb3NpdGlvbiA9IGNhbWVyYVBvc2l0aW9uO1xyXG4gICAgdGhpcy5jdHguY2xlYXJSZWN0KDAsIDAsIHRoaXMuY2FudmFzLndpZHRoLCB0aGlzLmNhbnZhcy5oZWlnaHQpO1xyXG4gICAgdGhpcy5zZXRTY3JlZW5TaXplKCk7XHJcbiAgICB0aGlzLmRyYXdHaG9zdHMoY3JlYXR1cmVzKTtcclxuICAgIGNyZWF0dXJlcy5mb3JFYWNoKChjcmVhdHVyZSkgPT4ge1xyXG4gICAgICB0aGlzLmRyYXdDcmVhdHVyZShjcmVhdHVyZSk7XHJcbiAgICB9KTtcclxuXHJcbiAgICB0aGlzLmZwc0NvdW50ZXIuY291bnRGcmFtZSgpO1xyXG4gICAgdGhpcy5mcHNDb3VudGVyLnVwZGF0ZUZwcygpO1xyXG4gIH1cclxuXHJcbiAgcHVibGljIGRyYXdHaG9zdHMoY3JlYXR1cmVzOiBDcmVhdHVyZVtdKTogdm9pZCB7XHJcbiAgICBpZiAoIWNvbmZpZy5jcmVhdHVyZS5tYXhIaXN0b3J5KSB7XHJcbiAgICAgIHJldHVybjtcclxuICAgIH1cclxuICAgIGZvciAobGV0IGkgPSAwOyBpIDwgY29uZmlnLmNyZWF0dXJlLm1heEhpc3Rvcnk7IGkrKykge1xyXG4gICAgICBjcmVhdHVyZXMuZm9yRWFjaCgoY3JlYXR1cmUpID0+IHtcclxuICAgICAgICB0aGlzLmRyYXdHaG9zdChjcmVhdHVyZSwgaSk7XHJcbiAgICAgIH0pO1xyXG4gICAgfVxyXG4gIH1cclxuXHJcbiAgcHVibGljIGRyYXdHaG9zdChjcmVhdHVyZTogQ3JlYXR1cmUsIGhpc3RvcnlJbmRleDogbnVtYmVyKTogdm9pZCB7XHJcbiAgICB0aGlzLmRyYXdDcmVhdHVyZUJvZHkoY3JlYXR1cmUsIGhpc3RvcnlJbmRleCk7XHJcbiAgfVxyXG5cclxuICBwdWJsaWMgZHJhd0NyZWF0dXJlKGNyZWF0dXJlOiBDcmVhdHVyZSk6IHZvaWQge1xyXG4gICAgdGhpcy5kcmF3Q3JlYXR1cmVCb2R5KGNyZWF0dXJlKTtcclxuICAgIHRoaXMuZHJhd0NyZWF0dXJlQmVhayhjcmVhdHVyZSk7XHJcbiAgfVxyXG5cclxuICBwdWJsaWMgZ2V0UG9zaXRpb25JbkNhbWVyYVNwYWNlKHBvc2l0aW9uOiBWZWN0b3IyKTogVmVjdG9yMiB7XHJcbiAgICByZXR1cm4gcG9zaXRpb25cclxuICAgICAgLmFkZChuZXcgVmVjdG9yMih3aW5kb3cuaW5uZXJXaWR0aCAvIDIsIHdpbmRvdy5pbm5lckhlaWdodCAvIDIpKVxyXG4gICAgICAuc3VidHJhY3QodGhpcy5jYW1lcmFQb3NpdGlvbilcclxuICAgICAgLm5vcm1hbGl6ZSgpO1xyXG4gIH1cclxuXHJcbiAgcHVibGljIGdldFBvc2l0aW9uSW5Xb3JsZFNwYWNlKHBvc2l0aW9uOiBWZWN0b3IyKTogVmVjdG9yMiB7XHJcbiAgICByZXR1cm4gcG9zaXRpb25cclxuICAgICAgLnN1YnRyYWN0KG5ldyBWZWN0b3IyKHdpbmRvdy5pbm5lcldpZHRoIC8gMiwgd2luZG93LmlubmVySGVpZ2h0IC8gMikpXHJcbiAgICAgIC5hZGQodGhpcy5jYW1lcmFQb3NpdGlvbilcclxuICAgICAgLm5vcm1hbGl6ZSgpO1xyXG4gIH1cclxuXHJcbiAgcHVibGljIGRyYXdDcmVhdHVyZUJvZHkoY3JlYXR1cmU6IENyZWF0dXJlLCBoaXN0b3J5SW5kZXg/OiBudW1iZXIpOiB2b2lkIHtcclxuICAgIGxldCBwb3NpdGlvbiA9IGhpc3RvcnlJbmRleCA/IGNyZWF0dXJlLmhpc3RvcnlbaGlzdG9yeUluZGV4XSA6IGNyZWF0dXJlLnBvc2l0aW9uO1xyXG4gICAgcG9zaXRpb24gPSB0aGlzLmdldFBvc2l0aW9uSW5DYW1lcmFTcGFjZShwb3NpdGlvbik7XHJcbiAgICBjb25zdCByYWRpdXMgPSBoaXN0b3J5SW5kZXggP1xyXG4gICAgICBjcmVhdHVyZS5zaXplICogKChoaXN0b3J5SW5kZXggKyAxKSAvIChjb25maWcuY3JlYXR1cmUubWF4SGlzdG9yeSArIDEpKSA6XHJcbiAgICAgIGNyZWF0dXJlLnNpemU7XHJcbiAgICB0aGlzLmN0eC5iZWdpblBhdGgoKTtcclxuICAgIHRoaXMuY3R4LmFyYyhcclxuICAgICAgcG9zaXRpb24ueCxcclxuICAgICAgcG9zaXRpb24ueSxcclxuICAgICAgcmFkaXVzLFxyXG4gICAgICAwLCAyICogTWF0aC5QSSk7XHJcbiAgICB0aGlzLmN0eC5maWxsU3R5bGUgPSBjcmVhdHVyZS5jb2xvdXI7XHJcbiAgICB0aGlzLmN0eC5maWxsKCk7XHJcbiAgfVxyXG5cclxuICBwdWJsaWMgZHJhd0NyZWF0dXJlQmVhayhjcmVhdHVyZTogQ3JlYXR1cmUpOiB2b2lkIHtcclxuICAgIGNvbnN0IHBvc2l0aW9uID0gdGhpcy5nZXRQb3NpdGlvbkluQ2FtZXJhU3BhY2UoY3JlYXR1cmUucG9zaXRpb24pO1xyXG4gICAgdGhpcy5jdHguYmVnaW5QYXRoKCk7XHJcbiAgICB0aGlzLmN0eC5hcmMoXHJcbiAgICAgIHBvc2l0aW9uLnggKyAoY3JlYXR1cmUuc2l6ZSArIDEpICogTWF0aC5jb3MoY3JlYXR1cmUuaGVhZGluZyksXHJcbiAgICAgIHBvc2l0aW9uLnkgKyAoY3JlYXR1cmUuc2l6ZSArIDEpICogTWF0aC5zaW4oY3JlYXR1cmUuaGVhZGluZyksXHJcbiAgICAgIGNyZWF0dXJlLnNpemUgLyAyLCAwLCAyICogTWF0aC5QSSk7XHJcbiAgICB0aGlzLmN0eC5maWxsU3R5bGUgPSBcImJsYWNrXCI7XHJcbiAgICB0aGlzLmN0eC5maWxsKCk7XHJcbiAgfVxyXG59XHJcbiIsImV4cG9ydCBjbGFzcyBGcHNDb3VudGVyIHtcbiAgcHVibGljIHN0YXRpYyBnZXRGcHNDb3VudGVyKCk6IEZwc0NvdW50ZXIge1xuICAgIHJldHVybiB0aGlzLmZwc0NvdW50ZXIgfHwgKHRoaXMuZnBzQ291bnRlciA9IG5ldyBGcHNDb3VudGVyKCkpO1xuICB9XG5cbiAgcHJpdmF0ZSBzdGF0aWMgZnBzQ291bnRlcjogRnBzQ291bnRlcjtcbiAgcHJpdmF0ZSByZWFkb25seSBTRUNPTkQgPSAxMDAwO1xuXG4gIHByaXZhdGUgZnBzTGFiZWw6IEhUTUxFbGVtZW50O1xuICBwcml2YXRlIHJlY2VudEZyYW1lczogbnVtYmVyW10gPSBbXTtcbiAgcHJpdmF0ZSBzdGFydDogbnVtYmVyO1xuXG4gIHByaXZhdGUgY29uc3RydWN0b3IoKSB7XG4gICAgdGhpcy5mcHNMYWJlbCA9IGRvY3VtZW50LmdldEVsZW1lbnRCeUlkKFwiZnBzLXN0YXR1c1wiKSE7XG4gICAgdGhpcy5zdGFydCA9IHBlcmZvcm1hbmNlLm5vdygpO1xuICB9XG5cbiAgcHVibGljIGNvdW50RnJhbWUoKTogdm9pZCB7XG4gICAgdGhpcy5yZWNlbnRGcmFtZXMucHVzaChwZXJmb3JtYW5jZS5ub3coKSk7XG4gIH1cblxuICBwdWJsaWMgZ2V0RlBTKCk6IG51bWJlciB7XG4gICAgY29uc3QgY3VycmVudFRpbWUgPSBwZXJmb3JtYW5jZS5ub3coKTtcbiAgICBjb25zdCBtdWx0aXBsaWVyID0gY3VycmVudFRpbWUgLSB0aGlzLnN0YXJ0IDwgdGhpcy5TRUNPTkQgP1xuICAgICAgTWF0aC5mbG9vcigxMDAwIC8gKGN1cnJlbnRUaW1lIC0gdGhpcy5zdGFydCkpIDpcbiAgICAgIDE7XG4gICAgcmV0dXJuIHRoaXMucmVjZW50RnJhbWVzLmZpbHRlcihcbiAgICAgIChkcmF3VGltZTogbnVtYmVyKSA9PiBkcmF3VGltZSA+PSBjdXJyZW50VGltZSAtIHRoaXMuU0VDT05ELFxuICAgICkubGVuZ3RoICogbXVsdGlwbGllcjtcbiAgfVxuXG4gIHB1YmxpYyB1cGRhdGVGcHMoKTogdm9pZCB7XG4gICAgdGhpcy5mcHNMYWJlbC50ZXh0Q29udGVudCA9IHRoaXMuZ2V0RlBTKCkudG9TdHJpbmcoKTtcbiAgfVxufVxuIiwiaW1wb3J0IHsgVmVjdG9yMiB9IGZyb20gXCJnZW9tZXRyeS92ZWN0b3IyXCI7XHJcbmltcG9ydCB7IGNvbmZpZyB9IGZyb20gXCJzdGF0ZU1hbmFnZW1lbnQvY29uZmlnXCI7XHJcbmltcG9ydCB7IENhbnZhcyB9IGZyb20gXCIuL2NhbnZhc1wiO1xyXG5cclxuZXhwb3J0IGNsYXNzIElucHV0SGFuZGxlciB7XHJcbiAgcHJpdmF0ZSBjYW52YXM6IENhbnZhcztcclxuICBwcml2YXRlIGNyZWF0ZUJvaWQ6IChwb3NpdGlvbjogVmVjdG9yMikgPT4gdm9pZDtcclxuICBwcml2YXRlIGNyZWF0ZUh1bnRlcjogKHBvc2l0aW9uOiBWZWN0b3IyKSA9PiB2b2lkO1xyXG4gIHByaXZhdGUgc2VwYXJhdGlvbkxhYmVsOiBIVE1MRWxlbWVudDtcclxuICBwcml2YXRlIGFsaWdubWVudExhYmVsOiBIVE1MRWxlbWVudDtcclxuICBwcml2YXRlIGNvaGVzaW9uTGFiZWw6IEhUTUxFbGVtZW50O1xyXG5cclxuICBjb25zdHJ1Y3RvcihcclxuICAgIGNhbnZhczogQ2FudmFzLFxyXG4gICAgY3JlYXRlQm9pZDogKHBvc2l0aW9uOiBWZWN0b3IyKSA9PiB2b2lkLFxyXG4gICAgY3JlYXRlSHVudGVyOiAocG9zaXRpb246IFZlY3RvcjIpID0+IHZvaWQsXHJcbiAgKSB7XHJcbiAgICB0aGlzLmNhbnZhcyA9IGNhbnZhcztcclxuICAgIHRoaXMuY3JlYXRlQm9pZCA9IGNyZWF0ZUJvaWQ7XHJcbiAgICB0aGlzLmNyZWF0ZUh1bnRlciA9IGNyZWF0ZUh1bnRlcjtcclxuICAgIHRoaXMuc2VwYXJhdGlvbkxhYmVsID0gZG9jdW1lbnQuZ2V0RWxlbWVudEJ5SWQoXCJzZXBhcmF0aW9uLXN0YXR1c1wiKSE7XHJcbiAgICB0aGlzLmFsaWdubWVudExhYmVsID0gZG9jdW1lbnQuZ2V0RWxlbWVudEJ5SWQoXCJhbGlnbm1lbnQtc3RhdHVzXCIpITtcclxuICAgIHRoaXMuY29oZXNpb25MYWJlbCA9IGRvY3VtZW50LmdldEVsZW1lbnRCeUlkKFwiY29oZXNpb24tc3RhdHVzXCIpITtcclxuICAgIHRoaXMuY2FudmFzLm9uY2xpY2soKGV2ZW50OiBNb3VzZUV2ZW50KSA9PiB7XHJcbiAgICAgIHRoaXMuaGFuZGxlTW91c2VDbGljayhldmVudCk7XHJcbiAgICB9KTtcclxuICAgIHdpbmRvdy5hZGRFdmVudExpc3RlbmVyKFwia2V5dXBcIiwgKGV2ZW50OiBLZXlib2FyZEV2ZW50KSA9PiB7XHJcbiAgICAgIHRoaXMuaGFuZGxlS2V5VXAoZXZlbnQpO1xyXG4gICAgfSk7XHJcbiAgfVxyXG5cclxuICBwdWJsaWMgaGFuZGxlTW91c2VDbGljayhldmVudDogTW91c2VFdmVudCk6IHZvaWQge1xyXG4gICAgY29uc3QgbW91c2VQb3NpdGlvbiA9IHRoaXMuY2FudmFzLmdldFBvc2l0aW9uSW5Xb3JsZFNwYWNlKFxyXG4gICAgICBuZXcgVmVjdG9yMihcclxuICAgICAgICBldmVudC5jbGllbnRYLFxyXG4gICAgICAgIGV2ZW50LmNsaWVudFksXHJcbiAgICAgICksXHJcbiAgICApO1xyXG4gICAgaWYgKGV2ZW50LmN0cmxLZXkgfHwgZXZlbnQubWV0YUtleSkge1xyXG4gICAgICB0aGlzLmNyZWF0ZUh1bnRlcihtb3VzZVBvc2l0aW9uKTtcclxuICAgIH0gZWxzZSB7XHJcbiAgICAgIHRoaXMuY3JlYXRlQm9pZChtb3VzZVBvc2l0aW9uKTtcclxuICAgIH1cclxuICB9XHJcblxyXG4gIHB1YmxpYyBoYW5kbGVLZXlVcChldmVudDogS2V5Ym9hcmRFdmVudCk6IHZvaWQge1xyXG4gICAgY29uc3Qgb25lS2V5Q29kZSA9IDQ5O1xyXG4gICAgY29uc3QgdHdvS2V5Q29kZSA9IDUwO1xyXG4gICAgY29uc3QgdGhyZWVLZXlDb2RlID0gNTE7XHJcbiAgICBzd2l0Y2ggKGV2ZW50LmtleUNvZGUpIHtcclxuICAgICAgY2FzZSBvbmVLZXlDb2RlOiB0aGlzLnRvZ2dsZVNlcGFyYXRpb24oKTsgYnJlYWs7XHJcbiAgICAgIGNhc2UgdHdvS2V5Q29kZTogdGhpcy50b2dnbGVBbGlnbm1lbnQoKTsgYnJlYWs7XHJcbiAgICAgIGNhc2UgdGhyZWVLZXlDb2RlOiB0aGlzLnRvZ2dsZUNvaGVzaW9uKCk7IGJyZWFrO1xyXG4gICAgICBkZWZhdWx0OiByZXR1cm47XHJcbiAgICB9XHJcbiAgfVxyXG5cclxuICBwdWJsaWMgdG9nZ2xlU2VwYXJhdGlvbigpOiB2b2lkIHtcclxuICAgIGlmIChjb25maWcuYm9pZC5yZXB1bHNpb25SYWRpdXMpIHtcclxuICAgICAgY29uZmlnLmJvaWQucmVwdWxzaW9uUmFkaXVzID0gMDtcclxuICAgICAgdGhpcy5zZXBhcmF0aW9uTGFiZWwudGV4dENvbnRlbnQgPSBcIk9GRlwiO1xyXG4gICAgICB0aGlzLnNlcGFyYXRpb25MYWJlbC5zdHlsZS5jb2xvciA9IFwicmVkXCI7XHJcbiAgICB9IGVsc2Uge1xyXG4gICAgICBjb25maWcuYm9pZC5yZXB1bHNpb25SYWRpdXMgPSBjb25maWcuYm9pZC5yZXB1bHNpb25SYWRpdXNEZWZhdWx0O1xyXG4gICAgICB0aGlzLnNlcGFyYXRpb25MYWJlbC50ZXh0Q29udGVudCA9IFwiT05cIjtcclxuICAgICAgdGhpcy5zZXBhcmF0aW9uTGFiZWwuc3R5bGUuY29sb3IgPSBcImdyZWVuXCI7XHJcbiAgICB9XHJcbiAgfVxyXG5cclxuICBwdWJsaWMgdG9nZ2xlQWxpZ25tZW50KCk6IHZvaWQge1xyXG4gICAgaWYgKGNvbmZpZy5ib2lkLmFsaWdubWVudFJhZGl1cykge1xyXG4gICAgICBjb25maWcuYm9pZC5hbGlnbm1lbnRSYWRpdXMgPSAwO1xyXG4gICAgICB0aGlzLmFsaWdubWVudExhYmVsLnRleHRDb250ZW50ID0gXCJPRkZcIjtcclxuICAgICAgdGhpcy5hbGlnbm1lbnRMYWJlbC5zdHlsZS5jb2xvciA9IFwicmVkXCI7XHJcbiAgICB9IGVsc2Uge1xyXG4gICAgICBjb25maWcuYm9pZC5hbGlnbm1lbnRSYWRpdXMgPSBjb25maWcuYm9pZC5hbGlnbm1lbnRSYWRpdXNEZWZhdWx0O1xyXG4gICAgICB0aGlzLmFsaWdubWVudExhYmVsLnRleHRDb250ZW50ID0gXCJPTlwiO1xyXG4gICAgICB0aGlzLmFsaWdubWVudExhYmVsLnN0eWxlLmNvbG9yID0gXCJncmVlblwiO1xyXG4gICAgfVxyXG4gIH1cclxuXHJcbiAgcHVibGljIHRvZ2dsZUNvaGVzaW9uKCk6IHZvaWQge1xyXG4gICAgaWYgKGNvbmZpZy5ib2lkLmF0dHJhY3Rpb25SYWRpdXMpIHtcclxuICAgICAgY29uZmlnLmJvaWQuYXR0cmFjdGlvblJhZGl1cyA9IDA7XHJcbiAgICAgIHRoaXMuY29oZXNpb25MYWJlbC50ZXh0Q29udGVudCA9IFwiT0ZGXCI7XHJcbiAgICAgIHRoaXMuY29oZXNpb25MYWJlbC5zdHlsZS5jb2xvciA9IFwicmVkXCI7XHJcbiAgICB9IGVsc2Uge1xyXG4gICAgICBjb25maWcuYm9pZC5hdHRyYWN0aW9uUmFkaXVzID0gY29uZmlnLmJvaWQuYXR0cmFjdGlvblJhZGl1c0RlZmF1bHQ7XHJcbiAgICAgIHRoaXMuY29oZXNpb25MYWJlbC50ZXh0Q29udGVudCA9IFwiT05cIjtcclxuICAgICAgdGhpcy5jb2hlc2lvbkxhYmVsLnN0eWxlLmNvbG9yID0gXCJncmVlblwiO1xyXG4gICAgfVxyXG4gIH1cclxufVxyXG4iLCJpbXBvcnQgeyBDcmVhdHVyZSB9IGZyb20gXCJjcmVhdHVyZXMvY3JlYXR1cmVcIjtcclxuaW1wb3J0IHsgSHVudGVyIH0gZnJvbSBcImNyZWF0dXJlcy9odW50ZXJcIjtcclxuaW1wb3J0IHsgQm9pZCB9IGZyb20gXCJjcmVhdHVyZXMvYm9pZFwiO1xyXG5pbXBvcnQgeyBWZWN0b3IyIH0gZnJvbSBcImdlb21ldHJ5L3ZlY3RvcjJcIjtcclxuaW1wb3J0IHsgY29uZmlnIH0gZnJvbSBcIi4vY29uZmlnXCI7XHJcblxyXG5leHBvcnQgY2xhc3MgQ3JlYXR1cmVTdG9yYWdlIHtcclxuICBwcml2YXRlIG5leHRJZCA9IDA7XHJcbiAgcHJpdmF0ZSBjcmVhdHVyZXMgPSBuZXcgTWFwPG51bWJlciwgQ3JlYXR1cmU+KCk7XHJcbiAgcHJpdmF0ZSBidWNrZXRNYXA6IENyZWF0dXJlW11bXVtdID0gW107XHJcbiAgcHJpdmF0ZSBidWNrZXRDb2x1bW5zID0gMTtcclxuICBwcml2YXRlIGJ1Y2tldFJvd3MgPSAxO1xyXG4gIHByaXZhdGUgcmVhZG9ubHkgYnVja2V0U2l6ZSA9IDEwMDtcclxuXHJcbiAgY29uc3RydWN0b3IoKSB7XHJcbiAgICB0aGlzLnVwZGF0ZSgpO1xyXG4gIH1cclxuXHJcbiAgcHVibGljIHVwZGF0ZSgpOiB2b2lkIHtcclxuICAgIHRoaXMucmVzZXRCdWNrZXRNYXAoKTtcclxuICAgIHRoaXMuY3JlYXR1cmVzLmZvckVhY2goKGNyZWF0dXJlKSA9PiB7XHJcbiAgICAgIGNvbnN0IGJ1Y2tldFggPSBNYXRoLm1pbihcclxuICAgICAgICBNYXRoLmZsb29yKGNyZWF0dXJlLnBvc2l0aW9uLnggLyB0aGlzLmJ1Y2tldFNpemUpLFxyXG4gICAgICAgIHRoaXMuYnVja2V0Q29sdW1ucyAtIDEsXHJcbiAgICAgICk7XHJcbiAgICAgIGNvbnN0IGJ1Y2tldFkgPSBNYXRoLm1pbihcclxuICAgICAgICBNYXRoLmZsb29yKGNyZWF0dXJlLnBvc2l0aW9uLnkgLyB0aGlzLmJ1Y2tldFNpemUpLFxyXG4gICAgICAgIHRoaXMuYnVja2V0Um93cyAtIDEsXHJcbiAgICAgICk7XHJcbiAgICAgIHRoaXMuYnVja2V0TWFwW2J1Y2tldFhdW2J1Y2tldFldLnB1c2goY3JlYXR1cmUpO1xyXG4gICAgfSk7XHJcbiAgfVxyXG5cclxuICBwdWJsaWMgYWRkSHVudGVyKHBvc2l0aW9uPzogVmVjdG9yMik6IEh1bnRlciB7XHJcbiAgICBjb25zdCBuZXdIdW50ZXIgPSBuZXcgSHVudGVyKFxyXG4gICAgICB0aGlzLm5leHRJZCxcclxuICAgICAgdGhpcyxcclxuICAgICAgcG9zaXRpb24sXHJcbiAgICApO1xyXG4gICAgdGhpcy5jcmVhdHVyZXMuc2V0KHRoaXMubmV4dElkLCBuZXdIdW50ZXIpO1xyXG4gICAgdGhpcy5uZXh0SWQrKztcclxuICAgIHJldHVybiBuZXdIdW50ZXI7XHJcbiAgfVxyXG5cclxuICBwdWJsaWMgYWRkQm9pZChwb3NpdGlvbj86IFZlY3RvcjIpOiBCb2lkIHtcclxuICAgIGNvbnN0IG5ld0JvaWQgPSBuZXcgQm9pZChcclxuICAgICAgdGhpcy5uZXh0SWQsXHJcbiAgICAgIHRoaXMsXHJcbiAgICAgIHBvc2l0aW9uLFxyXG4gICAgKTtcclxuICAgIHRoaXMuY3JlYXR1cmVzLnNldCh0aGlzLm5leHRJZCwgbmV3Qm9pZCk7XHJcbiAgICB0aGlzLm5leHRJZCsrO1xyXG4gICAgcmV0dXJuIG5ld0JvaWQ7XHJcbiAgfVxyXG5cclxuICBwdWJsaWMgZ2V0QWxsSHVudGVycygpOiBIdW50ZXJbXSB7XHJcbiAgICByZXR1cm4gWy4uLnRoaXMuY3JlYXR1cmVzLnZhbHVlcygpXS5maWx0ZXIoKGNyZWF0dXJlKSA9PiB7XHJcbiAgICAgIHJldHVybiBjcmVhdHVyZSBpbnN0YW5jZW9mIEh1bnRlcjtcclxuICAgIH0pIGFzIEh1bnRlcltdO1xyXG4gIH1cclxuXHJcbiAgcHVibGljIGdldEFsbEJvaWRzKCk6IEJvaWRbXSB7XHJcbiAgICByZXR1cm4gWy4uLnRoaXMuY3JlYXR1cmVzLnZhbHVlcygpXS5maWx0ZXIoKGNyZWF0dXJlKSA9PiB7XHJcbiAgICAgIHJldHVybiBjcmVhdHVyZSBpbnN0YW5jZW9mIEJvaWQ7XHJcbiAgICB9KSBhcyBCb2lkW107XHJcbiAgfVxyXG5cclxuICBwdWJsaWMgZ2V0QWxsQ3JlYXR1cmVzKCk6IENyZWF0dXJlW10ge1xyXG4gICAgcmV0dXJuIFsuLi50aGlzLmNyZWF0dXJlcy52YWx1ZXMoKV07XHJcbiAgfVxyXG5cclxuICBwdWJsaWMgZ2V0SHVudGVyc0luQXJlYShjZW50ZXI6IFZlY3RvcjIsIHJhZGl1czogbnVtYmVyKTogSHVudGVyW10ge1xyXG4gICAgcmV0dXJuIHRoaXMuZ2V0Q3JlYXR1cmVzSW5BcmVhKGNlbnRlciwgcmFkaXVzKVxyXG4gICAgICAuZmlsdGVyKChjcmVhdHVyZSkgPT4ge1xyXG4gICAgICAgIHJldHVybiBjcmVhdHVyZSBpbnN0YW5jZW9mIEh1bnRlciAmJlxyXG4gICAgICAgIGNyZWF0dXJlLnBvc2l0aW9uLmRpc3RhbmNlKGNlbnRlcikgPCByYWRpdXM7XHJcbiAgICAgIH0pIGFzIEh1bnRlcltdO1xyXG4gIH1cclxuXHJcbiAgcHVibGljIGdldEJvaWRzSW5BcmVhKGNlbnRlcjogVmVjdG9yMiwgcmFkaXVzOiBudW1iZXIpOiBCb2lkW10ge1xyXG4gICAgcmV0dXJuIHRoaXMuZ2V0Q3JlYXR1cmVzSW5BcmVhKGNlbnRlciwgcmFkaXVzKVxyXG4gICAgICAuZmlsdGVyKChjcmVhdHVyZSkgPT4ge1xyXG4gICAgICAgIHJldHVybiBjcmVhdHVyZSBpbnN0YW5jZW9mIEJvaWQgJiZcclxuICAgICAgICBjcmVhdHVyZS5wb3NpdGlvbi5kaXN0YW5jZShjZW50ZXIpIDwgcmFkaXVzO1xyXG4gICAgICB9KSBhcyBCb2lkW107XHJcbiAgfVxyXG5cclxuICBwdWJsaWMgZ2V0Q3JlYXR1cmVzSW5BcmVhKGNlbnRlcjogVmVjdG9yMiwgcmFkaXVzOiBudW1iZXIpOiBDcmVhdHVyZVtdIHtcclxuICAgIGNvbnN0IGJ1Y2tldFggPSBNYXRoLmZsb29yKGNlbnRlci54IC8gdGhpcy5idWNrZXRTaXplKTtcclxuICAgIGNvbnN0IGJ1Y2tldFkgPSBNYXRoLmZsb29yKGNlbnRlci55IC8gdGhpcy5idWNrZXRTaXplKTtcclxuICAgIGNvbnN0IGJ1Y2tldFJhZGl1cyA9IE1hdGguY2VpbChyYWRpdXMgLyB0aGlzLmJ1Y2tldFNpemUpO1xyXG4gICAgY29uc3QgbWluWCA9IChidWNrZXRYIC0gYnVja2V0UmFkaXVzICsgdGhpcy5idWNrZXRDb2x1bW5zKSAlIHRoaXMuYnVja2V0Q29sdW1ucztcclxuICAgIGNvbnN0IG1heFggPSAoYnVja2V0WCArIGJ1Y2tldFJhZGl1cyArIDEpICUgdGhpcy5idWNrZXRDb2x1bW5zO1xyXG4gICAgY29uc3QgbWluWSA9IChidWNrZXRZIC0gYnVja2V0UmFkaXVzICsgdGhpcy5idWNrZXRSb3dzKSAlIHRoaXMuYnVja2V0Um93cztcclxuICAgIGNvbnN0IG1heFkgPSAoYnVja2V0WSArIGJ1Y2tldFJhZGl1cyArIDEpICUgdGhpcy5idWNrZXRSb3dzO1xyXG4gICAgbGV0IGNyZWF0dXJlczogQ3JlYXR1cmVbXSA9IFtdO1xyXG4gICAgZm9yIChsZXQgaSA9IG1pblg7IGkgIT09IG1heFg7IGkrKywgaSA9IGkgJSB0aGlzLmJ1Y2tldENvbHVtbnMpIHtcclxuICAgICAgZm9yIChsZXQgaiA9IG1pblk7IGogIT09IG1heFk7IGorKywgaiA9IGogJSB0aGlzLmJ1Y2tldFJvd3MpIHtcclxuICAgICAgICBjcmVhdHVyZXMgPSBjcmVhdHVyZXMuY29uY2F0KHRoaXMuYnVja2V0TWFwW2ldW2pdKTtcclxuICAgICAgfVxyXG4gICAgfVxyXG4gICAgcmV0dXJuIGNyZWF0dXJlcztcclxuICB9XHJcblxyXG4gIHB1YmxpYyBnZXRIdW50ZXJDb3VudCgpOiBudW1iZXIge1xyXG4gICAgcmV0dXJuIHRoaXMuZ2V0QWxsSHVudGVycygpLmxlbmd0aDtcclxuICB9XHJcblxyXG4gIHB1YmxpYyBnZXRCb2lkQ291bnQoKTogbnVtYmVyIHtcclxuICAgIHJldHVybiB0aGlzLmdldEFsbEJvaWRzKCkubGVuZ3RoO1xyXG4gIH1cclxuXHJcbiAgcHVibGljIHJlbW92ZShjcmVhdHVyZUlkOiBudW1iZXIpOiB2b2lkIHtcclxuICAgIHRoaXMuY3JlYXR1cmVzLmRlbGV0ZShjcmVhdHVyZUlkKTtcclxuICB9XHJcblxyXG4gIHByaXZhdGUgcmVzZXRCdWNrZXRNYXAoKTogdm9pZCB7XHJcbiAgICB0aGlzLmJ1Y2tldE1hcCA9IFtdO1xyXG4gICAgdGhpcy5idWNrZXRDb2x1bW5zID0gTWF0aC5jZWlsKGNvbmZpZy5zY3JlZW4ubWF4WCAvIHRoaXMuYnVja2V0U2l6ZSk7XHJcbiAgICB0aGlzLmJ1Y2tldFJvd3MgPSBNYXRoLmNlaWwoY29uZmlnLnNjcmVlbi5tYXhZIC8gdGhpcy5idWNrZXRTaXplKTtcclxuICAgIGZvciAobGV0IGkgPSAwOyBpIDwgdGhpcy5idWNrZXRDb2x1bW5zOyBpKyspIHtcclxuICAgICAgY29uc3QgYnVja2V0Um93OiBDcmVhdHVyZVtdW10gPSBbXTtcclxuICAgICAgZm9yIChsZXQgaiA9IDA7IGogPCB0aGlzLmJ1Y2tldFJvd3M7IGorKykge1xyXG4gICAgICAgIGJ1Y2tldFJvdy5wdXNoKFtdKTtcclxuICAgICAgfVxyXG4gICAgICB0aGlzLmJ1Y2tldE1hcC5wdXNoKGJ1Y2tldFJvdyk7XHJcbiAgICB9XHJcbiAgfVxyXG59XHJcbiIsImltcG9ydCB7IGNvbmZpZyB9IGZyb20gXCJzdGF0ZU1hbmFnZW1lbnQvY29uZmlnXCI7XHJcbmltcG9ydCB7IFZlY3RvcjIgfSBmcm9tIFwiZ2VvbWV0cnkvdmVjdG9yMlwiO1xyXG5pbXBvcnQgeyBDcmVhdHVyZSB9IGZyb20gXCIuL2NyZWF0dXJlXCI7XHJcbmltcG9ydCB7IENyZWF0dXJlU3RvcmFnZSB9IGZyb20gXCJzdGF0ZU1hbmFnZW1lbnQvY3JlYXR1cmVTdG9yYWdlXCI7XHJcbmltcG9ydCB7IE5ldCB9IGZyb20gXCJuZXVyYWwvbmV0XCI7XHJcblxyXG5leHBvcnQgY2xhc3MgSHVudGVyIGV4dGVuZHMgQ3JlYXR1cmUge1xyXG4gIHB1YmxpYyBjb2xvdXIgPSBjb25maWcuaHVudGVyLmRlZmF1bHRDb2xvdXI7XHJcbiAgcHVibGljIG1heFNwZWVkID0gY29uZmlnLmh1bnRlci5tYXhTcGVlZDtcclxuICBwdWJsaWMgbWluU3BlZWQgPSBjb25maWcuaHVudGVyLm1pblNwZWVkO1xyXG4gIHB1YmxpYyBzaXplID0gY29uZmlnLmh1bnRlci5zaXplO1xyXG4gIHB1YmxpYyBoZWFkaW5nID0gMDtcclxuICBwdWJsaWMgc3BlZWQgPSAwO1xyXG4gIHB1YmxpYyBoaXN0b3J5OiBWZWN0b3IyW10gPSBbXTtcclxuICBwdWJsaWMgcG9zaXRpb246IFZlY3RvcjI7XHJcbiAgcHJpdmF0ZSBzdGF0aWMgcmVhZG9ubHkgbmV0U2l6ZVNjaGVtYSA9IFsxLCAzLCAyXVxyXG4gIHByaXZhdGUgbmV0OiBOZXQ7XHJcblxyXG4gIGNvbnN0cnVjdG9yKFxyXG4gICAgcHVibGljIHJlYWRvbmx5IGlkOiBudW1iZXIgPSAwLFxyXG4gICAgcHVibGljIGNyZWF0dXJlU3RvcmFnZTogQ3JlYXR1cmVTdG9yYWdlLFxyXG4gICAgcG9zaXRpb24/OiBWZWN0b3IyLFxyXG4gICkge1xyXG4gICAgc3VwZXIoKTtcclxuICAgIHRoaXMucG9zaXRpb24gPSBwb3NpdGlvbiB8fCBuZXcgVmVjdG9yMihcclxuICAgICAgTWF0aC5yYW5kb20oKSAqIGNvbmZpZy5zY3JlZW4ubWF4WCxcclxuICAgICAgTWF0aC5yYW5kb20oKSAqIGNvbmZpZy5zY3JlZW4ubWF4WSxcclxuICAgICk7XHJcbiAgICBmb3IgKGxldCBpID0gMDsgaSA8IGNvbmZpZy5jcmVhdHVyZS5tYXhIaXN0b3J5OyBpKyspIHtcclxuICAgICAgdGhpcy5oaXN0b3J5LnB1c2godGhpcy5wb3NpdGlvbik7XHJcbiAgICB9XHJcbiAgICB0aGlzLmluaXRpYWxpemVWZWxvY2l0eSgpO1xyXG4gICAgdGhpcy5uZXQgPSBuZXcgTmV0KEh1bnRlci5uZXRTaXplU2NoZW1hKVxyXG4gIH1cclxuXHJcbiAgcHVibGljIGluaXRpYWxpemVWZWxvY2l0eSgpOiB2b2lkIHtcclxuICAgIHRoaXMuaGVhZGluZyA9IE1hdGgucmFuZG9tKCkgKiAyICogTWF0aC5QSTtcclxuICAgIHRoaXMuc3BlZWQgPSBjb25maWcuaHVudGVyLm1pblNwZWVkO1xyXG4gIH1cclxuXHJcbiAgcHVibGljIHVwZGF0ZSgpOiB2b2lkIHtcclxuICAgIHRoaXMuZWF0KCk7XHJcbiAgICB0aGlzLm1vdmUoKTtcclxuICAgIHRoaXMudXBkYXRlSGlzdG9yeSgpO1xyXG4gIH1cclxuXHJcbiAgcHVibGljIGVhdCgpOiB2b2lkIHtcclxuICAgIHRoaXMuY3JlYXR1cmVTdG9yYWdlLmdldEJvaWRzSW5BcmVhKFxyXG4gICAgICB0aGlzLnBvc2l0aW9uLFxyXG4gICAgICBjb25maWcuaHVudGVyLmVhdFJhZGl1cyxcclxuICAgICkuZm9yRWFjaCgocHJleSkgPT4gcHJleS5kaWUoKSk7XHJcbiAgfVxyXG5cclxuICBwdWJsaWMgbW92ZSgpOiB2b2lkIHtcclxuICAgIHRoaXMudXBkYXRlSGlzdG9yeSgpO1xyXG4gICAgdGhpcy5wb3NpdGlvbiA9IHRoaXMucG9zaXRpb24uYWRkKHRoaXMudmVsb2NpdHkoKSkubm9ybWFsaXplKCk7XHJcbiAgICBjb25zdCBpbnB1dFZlY3RvciA9IHRoaXMuZ2V0TmV1cmFsTmV0SW5wdXRWZWN0b3IoKTtcclxuICAgIGNvbnN0IG91dHB1dFZlY3RvciA9IHRoaXMubmV0LnByb2Nlc3NJbnB1dChpbnB1dFZlY3Rvcik7XHJcbiAgICB0aGlzLnBhcnNlT3V0cHV0VG9BY3Rpb24ob3V0cHV0VmVjdG9yKTtcclxuXHJcbiAgICAvLyBUT0RPIC4uLiB1cGRhdGUgbmV0IHRvIGxlYXJuP1xyXG4gIH1cclxuXHJcbiAgcHJpdmF0ZSBnZXROZXVyYWxOZXRJbnB1dFZlY3RvcigpOiBudW1iZXJbXSB7XHJcbiAgICAvLyBUT0RPIHRoaXMgd2lsbCBlcnJvciBpZiB0aGVyZSBhcmUgbm8gYm9pZHNcclxuICAgIGNvbnN0IG5lYXJlc3RCb2lkID0gdGhpcy5jcmVhdHVyZVN0b3JhZ2UuZ2V0QWxsQm9pZHMoKS5zb3J0KChhLCBiKSA9PiB7XHJcbiAgICAgIHJldHVybiBhLmRpc3RhbmNlVG9DcmVhdHVyZSh0aGlzKSAtIGIuZGlzdGFuY2VUb0NyZWF0dXJlKHRoaXMpXHJcbiAgICB9KVswXVxyXG5cclxuICAgIGNvbnN0IHNob3J0ZXN0UGF0aCA9IHRoaXMucG9zaXRpb24udmVjdG9yVG8obmVhcmVzdEJvaWQucG9zaXRpb24pXHJcblxyXG4gICAgY29uc3QgdGFyZ2V0SGVhZGluZ1JhZGlhbnMgPSB0aGlzLnZlbG9jaXR5KCkuYW5nbGVUbyhzaG9ydGVzdFBhdGgpXHJcbiAgICBjb25zdCBub3JtYWxpc2VkVGFyZ2V0ID0gKHRhcmdldEhlYWRpbmdSYWRpYW5zIC8gKDIgKiBNYXRoLlBJKSkgKyAwLjVcclxuICAgIHJldHVybiBbbm9ybWFsaXNlZFRhcmdldF1cclxuICB9XHJcblxyXG4gIHByaXZhdGUgcGFyc2VPdXRwdXRUb0FjdGlvbihvdXRwdXRWZWN0b3I6IG51bWJlcltdKTogdm9pZCB7XHJcbiAgICBjb25zdCByb3RhdGlvbkRlY2lzaW9uID0gb3V0cHV0VmVjdG9yWzBdXHJcbiAgICBjb25zdCBtYXhpbXVtTGVmdCA9IHRoaXMuaGVhZGluZyAtIGNvbmZpZy5jcmVhdHVyZS50dXJuaW5nTWF4XHJcbiAgICBjb25zdCBmdWxsVHVybmluZ1JhbmdlID0gY29uZmlnLmNyZWF0dXJlLnR1cm5pbmdNYXggKiAyXHJcbiAgICB0aGlzLmhlYWRpbmcgPSBtYXhpbXVtTGVmdCArIHJvdGF0aW9uRGVjaXNpb24gKiBmdWxsVHVybmluZ1JhbmdlXHJcblxyXG4gICAgY29uc3QgYWNjZWxlcmF0aW9uRGVjaXNpb24gPSBvdXRwdXRWZWN0b3JbMV1cclxuICAgIGNvbnN0IG1pbmltdW1TcGVlZCA9IHRoaXMuc3BlZWQgLSBjb25maWcuY3JlYXR1cmUuYWNjZWxlcmF0aW9uXHJcbiAgICBjb25zdCBmdWxsU3BlZWRSYW5nZSA9IGNvbmZpZy5jcmVhdHVyZS5hY2NlbGVyYXRpb24gKiAyXHJcbiAgICBjb25zdCB0YXJnZXRTcGVlZCA9IG1pbmltdW1TcGVlZCArIGZ1bGxTcGVlZFJhbmdlICogYWNjZWxlcmF0aW9uRGVjaXNpb25cclxuICAgIHRoaXMuc3BlZWQgPSBNYXRoLm1pbihNYXRoLm1heCh0YXJnZXRTcGVlZCwgMCksIGNvbmZpZy5odW50ZXIubWF4U3BlZWQpXHJcbiAgfVxyXG59XHJcbiIsImltcG9ydCB7IExheWVyIH0gZnJvbSAnLi9sYXllcic7XHJcblxyXG5leHBvcnQgY2xhc3MgTmV0IHtcclxuICBwdWJsaWMgbGF5ZXJzOiBMYXllcltdXHJcblxyXG4gIGNvbnN0cnVjdG9yKFxyXG4gICAgbGF5ZXJTaXplczogbnVtYmVyW10sXHJcbiAgKSB7XHJcbiAgICBjb25zdCBpbnB1dExheWVyID0gbmV3IExheWVyKGxheWVyU2l6ZXNbMF0pXHJcbiAgICB0aGlzLmxheWVycyA9IFtpbnB1dExheWVyXVxyXG5cclxuICAgIGxldCBwcmlvckxheWVyID0gaW5wdXRMYXllclxyXG4gICAgZm9yIChsZXQgaSA9IDE7IGkgPCBsYXllclNpemVzLmxlbmd0aDsgaSsrKSB7XHJcbiAgICAgIGNvbnN0IG5leHRMYXllciA9IG5ldyBMYXllcihsYXllclNpemVzW2ldKVxyXG4gICAgICBuZXh0TGF5ZXIuY29ubmVjdFByaW9yTGF5ZXIocHJpb3JMYXllcilcclxuICAgICAgdGhpcy5sYXllcnMucHVzaChuZXh0TGF5ZXIpXHJcbiAgICAgIHByaW9yTGF5ZXIgPSBuZXh0TGF5ZXJcclxuICAgIH1cclxuICB9XHJcblxyXG4gIHB1YmxpYyBwcm9jZXNzSW5wdXQoaW5wdXRWZWN0b3I6IG51bWJlcltdKTogbnVtYmVyW10ge1xyXG4gICAgdGhpcy5pbmplY3RJbnB1dFZlY3RvclRvSW5wdXRMYXllcihpbnB1dFZlY3RvcilcclxuICAgIGZvciAobGV0IGkgPSAxOyBpIDwgdGhpcy5sYXllcnMubGVuZ3RoOyBpKyspIHtcclxuICAgICAgdGhpcy5sYXllcnNbaV0udXBkYXRlVmFsdWVzKClcclxuICAgIH1cclxuICAgIHJldHVybiB0aGlzLmxheWVyc1t0aGlzLmxheWVycy5sZW5ndGggLSAxXS5vdXRwdXRWZWN0b3IoKVxyXG4gIH1cclxuXHJcbiAgcHJpdmF0ZSBpbmplY3RJbnB1dFZlY3RvclRvSW5wdXRMYXllcihpbnB1dFZlY3RvcjogbnVtYmVyW10pOiB2b2lkIHtcclxuICAgIHRoaXMubGF5ZXJzWzBdLmluamVjdElucHV0VmVjdG9yKGlucHV0VmVjdG9yKVxyXG4gIH1cclxufVxyXG4iLCJpbXBvcnQgeyBOZXVyb24gfSBmcm9tIFwiLi9uZXVyb25cIlxyXG5cclxuZXhwb3J0IGNsYXNzIExheWVyIHtcclxuICBwdWJsaWMgbmV1cm9uczogTmV1cm9uW11cclxuXHJcbiAgY29uc3RydWN0b3Ioc2l6ZTogbnVtYmVyKSB7XHJcbiAgICB0aGlzLm5ldXJvbnMgPSBbXVxyXG4gICAgZm9yIChsZXQgaSA9IDA7IGkgPCBzaXplOyBpKyspIHtcclxuICAgICAgdGhpcy5uZXVyb25zLnB1c2gobmV3IE5ldXJvbigpKVxyXG4gICAgfVxyXG4gIH1cclxuXHJcbiAgcHVibGljIGNvbm5lY3RQcmlvckxheWVyKHByaW9yTGF5ZXI6IExheWVyKTogdm9pZCB7XHJcbiAgICB0aGlzLm5ldXJvbnMuZm9yRWFjaChuZXVyb24gPT4ge1xyXG4gICAgICBwcmlvckxheWVyLm5ldXJvbnMuZm9yRWFjaChwcmlvck5ldXJvbiA9PiB7XHJcbiAgICAgICAgTmV1cm9uLmNvbm5lY3RQYWlyKHByaW9yTmV1cm9uLCBuZXVyb24pXHJcbiAgICAgIH0pXHJcbiAgICB9KVxyXG4gIH1cclxuXHJcbiAgcHVibGljIGluamVjdElucHV0VmVjdG9yKGlucHV0VmVjdG9yOiBudW1iZXJbXSk6IHZvaWQge1xyXG4gICAgZm9yIChsZXQgaSA9IDA7IGkgPCBpbnB1dFZlY3Rvci5sZW5ndGg7IGkrKykge1xyXG4gICAgICB0aGlzLm5ldXJvbnNbaV0udmFsdWUgPSBpbnB1dFZlY3RvcltpXVxyXG4gICAgfVxyXG4gIH1cclxuXHJcbiAgcHVibGljIHVwZGF0ZVZhbHVlcygpOiB2b2lkIHtcclxuICAgIHRoaXMubmV1cm9ucy5mb3JFYWNoKG5ldXJvbiA9PiBuZXVyb24udXBkYXRlVmFsdWUoKSlcclxuICB9XHJcblxyXG4gIHB1YmxpYyBvdXRwdXRWZWN0b3IoKTogbnVtYmVyW10ge1xyXG4gICAgcmV0dXJuIHRoaXMubmV1cm9ucy5tYXAobmV1cm9uID0+IG5ldXJvbi52YWx1ZSlcclxuICB9XHJcbn1cclxuIiwiaW1wb3J0IHsgQ29ubmVjdGlvbiB9IGZyb20gXCIuL2Nvbm5lY3Rpb25cIjtcclxuXHJcbmV4cG9ydCBjbGFzcyBOZXVyb24ge1xyXG4gIHByaXZhdGUgaW5wdXRzOiBDb25uZWN0aW9uW107XHJcbiAgcHJpdmF0ZSBvdXRwdXRzOiBDb25uZWN0aW9uW107XHJcbiAgcHVibGljIHZhbHVlOiBudW1iZXI7XHJcblxyXG4gIGNvbnN0cnVjdG9yKCkge1xyXG4gICAgdGhpcy5pbnB1dHMgPSBbXTtcclxuICAgIHRoaXMub3V0cHV0cyA9IFtdO1xyXG4gICAgdGhpcy52YWx1ZSA9IDA7XHJcbiAgfVxyXG5cclxuICBwcml2YXRlIGNvbm5lY3RPdXRwdXQoY29ubmVjdGlvbjogQ29ubmVjdGlvbik6IHZvaWQge1xyXG4gICAgdGhpcy5vdXRwdXRzLnB1c2goY29ubmVjdGlvbilcclxuICB9XHJcblxyXG4gIHByaXZhdGUgY29ubmVjdElucHV0KGNvbm5lY3Rpb246IENvbm5lY3Rpb24pOiB2b2lkIHtcclxuICAgIHRoaXMuaW5wdXRzLnB1c2goY29ubmVjdGlvbilcclxuICB9XHJcblxyXG4gIHN0YXRpYyBjb25uZWN0UGFpcihwcmlvcjogTmV1cm9uLCBuZXh0OiBOZXVyb24pOiB2b2lkIHtcclxuICAgIGNvbnN0IGNvbm5lY3Rpb24gPSBuZXcgQ29ubmVjdGlvbihwcmlvciwgbmV4dClcclxuICAgIHByaW9yLmNvbm5lY3RPdXRwdXQoY29ubmVjdGlvbilcclxuICAgIG5leHQuY29ubmVjdElucHV0KGNvbm5lY3Rpb24pXHJcbiAgfVxyXG5cclxuICAvLyBBY3RpdmF0aW9uIGZ1bmN0aW9uXHJcbiAgcHVibGljIHVwZGF0ZVZhbHVlKCk6IHZvaWQge1xyXG4gICAgdGhpcy5zdGVwM0Z1bmN0aW9uKClcclxuICB9XHJcblxyXG4gIHByaXZhdGUgc3RlcDJGdW5jdGlvbigpOiB2b2lkIHtcclxuICAgIC8vIFRoaXMgaW1wbGVtZW50YXRpb24gaXMgdGhlIGNsYXNzaWMgc3RlcCBmdW5jdGlvblxyXG4gICAgY29uc3QgaW5wdXRTdW0gPSB0aGlzLmlucHV0cy5yZWR1Y2UoXHJcbiAgICAgIChwcmV2LCBjdXJyKSA9PiBwcmV2ICsgY3Vyci5nZXRXZWlnaHRlZE91dHB1dCgpLFxyXG4gICAgICAwXHJcbiAgICApXHJcbiAgICBjb25zdCBhdmVyYWdlSW5wdXQgPSBpbnB1dFN1bSAvIHRoaXMuaW5wdXRzLmxlbmd0aDtcclxuICAgIHRoaXMudmFsdWUgPSBhdmVyYWdlSW5wdXQgPCAwLjUgPyAwIDogMTtcclxuICB9XHJcblxyXG4gIHByaXZhdGUgc3RlcDNGdW5jdGlvbigpOiB2b2lkIHtcclxuICAgIC8vIFZhcmlhbnQgc3RlcCBmdW5jdGlvbiBhbGxvdyAzLXN0YXRlIG91dHB1dHNcclxuICAgIGNvbnN0IGlucHV0U3VtID0gdGhpcy5pbnB1dHMucmVkdWNlKFxyXG4gICAgICAocHJldiwgY3VycikgPT4gcHJldiArIGN1cnIuZ2V0V2VpZ2h0ZWRPdXRwdXQoKSxcclxuICAgICAgMFxyXG4gICAgKVxyXG4gICAgLy8gVE9ETyB0aGlzIGlzIGZ1Y2tpbmcgbWVzc3lcclxuICAgIGNvbnN0IGF2ZXJhZ2VJbnB1dCA9IDIgKiAoaW5wdXRTdW0gLyB0aGlzLmlucHV0cy5sZW5ndGgpO1xyXG4gICAgaWYgKGF2ZXJhZ2VJbnB1dCA8IDEgLyAzKSB7XHJcbiAgICAgIHRoaXMudmFsdWUgPSAwXHJcbiAgICAgIHJldHVybjtcclxuICAgIH1cclxuICAgIGlmIChhdmVyYWdlSW5wdXQgPCAyIC8gMykge1xyXG4gICAgICB0aGlzLnZhbHVlID0gMC41XHJcbiAgICAgIHJldHVybjtcclxuICAgIH1cclxuICAgIHRoaXMudmFsdWUgPSAxXHJcbiAgfVxyXG59XHJcbiIsImltcG9ydCB7IE5ldXJvbiB9IGZyb20gXCIuL25ldXJvblwiO1xyXG5cclxuZXhwb3J0IGNsYXNzIENvbm5lY3Rpb24ge1xyXG4gIHByaXZhdGUgaW5wdXQ6IE5ldXJvbjtcclxuICBwcml2YXRlIG91dHB1dDogTmV1cm9uO1xyXG4gIHByaXZhdGUgd2VpZ2h0OiBudW1iZXI7XHJcblxyXG4gIGNvbnN0cnVjdG9yKGlucHV0OiBOZXVyb24sIG91dHB1dDogTmV1cm9uLCB3ZWlnaHQ6IG51bWJlciA9IE1hdGgucmFuZG9tKCkpIHtcclxuICAgIHRoaXMuaW5wdXQgPSBpbnB1dDtcclxuICAgIHRoaXMub3V0cHV0ID0gb3V0cHV0O1xyXG4gICAgdGhpcy53ZWlnaHQgPSB3ZWlnaHQ7XHJcbiAgfVxyXG5cclxuICBwdWJsaWMgZ2V0V2VpZ2h0ZWRPdXRwdXQoKTogbnVtYmVyIHtcclxuICAgIHJldHVybiB0aGlzLmlucHV0LnZhbHVlICogdGhpcy53ZWlnaHRcclxuICB9XHJcbn1cclxuIiwiaW1wb3J0IHsgY29uZmlnIH0gZnJvbSBcInN0YXRlTWFuYWdlbWVudC9jb25maWdcIjtcclxuaW1wb3J0IHsgVmVjdG9yMiB9IGZyb20gXCJnZW9tZXRyeS92ZWN0b3IyXCI7XHJcbmltcG9ydCB7IEJlaGF2aW91ciB9IGZyb20gXCIuL2JlaGF2aW91clwiO1xyXG5pbXBvcnQgeyBCZWhhdmlvdXJDb250cm9sbGVkQ3JlYXR1cmUgfSBmcm9tIFwiLi9iZWhhdmlvdXJDb250cm9sbGVkQ3JlYXR1cmVcIjtcclxuaW1wb3J0IFdlaWdodGVkVmVjdG9yMiBmcm9tIFwiZ2VvbWV0cnkvd2VpZ2h0ZWRWZWN0b3IyXCI7XHJcblxyXG5leHBvcnQgY2xhc3MgQm9pZCBleHRlbmRzIEJlaGF2aW91ckNvbnRyb2xsZWRDcmVhdHVyZSB7XHJcbiAgcHVibGljIGRlZmF1bHRDb2xvdXIgPSBjb25maWcuYm9pZC5kZWZhdWx0Q29sb3VyO1xyXG4gIHB1YmxpYyBtYXhTcGVlZCA9IGNvbmZpZy5ib2lkLm1heFNwZWVkO1xyXG4gIHB1YmxpYyBtaW5TcGVlZCA9IGNvbmZpZy5ib2lkLm1pblNwZWVkO1xyXG4gIHB1YmxpYyBzaXplID0gY29uZmlnLmJvaWQuc2l6ZTtcclxuICBwdWJsaWMgZmVhckNvdW50ZG93biA9IDA7XHJcbiAgcHVibGljIGhlYWRpbmcgPSAyICogTWF0aC5QSSAqIE1hdGgucmFuZG9tKCk7XHJcbiAgcHVibGljIHNwZWVkID0gY29uZmlnLmJvaWQubWF4U3BlZWQ7XHJcbiAgcHVibGljIGJlaGF2aW91cnMgPSBbXHJcbiAgICBuZXcgQmVoYXZpb3VyKCgpID0+IHRoaXMuaHVudGVyRXZhc2lvbigpLCAoKSA9PiBcInJlZFwiKSxcclxuICAgIG5ldyBCZWhhdmlvdXIoKCkgPT4gdGhpcy5yZXB1bHNpb24oKSwgKCkgPT4gdGhpcy5mZWFyQ291bnRkb3duID8gXCJyZWRcIiA6IFwib3JhbmdlXCIpLFxyXG4gICAgbmV3IEJlaGF2aW91cigoKSA9PiB0aGlzLmFsaWdubWVudCgpLCAoKSA9PiB0aGlzLmZlYXJDb3VudGRvd24gPyBcInJlZFwiIDogXCJibHVlXCIpLFxyXG4gICAgbmV3IEJlaGF2aW91cigoKSA9PiB0aGlzLmF0dHJhY3Rpb24oKSwgKCkgPT4gdGhpcy5mZWFyQ291bnRkb3duID8gXCJyZWRcIiA6IFwiZ3JlZW5cIiksXHJcbiAgXTtcclxuXHJcbiAgcHVibGljIGluaXRpYWxpemVWZWxvY2l0eSgpOiB2b2lkIHtcclxuICAgIHRoaXMuaGVhZGluZyA9IE1hdGgucmFuZG9tKCkgKiAyICogTWF0aC5QSTtcclxuICAgIHRoaXMuc3BlZWQgPSBjb25maWcuYm9pZC5tYXhTcGVlZDtcclxuICB9XHJcblxyXG4gIHB1YmxpYyB1cGRhdGUoKTogdm9pZCB7XHJcbiAgICBpZiAodGhpcy5mZWFyQ291bnRkb3duKSB7XHJcbiAgICAgIHRoaXMuZmVhckNvdW50ZG93bi0tO1xyXG4gICAgfVxyXG4gICAgdGhpcy5tb3ZlKCk7XHJcbiAgfVxyXG5cclxuICBwdWJsaWMgaHVudGVyRXZhc2lvbigpOiBXZWlnaHRlZFZlY3RvcjIge1xyXG4gICAgY29uc3QgaHVudGVyc0luU2lnaHQgPSB0aGlzLmNyZWF0dXJlU3RvcmFnZS5nZXRIdW50ZXJzSW5BcmVhKFxyXG4gICAgICB0aGlzLnBvc2l0aW9uLFxyXG4gICAgICBjb25maWcuYm9pZC52aXNpb25SYWRpdXMsXHJcbiAgICApO1xyXG4gICAgaWYgKGh1bnRlcnNJblNpZ2h0Lmxlbmd0aCA9PT0gMCkge1xyXG4gICAgICByZXR1cm4gbmV3IFdlaWdodGVkVmVjdG9yMigpO1xyXG4gICAgfVxyXG5cclxuICAgIHRoaXMuZmVhckNvdW50ZG93biA9IGNvbmZpZy5ib2lkLmZlYXJEdXJhdGlvbjtcclxuXHJcbiAgICBjb25zdCBuZWFyZXN0SHVudGVyID0gdGhpcy5uZWFyZXN0Q3JlYXR1cmVUb1Bvc2l0aW9uKFxyXG4gICAgICBodW50ZXJzSW5TaWdodCxcclxuICAgICk7XHJcblxyXG4gICAgY29uc3QgdmVjdG9yVG9NZSA9IG5lYXJlc3RIdW50ZXIucG9zaXRpb24udmVjdG9yVG8odGhpcy5wb3NpdGlvbik7XHJcblxyXG4gICAgcmV0dXJuIG5ldyBXZWlnaHRlZFZlY3RvcjIoXHJcbiAgICAgIHZlY3RvclRvTWVcclxuICAgICAgICAuc2NhbGVUb0xlbmd0aCh0aGlzLm1heFNwZWVkKSxcclxuICAgICAgMTAwLFxyXG4gICAgKTtcclxuICB9XHJcblxyXG4gIHB1YmxpYyByZXB1bHNpb24oKTogV2VpZ2h0ZWRWZWN0b3IyIHtcclxuICAgIGNvbnN0IG5laWdoYm91cnMgPSB0aGlzLmNyZWF0dXJlU3RvcmFnZS5nZXRCb2lkc0luQXJlYShcclxuICAgICAgdGhpcy5wb3NpdGlvbixcclxuICAgICAgY29uZmlnLmJvaWQucmVwdWxzaW9uUmFkaXVzLFxyXG4gICAgKS5maWx0ZXIoKGJvaWQpID0+IGJvaWQgIT09IHRoaXMpO1xyXG4gICAgaWYgKG5laWdoYm91cnMubGVuZ3RoID09PSAwKSB7XHJcbiAgICAgIHJldHVybiBuZXcgV2VpZ2h0ZWRWZWN0b3IyKCk7XHJcbiAgICB9XHJcblxyXG4gICAgY29uc3QgcmVwdWxzaW9uVmVjdG9ycyA9IG5laWdoYm91cnNcclxuICAgIC5tYXAoKGNyZWF0dXJlKSA9PlxyXG4gICAgICBjcmVhdHVyZS5wb3NpdGlvbi52ZWN0b3JUbyh0aGlzLnBvc2l0aW9uKSxcclxuICAgICkubWFwKCh2ZWN0b3IpID0+IG5ldyBXZWlnaHRlZFZlY3RvcjIoXHJcbiAgICAgIHZlY3RvcixcclxuICAgICAgdGhpcy5yZXB1bHNpb25XZWlnaHRGcm9tKHZlY3RvciksXHJcbiAgICApKTtcclxuICAgIGNvbnN0IHRvdGFsV2VpZ2h0ID0gcmVwdWxzaW9uVmVjdG9ycy5yZWR1Y2UoKHBhcnRpYWxXZWlnaHQsIGN1cnJlbnQpID0+IHtcclxuICAgICAgcmV0dXJuIHBhcnRpYWxXZWlnaHQgKyBjdXJyZW50LndlaWdodDtcclxuICAgIH0sIDApO1xyXG5cclxuICAgIHJldHVybiBuZXcgV2VpZ2h0ZWRWZWN0b3IyKFxyXG4gICAgICBXZWlnaHRlZFZlY3RvcjIuYXZlcmFnZShyZXB1bHNpb25WZWN0b3JzKSxcclxuICAgICAgdG90YWxXZWlnaHQsXHJcbiAgICApO1xyXG4gIH1cclxuXHJcbiAgcHVibGljIHJlcHVsc2lvbldlaWdodEZyb20odmVjdG9yOiBWZWN0b3IyKTogbnVtYmVyIHtcclxuICAgIGNvbnN0IGludHJ1c2lvbiA9IGNvbmZpZy5ib2lkLnJlcHVsc2lvblJhZGl1cyAtIHZlY3Rvci5sZW5ndGg7XHJcbiAgICBjb25zdCBub3JtYWxpemVkSW50cnVzaW9uID0gaW50cnVzaW9uIC8gY29uZmlnLmJvaWQucmVwdWxzaW9uUmFkaXVzO1xyXG4gICAgY29uc3Qgc21vb3RoZWRJbnRydXNpb24gPSBNYXRoLnBvdyhub3JtYWxpemVkSW50cnVzaW9uLCAyKTtcclxuICAgIHJldHVybiBzbW9vdGhlZEludHJ1c2lvbiAqIGNvbmZpZy5ib2lkLnJlcHVsc2lvblJhZGl1cztcclxuICB9XHJcblxyXG4gIHB1YmxpYyBhbGlnbm1lbnQoKTogV2VpZ2h0ZWRWZWN0b3IyIHtcclxuICAgIGNvbnN0IG5laWdoYm91cnMgPSB0aGlzLmNyZWF0dXJlU3RvcmFnZS5nZXRCb2lkc0luQXJlYShcclxuICAgICAgdGhpcy5wb3NpdGlvbixcclxuICAgICAgY29uZmlnLmJvaWQuYWxpZ25tZW50UmFkaXVzLFxyXG4gICAgKS5maWx0ZXIoKGJvaWQpID0+IGJvaWQgIT09IHRoaXMpO1xyXG4gICAgaWYgKG5laWdoYm91cnMubGVuZ3RoID09PSAwKSB7XHJcbiAgICAgIHJldHVybiBuZXcgV2VpZ2h0ZWRWZWN0b3IyKCk7XHJcbiAgICB9XHJcbiAgICBjb25zdCBhdmVyYWdlQWxpZ25tZW50VmVjdG9yID0gVmVjdG9yMi5hdmVyYWdlKFxyXG4gICAgICBuZWlnaGJvdXJzLm1hcCgoY3JlYXR1cmUpID0+IHtcclxuICAgICAgICByZXR1cm4gY3JlYXR1cmUudmVsb2NpdHkoKTtcclxuICAgICAgfSksXHJcbiAgICApO1xyXG4gICAgcmV0dXJuIG5ldyBXZWlnaHRlZFZlY3RvcjIoXHJcbiAgICAgIHRoaXMuZmVhckNvdW50ZG93biA/XHJcbiAgICAgICAgYXZlcmFnZUFsaWdubWVudFZlY3Rvci5zY2FsZVRvTGVuZ3RoKHRoaXMubWF4U3BlZWQpIDpcclxuICAgICAgICBhdmVyYWdlQWxpZ25tZW50VmVjdG9yLFxyXG4gICAgICAxNSxcclxuICAgICk7XHJcbiAgfVxyXG5cclxuICBwdWJsaWMgYXR0cmFjdGlvbigpOiBXZWlnaHRlZFZlY3RvcjIge1xyXG4gICAgY29uc3QgbmVpZ2hib3VycyA9IHRoaXMuY3JlYXR1cmVTdG9yYWdlLmdldEJvaWRzSW5BcmVhKFxyXG4gICAgICB0aGlzLnBvc2l0aW9uLFxyXG4gICAgICBjb25maWcuYm9pZC5hdHRyYWN0aW9uUmFkaXVzLFxyXG4gICAgKS5maWx0ZXIoKGJvaWQpID0+IGJvaWQgIT09IHRoaXMpO1xyXG4gICAgaWYgKG5laWdoYm91cnMubGVuZ3RoID09PSAwKSB7XHJcbiAgICAgIHJldHVybiBuZXcgV2VpZ2h0ZWRWZWN0b3IyKCk7XHJcbiAgICB9XHJcblxyXG4gICAgY29uc3QgbmVhcmVzdE5laWdoYm91ciA9IHRoaXMubmVhcmVzdENyZWF0dXJlVG9Qb3NpdGlvbihcclxuICAgICAgbmVpZ2hib3VycyxcclxuICAgICk7XHJcblxyXG4gICAgcmV0dXJuIG5ldyBXZWlnaHRlZFZlY3RvcjIoXHJcbiAgICAgIHRoaXMucG9zaXRpb25cclxuICAgICAgICAudmVjdG9yVG8obmVhcmVzdE5laWdoYm91ci5wb3NpdGlvbilcclxuICAgICAgICAuc2NhbGVUb0xlbmd0aChcclxuICAgICAgICAgIHRoaXMuZmVhckNvdW50ZG93blxyXG4gICAgICAgICAgPyB0aGlzLm1heFNwZWVkXHJcbiAgICAgICAgICA6IG5lYXJlc3ROZWlnaGJvdXIuc3BlZWQgKiAxLjEpLFxyXG4gICAgICAxMCxcclxuICAgICk7XHJcbiAgfVxyXG5cclxuICBwdWJsaWMgZGllKCk6IHZvaWQge1xyXG4gICAgdGhpcy5jcmVhdHVyZVN0b3JhZ2UucmVtb3ZlKHRoaXMuaWQpO1xyXG4gIH1cclxufVxyXG4iLCJpbXBvcnQgV2VpZ2h0ZWRWZWN0b3IyIGZyb20gXCJnZW9tZXRyeS93ZWlnaHRlZFZlY3RvcjJcIjtcclxuaW1wb3J0IHsgUHJpb3JpdHkgfSBmcm9tIFwiY3JlYXR1cmVzL3ByaW9yaXR5XCI7XHJcblxyXG5leHBvcnQgY2xhc3MgQmVoYXZpb3VyIHtcclxuICBjb25zdHJ1Y3RvcihcclxuICAgIHB1YmxpYyBnZXRJZGVhbFdlaWdodGVkSGVhZGluZzogKCgpID0+IFdlaWdodGVkVmVjdG9yMiksXHJcbiAgICBwdWJsaWMgZ2V0Q29sb3I6ICgpID0+IHN0cmluZyxcclxuICApIHtcclxuICB9XHJcbiAgcHVibGljIGdldEN1cnJlbnRQcmlvcml0eSgpOiBQcmlvcml0eSB8IG51bGwge1xyXG4gICAgY29uc3Qgd2VpZ2h0ZWRIZWFkaW5nID0gdGhpcy5nZXRJZGVhbFdlaWdodGVkSGVhZGluZygpO1xyXG4gICAgaWYgKHdlaWdodGVkSGVhZGluZy53ZWlnaHQgPiAwKSB7XHJcbiAgICAgIHJldHVybiBuZXcgUHJpb3JpdHkoXHJcbiAgICAgICAgd2VpZ2h0ZWRIZWFkaW5nLFxyXG4gICAgICAgIHRoaXMuZ2V0Q29sb3IoKSxcclxuICAgICAgKTtcclxuICAgIH1cclxuICAgIHJldHVybiBudWxsO1xyXG4gIH1cclxufVxyXG4iLCJpbXBvcnQgV2VpZ2h0ZWRWZWN0b3IyIGZyb20gXCJnZW9tZXRyeS93ZWlnaHRlZFZlY3RvcjJcIjtcclxuXHJcbmV4cG9ydCBjbGFzcyBQcmlvcml0eSB7XHJcbiAgY29uc3RydWN0b3IoXHJcbiAgICBwdWJsaWMgd2VpZ2h0ZWRWZWN0b3I6IFdlaWdodGVkVmVjdG9yMixcclxuICAgIHB1YmxpYyBjb2xvcjogc3RyaW5nLFxyXG4gICkge31cclxufVxyXG4iLCJpbXBvcnQgeyBjb25maWcgfSBmcm9tIFwic3RhdGVNYW5hZ2VtZW50L2NvbmZpZ1wiO1xyXG5pbXBvcnQgeyBWZWN0b3IyIH0gZnJvbSBcImdlb21ldHJ5L3ZlY3RvcjJcIjtcclxuaW1wb3J0IHsgQmVoYXZpb3VyIH0gZnJvbSBcIi4vYmVoYXZpb3VyXCI7XHJcbmltcG9ydCB7IFByaW9yaXR5IH0gZnJvbSBcIi4vcHJpb3JpdHlcIjtcclxuaW1wb3J0IHsgQ3JlYXR1cmVTdG9yYWdlIH0gZnJvbSBcInN0YXRlTWFuYWdlbWVudC9jcmVhdHVyZVN0b3JhZ2VcIjtcclxuaW1wb3J0IHsgQ3JlYXR1cmUgfSBmcm9tIFwiLi9jcmVhdHVyZVwiO1xyXG5pbXBvcnQgV2VpZ2h0ZWRWZWN0b3IyIGZyb20gXCJnZW9tZXRyeS93ZWlnaHRlZFZlY3RvcjJcIjtcclxuXHJcbmV4cG9ydCBhYnN0cmFjdCBjbGFzcyBCZWhhdmlvdXJDb250cm9sbGVkQ3JlYXR1cmUgZXh0ZW5kcyBDcmVhdHVyZSB7XHJcbiAgcHVibGljIGFic3RyYWN0IGRlZmF1bHRDb2xvdXI6IHN0cmluZztcclxuICBwdWJsaWMgY29sb3VyID0gXCJibGFja1wiO1xyXG4gIHB1YmxpYyBhYnN0cmFjdCBiZWhhdmlvdXJzOiBCZWhhdmlvdXJbXTtcclxuICBwdWJsaWMgYWJzdHJhY3QgbWF4U3BlZWQ6IG51bWJlcjtcclxuICBwdWJsaWMgYWJzdHJhY3QgbWluU3BlZWQ6IG51bWJlcjtcclxuICBwdWJsaWMgcG9zaXRpb246IFZlY3RvcjI7XHJcbiAgcHVibGljIGhpc3Rvcnk6IFZlY3RvcjJbXSA9IFtdO1xyXG5cclxuICBjb25zdHJ1Y3RvcihcclxuICAgIHB1YmxpYyByZWFkb25seSBpZDogbnVtYmVyID0gMCxcclxuICAgIHB1YmxpYyBjcmVhdHVyZVN0b3JhZ2U6IENyZWF0dXJlU3RvcmFnZSxcclxuICAgIHBvc2l0aW9uPzogVmVjdG9yMixcclxuICApIHtcclxuICAgIHN1cGVyKCk7XHJcbiAgICB0aGlzLnBvc2l0aW9uID0gcG9zaXRpb24gfHwgbmV3IFZlY3RvcjIoXHJcbiAgICAgIE1hdGgucmFuZG9tKCkgKiBjb25maWcuc2NyZWVuLm1heFgsXHJcbiAgICAgIE1hdGgucmFuZG9tKCkgKiBjb25maWcuc2NyZWVuLm1heFksXHJcbiAgICApO1xyXG4gICAgZm9yIChsZXQgaSA9IDA7IGkgPCBjb25maWcuY3JlYXR1cmUubWF4SGlzdG9yeTsgaSsrKSB7XHJcbiAgICAgIHRoaXMuaGlzdG9yeS5wdXNoKHRoaXMucG9zaXRpb24pO1xyXG4gICAgfVxyXG4gICAgdGhpcy5pbml0aWFsaXplVmVsb2NpdHkoKTtcclxuICB9XHJcblxyXG4gIHB1YmxpYyBhYnN0cmFjdCBpbml0aWFsaXplVmVsb2NpdHkoKTogdm9pZDtcclxuXHJcbiAgcHVibGljIGRpc3RhbmNlVG9DcmVhdHVyZShjcmVhdHVyZTogQ3JlYXR1cmUpOiBudW1iZXIge1xyXG4gICAgcmV0dXJuIHRoaXMucG9zaXRpb24uZGlzdGFuY2UoY3JlYXR1cmUucG9zaXRpb24pO1xyXG4gIH1cclxuXHJcbiAgcHVibGljIGFic3RyYWN0IHVwZGF0ZSgpOiB2b2lkO1xyXG5cclxuICBwdWJsaWMgbW92ZSgpOiB2b2lkIHtcclxuICAgIHRoaXMudXBkYXRlSGlzdG9yeSgpO1xyXG4gICAgdGhpcy5wb3NpdGlvbiA9IHRoaXMucG9zaXRpb24uYWRkKHRoaXMudmVsb2NpdHkoKSkubm9ybWFsaXplKCk7XHJcbiAgICB0aGlzLnVwZGF0ZUhlYWRpbmcoKTtcclxuICB9XHJcblxyXG4gIHB1YmxpYyB1cGRhdGVIZWFkaW5nKCk6IHZvaWQge1xyXG4gICAgY29uc3QgcHJpb3JpdGllcyA9IHRoaXMuZ2V0Q3VycmVudFByaW9yaXRpZXMoKS5zb3J0KChhLCBiKSA9PiBiLndlaWdodGVkVmVjdG9yLndlaWdodCAtIGEud2VpZ2h0ZWRWZWN0b3Iud2VpZ2h0KTtcclxuICAgIGlmIChwcmlvcml0aWVzLmxlbmd0aCA9PT0gMCkge1xyXG4gICAgICB0aGlzLmRlZmF1bHRCZWhhdmlvdXIoKTtcclxuICAgICAgcmV0dXJuO1xyXG4gICAgfVxyXG4gICAgdGhpcy5jb2xvdXIgPSBwcmlvcml0aWVzWzBdLmNvbG9yO1xyXG4gICAgdGhpcy51cGRhdGVIZWFkaW5nVG93YXJkcyhXZWlnaHRlZFZlY3RvcjIuYXZlcmFnZShwcmlvcml0aWVzLm1hcCgocHJpb3JpdHkpID0+IHByaW9yaXR5LndlaWdodGVkVmVjdG9yKSkpO1xyXG4gIH1cclxuXHJcbiAgcHVibGljIGdldEN1cnJlbnRQcmlvcml0aWVzKCk6IFByaW9yaXR5W10ge1xyXG4gICAgcmV0dXJuIHRoaXMuYmVoYXZpb3Vyc1xyXG4gICAgICAubWFwKChiZWhhdmlvdXIpID0+IGJlaGF2aW91ci5nZXRDdXJyZW50UHJpb3JpdHkoKSlcclxuICAgICAgLmZpbHRlcigocHJpb3JpdHkpID0+XHJcbiAgICAgICAgcHJpb3JpdHkgJiZcclxuICAgICAgICBwcmlvcml0eS53ZWlnaHRlZFZlY3Rvci52ZWN0b3IubGVuZ3RoICYmIHByaW9yaXR5LndlaWdodGVkVmVjdG9yLndlaWdodCxcclxuICAgICkgYXMgUHJpb3JpdHlbXTtcclxuICB9XHJcblxyXG4gIHB1YmxpYyBkZWZhdWx0QmVoYXZpb3VyKCk6IHZvaWQge1xyXG4gICAgdGhpcy5jb2xvdXIgPSB0aGlzLmRlZmF1bHRDb2xvdXI7XHJcbiAgICB0aGlzLnNwZWVkID0gTWF0aC5tYXgodGhpcy52ZWxvY2l0eS5sZW5ndGggLSBjb25maWcuY3JlYXR1cmUuYWNjZWxlcmF0aW9uLCB0aGlzLm1pblNwZWVkKTtcclxuICAgIGNvbnN0IHJhbmRvbVR1cm4gPSAyICogY29uZmlnLmNyZWF0dXJlLnR1cm5pbmdNYXggKiBNYXRoLnJhbmRvbSgpIC0gY29uZmlnLmNyZWF0dXJlLnR1cm5pbmdNYXg7XHJcbiAgICB0aGlzLmhlYWRpbmcgPSB0aGlzLmhlYWRpbmcgKyByYW5kb21UdXJuO1xyXG4gIH1cclxuXHJcbiAgcHVibGljIHVwZGF0ZUhlYWRpbmdUb3dhcmRzKHZlY3RvcjogVmVjdG9yMiB8IG51bGwpOiB2b2lkIHtcclxuICAgIGlmICghdmVjdG9yKSB7XHJcbiAgICAgIHJldHVybjtcclxuICAgIH1cclxuICAgIGxldCBsaW1pdGVkU3BlZWQgPSBNYXRoLm1heChNYXRoLm1pbih2ZWN0b3IubGVuZ3RoLCB0aGlzLm1heFNwZWVkKSwgdGhpcy5taW5TcGVlZCk7XHJcbiAgICBsaW1pdGVkU3BlZWQgPSBNYXRoLm1heChcclxuICAgICAgTWF0aC5taW4oXHJcbiAgICAgICAgbGltaXRlZFNwZWVkLFxyXG4gICAgICAgIHRoaXMuc3BlZWQgKyBjb25maWcuY3JlYXR1cmUuYWNjZWxlcmF0aW9uKSxcclxuICAgICAgdGhpcy5zcGVlZCAtIGNvbmZpZy5jcmVhdHVyZS5hY2NlbGVyYXRpb24pO1xyXG4gICAgdGhpcy5zcGVlZCA9IGxpbWl0ZWRTcGVlZDtcclxuXHJcbiAgICBjb25zdCBpZGVhbFR1cm4gPSB0aGlzLnZlbG9jaXR5KCkuYW5nbGVUbyh2ZWN0b3IpO1xyXG4gICAgY29uc3QgbGltaXRlZFR1cm4gPSBNYXRoLm1heChcclxuICAgICAgTWF0aC5taW4oaWRlYWxUdXJuLCBjb25maWcuY3JlYXR1cmUudHVybmluZ01heCksXHJcbiAgICAgIC1jb25maWcuY3JlYXR1cmUudHVybmluZ01heCxcclxuICAgICk7XHJcblxyXG4gICAgdGhpcy5oZWFkaW5nID0gdGhpcy5oZWFkaW5nXHJcbiAgICAgICsgbGltaXRlZFR1cm5cclxuICAgICAgKyAyICogY29uZmlnLmNyZWF0dXJlLmhlYWRpbmdGdXp6ICogTWF0aC5yYW5kb20oKSAtIGNvbmZpZy5jcmVhdHVyZS5oZWFkaW5nRnV6ejtcclxuICB9XHJcblxyXG4gIHB1YmxpYyBuZWFyZXN0Q3JlYXR1cmVUb1Bvc2l0aW9uKGNyZWF0dXJlczogQ3JlYXR1cmVbXSk6IENyZWF0dXJlIHtcclxuICAgIGlmIChjcmVhdHVyZXMubGVuZ3RoID09PSAwKSB7XHJcbiAgICAgIHRocm93IG5ldyBFcnJvcihcIk5lYXJlc3QgY3JlYXR1cmUgaXMgdW5kZWZpbmVkIGZvciB6ZXJvIGNyZWF0dXJlc1wiKTtcclxuICAgIH1cclxuICAgIHJldHVybiBjcmVhdHVyZXMucmVkdWNlKChwcmV2aW91cywgY3VycmVudCkgPT4ge1xyXG4gICAgICBjb25zdCBjdXJyZW50RGlzdGFuY2UgPSB0aGlzLnBvc2l0aW9uLnZlY3RvclRvKGN1cnJlbnQucG9zaXRpb24pLmxlbmd0aDtcclxuICAgICAgaWYgKHByZXZpb3VzLmRpc3RhbmNlID4gY3VycmVudERpc3RhbmNlKSB7XHJcbiAgICAgICAgcmV0dXJuIHtcclxuICAgICAgICAgIGRpc3RhbmNlOiBjdXJyZW50RGlzdGFuY2UsXHJcbiAgICAgICAgICBuZWFyZXN0OiBjdXJyZW50LFxyXG4gICAgICAgIH07XHJcbiAgICAgIH1cclxuICAgICAgcmV0dXJuIHByZXZpb3VzO1xyXG4gICAgfSwge1xyXG4gICAgICBkaXN0YW5jZTogdGhpcy5wb3NpdGlvbi52ZWN0b3JUbyhjcmVhdHVyZXNbMF0ucG9zaXRpb24pLmxlbmd0aCxcclxuICAgICAgbmVhcmVzdDogY3JlYXR1cmVzWzBdLFxyXG4gICAgfSkubmVhcmVzdDtcclxuICB9XHJcblxyXG4gIHB1YmxpYyBhYnN0cmFjdCBkaWUoKTogdm9pZDtcclxufVxyXG4iXSwic291cmNlUm9vdCI6IiJ9